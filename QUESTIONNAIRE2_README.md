# Въпросник 2.0 - Детайлна Консултация

## Описание

Въпросник 2.0 е независима версия на оригиналния въпросник, създадена специално за събиране на детайлна информация от клиенти за последваща обработка от екипа.

## Основни различия от оригиналния въпросник

### 1. Съхранение на данни
- **Оригинален въпросник**: Изпраща данни директно към API (`/api/generate-plan`) за моментална обработка и генериране на план
- **Въпросник 2.0**: Съхранява данните локално и предоставя възможност за изтегляне като JSON файл

### 2. Прикачване на файлове
Добавено е ново поле в секцията "Допълнителна информация":
- **Тип**: File upload (множествен избор)
- **ID**: `medicalFiles`
- **Описание**: "Прикачете файлове или снимки с изследвания (по желание)"
- **Поддържани формати**: Снимки (image/*), PDF, Word документи (.doc, .docx)
- **Функционалност**: 
  - Визуализация на избраните файлове с имена и размер
  - Конвертиране на файловете в base64 формат за съхранение
  - Включване в съхранените данни

### 3. Финален екран
Вместо пренасочване към анализ и план, показва информативен екран с:
- Благодарствено съобщение
- Информация, че данните ще бъдат изпратени на екипа
- Уведомление, че планът ще бъде готов скоро
- Информация за контакт чрез посочения имейл
- Бутон за връщане към началната страница
- Връзка към началната страница

### 4. Независимост
- Напълно отделен HTML файл (`questionnaire2.html`)
- Не е интегриран с останалата част от проекта
- Не използва външен API или backend
- Работи изцяло на клиентска страна

## Структура на съхранените данни

Данните се съхраняват в следния формат:

```json
{
  "id": "client_1234567890_abc123",
  "timestamp": "2026-02-13T12:00:00.000Z",
  "answers": {
    "name": "Име на клиента",
    "email": "email@example.com",
    "age": "35",
    "gender": "Жена",
    ...
  },
  "files": [
    {
      "name": "test-result.pdf",
      "type": "application/pdf",
      "size": 102400,
      "data": "data:application/pdf;base64,..."
    }
  ]
}
```

## Как да използвате

1. Отворете `questionnaire2.html` в браузър
2. Попълнете всички полета на въпросника
3. По желание прикачете файлове/снимки с изследвания
4. Завършете въпросника
5. Вижте съобщението за успех с информация за следващите стъпки
6. Данните се съхраняват автоматично в localStorage на браузъра за вътрешни цели

## Технически детайли

### Промени в кода

1. **Метаданни**:
   - Променено заглавие: "Въпросник 2.0 - Детайлна Консултация"
   - Актуализирани Open Graph и Twitter Card метаданни

2. **Въпроси**:
   - Добавено поле `medicalFiles` с тип `file`

3. **Рендериране**:
   - Добавена логика за рендериране на file input тип
   - Визуален дизайн със стилизиран upload контейнер
   - Показване на списък с избрани файлове

4. **Валидация**:
   - Полето `medicalFiles` е маркирано като optional (винаги валидно)

5. **Submission**:
   - Премахнато извикването към API
   - Добавена логика за конвертиране на файлове в base64
   - Генериране на уникален client ID
   - Съхранение в localStorage за вътрешни цели

### Съвместимост

- Работи във всички модерни браузъри
- Поддържа PWA функционалност (можепо желание)
- Responsive дизайн за мобилни устройства
- Файловете се обработват изцяло на клиента (не се изпращат към сървър)

## Бъдещи подобрения

Възможни разширения на функционалността:
- Автоматично изпращане на данните по имейл
- Интеграция с облачно хранилище
- Backend API за директно записване в clients папката
- Админ панел за преглед на подадените въпросници

## Папка clients

Създадена е папка `clients` в root на проекта, където могат да се архивират изтеглените JSON файлове.
- Папката е конфигурирана в `.gitignore` да не следи JSON файлове
- Включва README.md с документация
- Включва .gitkeep за запазване на папката в Git

## Забележки

- Този въпросник е напълно независим от основния проект
- Не заменя оригиналния въпросник
- Предназначен е за случаи, където се иска ръчна обработка на данните от екип
- Подходящ за VIP клиенти или специални консултации
