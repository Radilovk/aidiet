# üîî –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞ Push –ò–∑–≤–µ—Å—Ç–∏—è - NutriPlan

> **–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:** 2026-02-17 - Background notifications —á—Ä–µ–∑ Cloudflare Workers cron triggers

## üìã –û–±—â –ü—Ä–µ–≥–ª–µ–¥

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ push –∏–∑–≤–µ—Å—Ç–∏—è –∏–∑–ø–æ–ª–∑–≤–∞ **server-side cron scheduling** –∑–∞ –Ω–∞–¥–µ–∂–¥–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è –¥–æ—Ä–∏ –∫–æ–≥–∞—Ç–æ PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ.

### ‚ú® –ö–ª—é—á–æ–≤–∏ –í—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | Timing |
|-----|----------|--------|
| üç≥ **–•—Ä–∞–Ω–µ–Ω–µ** | –ó–∞–∫—É—Å–∫–∞, –æ–±—è–¥, –≤–µ—á–µ—Ä—è | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ –≤—Ä–µ–º–µ |
| üíß **–í–æ–¥–∞** | –ù–∞–ø–æ–º–Ω—è–Ω–∏—è –∑–∞ —Ö–∏–¥—Ä–∞—Ç–∞—Ü–∏—è | –í—Å–µ–∫–∏ N —á–∞—Å–∞ (default: 2h) |
| üò¥ **–°—ä–Ω** | –í—Ä–µ–º–µ –∑–∞ –ø–æ—á–∏–≤–∫–∞ | –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –≤—Ä–µ–º–µ |
| üèÉ **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç** | –§–∏–∑–∏—á–µ—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç | –°—É—Ç—Ä–∏–Ω + –æ–±—è–¥ |
| üíä **–î–æ–±–∞–≤–∫–∏** | –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –¥–æ–±–∞–≤–∫–∏ | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–∏ —á–∞—Å–æ–≤–µ |
| üí¨ **–ß–∞—Ç** | AI –∞—Å–∏—Å—Ç–µ–Ω—Ç —Å—ä–æ–±—â–µ–Ω–∏—è | Real-time |

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Cloudflare Workers (–≤–∏–Ω–∞–≥–∏ –∞–∫—Ç–∏–≤–µ–Ω)
  ‚Üì Cron Trigger (0 * * * *) - hourly
  ‚Üì Check KV –∑–∞ scheduled times
  ‚Üì Send Web Push notifications
  ‚Üì
Push Service (Google/Apple/Browser)
  ‚Üì
User Device ‚Üí Service Worker
  ‚Üì Display notification
```

**–ü—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚úÖ –†–∞–±–æ—Ç–∏ –≤ background (app –º–æ–∂–µ –¥–∞ –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω)
- ‚úÖ –ù–∞–¥–µ–∂–¥–Ω–æ scheduling (server-side)
- ‚úÖ –ü—ä–ª–µ–Ω —Ç–µ–∫—Å—Ç –≤ notifications (title + body)
- ‚úÖ Battery efficient (native push service)

---

## ‚öôÔ∏è –ü—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –°—Ç—ä–ø–∫–∞ 1: –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ VAPID –ö–ª—é—á–æ–≤–µ

VAPID –∫–ª—é—á–æ–≤–µ—Ç–µ —Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏ –∑–∞ Web Push authentication.

**–ú–µ—Ç–æ–¥ 1: web-push CLI**
```bash
npm install -g web-push
web-push generate-vapid-keys
```

**–ú–µ—Ç–æ–¥ 2: Online Generator**
- https://vapidkeys.com/
- –ì–µ–Ω–µ—Ä–∏—Ä–∞ instant, copy keys

**Output:**
```
Public Key:  BG3xG3xG... (87-88 chars)
Private Key: AbCdEfGh... (43 chars)
```

### –°—Ç—ä–ø–∫–∞ 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –≤ Cloudflare

```bash
# Set VAPID keys as secrets
wrangler secret put VAPID_PUBLIC_KEY
# Paste public key when prompted

wrangler secret put VAPID_PRIVATE_KEY
# Paste private key when prompted
```

**–ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ (Dashboard):**
1. Cloudflare Dashboard ‚Üí Workers & Pages
2. Select `aidiet-worker`
3. Settings ‚Üí Variables ‚Üí Environment Variables
4. Add encrypted variables:
   - `VAPID_PUBLIC_KEY`
   - `VAPID_PRIVATE_KEY`

### –°—Ç—ä–ø–∫–∞ 3: Verify Cron Trigger

```bash
# Check wrangler.toml
cat wrangler.toml | grep -A2 "\[triggers\]"
```

–¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ:
```toml
[triggers]
crons = ["0 * * * *"]
```

### –°—Ç—ä–ø–∫–∞ 4: Deploy Worker

```bash
wrangler deploy
```

**Verify:**
1. Cloudflare Dashboard ‚Üí Workers ‚Üí aidiet-worker
2. Triggers tab ‚Üí Cron Triggers
3. –¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ: `0 * * * *`

---

## üë• –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ (–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏)

### –ó–∞ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ

**1. –û—Ç–≤–æ—Ä–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ**
- https://biocode.website/ (or your domain)

**2. –†–∞–∑—Ä–µ—à–µ—Ç–µ Notifications**
- Browser —â–µ –ø–æ–∫–∞–∂–µ permission prompt
- Click "Allow"

**3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ Preferences**
- Profile ‚Üí Notifications Settings
- Enable/disable types
- Set custom times
- Save (auto-syncs to backend!)

**4. –ì–æ—Ç–æ–≤–æ!**
- Notifications —â–µ –∏–¥–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- –î–æ—Ä–∏ –∫–æ–≥–∞—Ç–æ app –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω
- –ù–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ —á–∞—Å–æ–≤–µ

### iOS –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏

**–í–∞–∂–Ω–æ:** iOS –∏–∑–∏—Å–∫–≤–∞ PWA –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è

1. Safari ‚Üí Share ‚Üí Add to Home Screen
2. Open –æ—Ç Home Screen (–Ω–µ –æ—Ç Safari!)
3. Allow notifications

### Huawei –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ (–±–µ–∑ Google Services)

**Fallback:** Calendar Export
1. App ‚Üí Warning message
2. Click "–ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π –≤ –ö–∞–ª–µ–Ω–¥–∞—Ä"
3. Import `.ics` –≤ Calendar app

---

## üõ†Ô∏è Admin Panel –ù–∞—Å—Ç—Ä–æ–π–∫–∏

1. –û—Ç–≤–æ—Ä–µ—Ç–µ `/admin.html`
2. –í–ª–µ–∑—Ç–µ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∞ –ø–∞—Ä–æ–ª–∞
3. –ù–∞–º–µ—Ä–µ—Ç–µ —Å–µ–∫—Ü–∏—è—Ç–∞ "üîî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ Push –ò–∑–≤–µ—Å—Ç–∏—è"

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ò–∑–≤–µ—Å—Ç–∏—è—Ç–∞

#### –ì–ª–æ–±–∞–ª–Ω–æ –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ
- ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–∞–π —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è - –í–∫–ª—é—á–≤–∞/–∏–∑–∫–ª—é—á–≤–∞ —Ü—è–ª–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞

#### –ß–∞—Ç –°—ä–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ò–∑–ø—Ä–∞—â–∞–π –∏–∑–≤–µ—Å—Ç–∏—è –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ —Å—ä–æ–±—â–µ–Ω–∏—è –æ—Ç AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞
- –ò–∑–ø—Ä–∞—â–∞ –∏–∑–≤–µ—Å—Ç–∏–µ –∫–æ–≥–∞—Ç–æ AI-—Ç–æ –æ—Ç–≥–æ–≤–æ—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤ —á–∞—Ç–∞

#### –ù–∞–ø–æ–º–Ω—è–Ω–∏—è –∑–∞ –í–æ–¥–∞
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **–ß–µ—Å—Ç–æ—Ç–∞** - –ù–∞ –∫–æ–ª–∫–æ —á–∞—Å–∞ –¥–∞ —Å–µ –∏–∑–ø—Ä–∞—â–∞—Ç –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è—Ç–∞ (1-6 —á–∞—Å–∞)
- **–ù–∞—á–∞–ª–µ–Ω —á–∞—Å** - –û—Ç –∫–æ–π —á–∞—Å –¥–∞ –∑–∞–ø–æ—á–Ω–∞—Ç (–Ω–∞–ø—Ä. 8:00)
- **–ö—Ä–∞–µ–Ω —á–∞—Å** - –î–æ –∫–æ–π —á–∞—Å –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∞—Ç (–Ω–∞–ø—Ä. 22:00)

–ü—Ä–∏–º–µ—Ä: –ü—Ä–∏ —á–µ—Å—Ç–æ—Ç–∞ 2 —á–∞—Å–∞ –æ—Ç 8:00 –¥–æ 22:00
- –ò–∑–≤–µ—Å—Ç–∏—è —â–µ —Å–µ –∏–∑–ø—Ä–∞—â–∞—Ç –Ω–∞: 8:00, 10:00, 12:00, 14:00, 16:00, 18:00, 20:00, 22:00

#### –ù–∞–ø–æ–º–Ω—è–Ω–∏—è –∑–∞ –•—Ä–∞–Ω–µ–Ω–µ
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **–ó–∞–∫—É—Å–∫–∞** - –ß–∞—Å –∑–∞ –∏–∑–≤–µ—Å—Ç–∏–µ (–Ω–∞–ø—Ä. 08:00)
- **–û–±—è–¥** - –ß–∞—Å –∑–∞ –∏–∑–≤–µ—Å—Ç–∏–µ (–Ω–∞–ø—Ä. 13:00)
- **–í–µ—á–µ—Ä—è** - –ß–∞—Å –∑–∞ –∏–∑–≤–µ—Å—Ç–∏–µ (–Ω–∞–ø—Ä. 19:00)
- **–ó–∞–∫—É—Å–∫–∏** - –ê–∫—Ç–∏–≤–∏—Ä–∞–π –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è –∑–∞ –º–µ–∂–¥–∏–Ω–Ω–∏ –∑–∞–∫—É—Å–∫–∏

### –ë—É—Ç–æ–Ω–∏ –∑–∞ –î–µ–π—Å—Ç–≤–∏–µ

#### üíæ –ó–∞–ø–∞–∑–∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∏
–ó–∞–ø–∞–∑–≤–∞ —Ç–µ–∫—É—â–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞

#### üîÑ –ü—Ä–µ–∑–∞—Ä–µ–¥–∏
–ü—Ä–µ–∑–∞—Ä–µ–∂–¥–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –æ—Ç —Å—ä—Ä–≤—ä—Ä–∞

#### ‚úâÔ∏è –¢–µ—Å—Ç–≤–∞–π –ò–∑–≤–µ—Å—Ç–∏–µ
–ò–∑–ø—Ä–∞—â–∞ —Ç–µ—Å—Ç–æ–≤–æ –∏–∑–≤–µ—Å—Ç–∏–µ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞

## –°—Ç–∞—Ç—É—Å–Ω–∏ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

### VAPID –ö–ª—é—á
- ‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω - –ö–ª—é—á–æ–≤–µ—Ç–µ —Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ
- ‚úó –ù–µ –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω - –¢—Ä—è–±–≤–∞ –¥–∞ —Å–µ –¥–æ–±–∞–≤—è—Ç VAPID –∫–ª—é—á–æ–≤–µ

### –°—Ç–∞—Ç—É—Å –Ω–∞ –ò–∑–≤–µ—Å—Ç–∏—è—Ç–∞
- ‚úì –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–∏ - –°–∏—Å—Ç–µ–º–∞—Ç–∞ —Ä–∞–±–æ—Ç–∏
- ‚úó –î–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∏ - –°–∏—Å—Ç–µ–º–∞—Ç–∞ –µ –∏–∑–∫–ª—é—á–µ–Ω–∞

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∏ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ

### –ê–±–æ–Ω–∏—Ä–∞–Ω–µ

1. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø–æ—Å–µ—â–∞–≤–∞ —Å–∞–π—Ç–∞ (index.html –∏–ª–∏ plan.html)
2. –°–ª–µ–¥ 5 —Å–µ–∫—É–Ω–¥–∏ –≤–∏–∂–¥–∞ prompt: "–ò—Å–∫–∞—Ç–µ –ª–∏ –¥–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç–µ –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è?"
3. –ü—Ä–∏ —Å—ä–≥–ª–∞—Å–∏–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞ browser permission dialog
4. –°–ª–µ–¥ –æ–¥–æ–±—Ä–µ–Ω–∏–µ, –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç —Å–µ –∞–±–æ–Ω–∏—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –ü–æ–ª—É—á–∞–≤–∞–Ω–µ –Ω–∞ –ò–∑–≤–µ—Å—Ç–∏—è

–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –ø–æ–ª—É—á–∞–≤–∞—Ç –∏–∑–≤–µ—Å—Ç–∏—è –∫–æ–≥–∞—Ç–æ:
- AI –∞—Å–∏—Å—Ç–µ–Ω—Ç—ä—Ç –∏–∑–ø—Ä–∞—â–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ
- –ï –≤—Ä–µ–º–µ –∑–∞ –ø–∏–µ–Ω–µ –Ω–∞ –≤–æ–¥–∞ (—Å–ø–æ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ)
- –ï –≤—Ä–µ–º–µ –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–µ (—Å–ø–æ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ)
- –ï –≤—Ä–µ–º–µ –∑–∞ —Å—ä–Ω (—Å–ø–æ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ)
- –ï –≤—Ä–µ–º–µ –∑–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç (—Å—É—Ç—Ä–∏–Ω –∏–ª–∏ –ø—Ä–µ–∑ –¥–µ–Ω—è)
- –ï –≤—Ä–µ–º–µ –∑–∞ –ø—Ä–∏–µ–º –Ω–∞ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –¥–æ–±–∞–≤–∫–∏
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ä—Ç –∏–∑–ø—Ä–∞—â–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –ò–∑–≤–µ—Å—Ç–∏—è

–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞—Ç —Å–≤–æ–∏—Ç–µ –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è –æ—Ç:
1. –û—Ç–≤–æ—Ä–µ—Ç–µ `/profile.html`
2. –ù–∞–º–µ—Ä–µ—Ç–µ —Å–µ–∫—Ü–∏—è—Ç–∞ "üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è"
3. –ê–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ –∂–µ–ª–∞–Ω–∏—Ç–µ —Ç–∏–ø–æ–≤–µ –∏–∑–≤–µ—Å—Ç–∏—è
4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ –≤—Å–µ–∫–∏ —Ç–∏–ø
5. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ "–ó–∞–ø–∞–∑–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è"

## –¢–∏–ø–æ–≤–µ –ò–∑–≤–µ—Å—Ç–∏—è

### 1. –û–±—â–∏ (general)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ó–∞ –æ–±—â–∏ —Å—ä–æ–±—â–µ–Ω–∏—è

### 2. –ß–∞—Ç (chat)
- –õ–µ–∫–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ü—Ä–∏ —Å—ä–æ–±—â–µ–Ω–∏—è –æ—Ç AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞

### 3. –í–æ–¥–∞ (water)
- –ï–¥–∏–Ω–∏—á–Ω–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ù–∞–ø–æ–º–Ω—è–Ω–µ –∑–∞ –ø–∏–µ–Ω–µ –Ω–∞ –≤–æ–¥–∞

### 4. –•—Ä–∞–Ω–µ–Ω–µ (meal)
- –°–∏–ª–Ω–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ò–∑–∏—Å–∫–≤–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- –í–∞–∂–Ω–∏ –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–µ

### 5. –ó–∞–∫—É—Å–∫–∏ (snack)
- –°—Ä–µ–¥–Ω–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ó–∞ –º–µ–∂–¥–∏–Ω–Ω–∏ –∑–∞–∫—É—Å–∫–∏

### 6. –°—ä–Ω (sleep)
- –°—Ä–µ–¥–Ω–∞ –≤–∏–±—Ä–∞—Ü–∏—è —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- –ù–∞–ø–æ–º–Ω—è–Ω–µ –∑–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞ —Å—ä–Ω

### 7. –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç (activity)
- –ö—Ä–∞—Ç–∫–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ù–∞—Å—ä—Ä—á–∞–≤–∞–Ω–µ –∑–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç

### 8. –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –¥–æ–±–∞–≤–∫–∏ (supplements)
- –î–≤–æ–π–Ω–∞ –∫—Ä–∞—Ç–∫–∞ –≤–∏–±—Ä–∞—Ü–∏—è
- –ù–∞–ø–æ–º–Ω—è–Ω–µ –∑–∞ –ø—Ä–∏–µ–º –Ω–∞ –¥–æ–±–∞–≤–∫–∏

## –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ AI –ê—Å–∏—Å—Ç–µ–Ω—Ç –°—ä–æ–±—â–µ–Ω–∏—è

### –ß—Ä–µ–∑ Admin –ü–∞–Ω–µ–ª–∞

1. –û—Ç–≤–æ—Ä–µ—Ç–µ `/admin.html`
2. –ù–∞–º–µ—Ä–µ—Ç–µ —Å–µ–∫—Ü–∏—è—Ç–∞ "üí¨ –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ AI –ê—Å–∏—Å—Ç–µ–Ω—Ç –°—ä–æ–±—â–µ–Ω–∏—è"
3. –í—ä–≤–µ–¥–µ—Ç–µ User ID –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
4. –í—ä–≤–µ–¥–µ—Ç–µ —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ
5. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ "–ò–∑–ø—Ä–∞—Ç–∏ –°—ä–æ–±—â–µ–Ω–∏–µ"

–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç —â–µ –ø–æ–ª—É—á–∏ push –∏–∑–≤–µ—Å—Ç–∏–µ —Å –≤–∞—à–µ—Ç–æ —Å—ä–æ–±—â–µ–Ω–∏–µ –∫–∞—Ç–æ —á–µ –∏–¥–≤–∞ –æ—Ç AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞.

## –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –®–∞–±–ª–æ–Ω–∏ –∑–∞ –ò–∑–≤–µ—Å—Ç–∏—è

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –≤—Å–∏—á–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è:

1. –û—Ç–≤–æ—Ä–µ—Ç–µ `/admin.html`
2. –ù–∞–º–µ—Ä–µ—Ç–µ —Å–µ–∫—Ü–∏—è—Ç–∞ "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –®–∞–±–ª–æ–Ω–∏ –∑–∞ –ò–∑–≤–µ—Å—Ç–∏—è"
3. –†–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ –∑–∞–≥–ª–∞–≤–∏—è—Ç–∞ –∏ —Ç–µ–∫—Å—Ç–æ–≤–µ—Ç–µ –∑–∞ –≤—Å–µ–∫–∏ —Ç–∏–ø –∏–∑–≤–µ—Å—Ç–∏–µ
4. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ "–ó–∞–ø–∞–∑–∏ –®–∞–±–ª–æ–Ω–∏"

–ù–∞–ª–∏—á–Ω–∏ —à–∞–±–ª–æ–Ω–∏ –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ:
- –•—Ä–∞–Ω–µ–Ω–µ (–∑–∞–∫—É—Å–∫–∞, –æ–±—è–¥, –≤–µ—á–µ—Ä—è, –∑–∞–∫—É—Å–∫–∏)
- –í–æ–¥–∞
- –°—ä–Ω
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç (—Å—É—Ç—Ä–µ—à–Ω–∞ –∏ –¥–Ω–µ–≤–Ω–∞)
- –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –¥–æ–±–∞–≤–∫–∏

## –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –ò–∑–≤–µ—Å—Ç–∏—è

–ó–∞ –¥–∞ –∏–∑–ø—Ä–∞—Ç–∏—Ç–µ –∏–∑–≤–µ—Å—Ç–∏–µ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª:

```javascript
// –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ browser console –∏–ª–∏ –Ω–∞–ø—Ä–∞–≤–µ—Ç–µ POST –∑–∞—è–≤–∫–∞
fetch('https://aidiet.radilov-k.workers.dev/api/push/send', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        userId: 'user123',  // ID –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
        title: '–ó–∞–≥–ª–∞–≤–∏–µ –Ω–∞ –∏–∑–≤–µ—Å—Ç–∏–µ—Ç–æ',
        body: '–¢–µ–∫—Å—Ç –Ω–∞ –∏–∑–≤–µ—Å—Ç–∏–µ—Ç–æ',
        url: '/plan.html',  // –ö—ä–¥–µ –¥–∞ –æ—Ç–≤–µ–¥–µ –ø—Ä–∏ –∫–ª–∏–∫
        notificationType: 'general'  // –¢–∏–ø: general, chat, water, meal, snack
    })
})
.then(r => r.json())
.then(console.log);
```

## –ß–µ—Å—Ç–æ –ó–∞–¥–∞–≤–∞–Ω–∏ –í—ä–ø—Ä–æ—Å–∏

### 1. –ö–∞–∫ –¥–∞ –ø—Ä–æ–≤–µ—Ä—è –¥–∞–ª–∏ VAPID –∫–ª—é—á–æ–≤–µ—Ç–µ —Ä–∞–±–æ—Ç—è—Ç?

–û—Ç–≤–æ—Ä–µ—Ç–µ admin –ø–∞–Ω–µ–ª–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ "VAPID –ö–ª—é—á". –¢—Ä—è–±–≤–∞ –¥–∞ –ø–æ–∫–∞–∑–≤–∞ "‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω".

### 2. –ó–∞—â–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –Ω–µ –ø–æ–ª—É—á–∞–≤–∞—Ç –∏–∑–≤–µ—Å—Ç–∏—è?

–í—ä–∑–º–æ–∂–Ω–∏ –ø—Ä–∏—á–∏–Ω–∏:
- –ù–µ —Å–∞ –¥–∞–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑—ä—Ä–∞
- Service worker –Ω–µ –µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω
- VAPID –∫–ª—é—á–æ–≤–µ—Ç–µ –Ω–µ —Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ
- –ò–∑–ø–æ–ª–∑–≤–∞—Ç browser –±–µ–∑ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ (Safari)

### 3. –ö–∞–∫ –¥–∞ —Ç–µ—Å—Ç–≤–∞–º —Å–∏—Å—Ç–µ–º–∞—Ç–∞?

1. –û—Ç–≤–æ—Ä–µ—Ç–µ admin –ø–∞–Ω–µ–ª–∞
2. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ "–¢–µ—Å—Ç–≤–∞–π –ò–∑–≤–µ—Å—Ç–∏–µ"
3. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –ø–æ–ª—É—á–∞–≤–∞—Ç–µ –∏–∑–≤–µ—Å—Ç–∏–µ –≤ –±—Ä–∞—É–∑—ä—Ä–∞

### 4. –ö–∞–∫ –¥–∞ –Ω–∞–º–µ—Ä—è —Å–≤–æ–µ—Ç–æ User ID –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ?

**–ù–æ–≤ –º–µ—Ç–æ–¥ (–°–ª–µ–¥ —Ñ–µ–≤—Ä—É–∞—Ä–∏ 2026):**
1. –û—Ç–≤–æ—Ä–µ—Ç–µ index.html –∏–ª–∏ plan.html
2. –û—Ç–≤–æ—Ä–µ—Ç–µ Developer Console (F12)
3. –í–∞—à–∏—è—Ç User ID —â–µ –±—ä–¥–µ –ø–æ–∫–∞–∑–∞–Ω –≤ —Å–∏–Ω—è —Ä–∞–º–∫–∞:
   ```
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   üîë Your User ID for testing notifications:
   user_1234567890_abc123
   ‚ÑπÔ∏è  Use this ID in the Admin Panel to send test notifications
   ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   ```
4. –ö–æ–ø–∏—Ä–∞–π—Ç–µ User ID –∏ –≥–æ –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –≤ admin –ø–∞–Ω–µ–ª–∞

**–ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–µ–Ω –º–µ—Ç–æ–¥ (Browser Console):**
```javascript
// –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –≤–∞—à–∏—è User ID
console.log(localStorage.getItem('userId'));
```

### 5. –ü–æ–ª—É—á–∞–≤–∞–º –≥—Ä–µ—à–∫–∞ "InvalidAccessError: The provided applicationServerKey is not valid"

–¢–∞–∑–∏ –≥—Ä–µ—à–∫–∞ –æ–∑–Ω–∞—á–∞–≤–∞, —á–µ VAPID –ø—É–±–ª–∏—á–Ω–∏—è—Ç –∫–ª—é—á –Ω–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ì–µ–Ω–µ—Ä–∏—Ä–∞–π—Ç–µ –Ω–æ–≤–∏ VAPID –∫–ª—é—á–æ–≤–µ:
   ```bash
   npm install -g web-push
   web-push generate-vapid-keys
   ```

2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ –∫–ª—é—á–æ–≤–µ—Ç–µ –≤ Cloudflare Worker:
   - –û—Ç–∏–¥–µ—Ç–µ –≤ Settings ‚Üí Variables
   - –î–æ–±–∞–≤–µ—Ç–µ `VAPID_PUBLIC_KEY` (–ø—É–±–ª–∏—á–Ω–∏—è—Ç –∫–ª—é—á)
   - –î–æ–±–∞–≤–µ—Ç–µ `VAPID_PRIVATE_KEY` (—á–∞—Å—Ç–Ω–∏—è—Ç –∫–ª—é—á, –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω)

3. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–∞ –∫–ª—é—á–∞:
   - –¢—Ä—è–±–≤–∞ –¥–∞ –µ base64url string
   - –û–±–∏–∫–Ω–æ–≤–µ–Ω–æ –µ 87-88 —Å–∏–º–≤–æ–ª–∞
   - –ü—Ä–∏–º–µ—Ä: `BEl62iUYgUivxIkv69yViEuiBIa-Ib9-SkvMeAtA3LFgDzkrxZJjSgSnfckjBJuBkr3qBrYhQzj_0sS5kVwfg3A`

4. –†–∞–∑–≥—ä—Ä–Ω–µ—Ç–µ worker –æ—Ç–Ω–æ–≤–æ:
   ```bash
   wrangler deploy
   ```

5. –ü—Ä–µ–∑–∞—Ä–µ–¥–µ—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ console –∑–∞ –Ω–æ–≤–∏ —Å—ä–æ–±—â–µ–Ω–∏—è:
   - ‚úÖ "Push subscription created successfully" - –£—Å–ø–µ—Ö!
   - ‚ùå "Invalid VAPID public key format" - –ì—Ä–µ—à–µ–Ω —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –∫–ª—é—á–∞
   - ‚ùå "VAPID keys not configured" - –ö–ª—é—á–æ–≤–µ—Ç–µ –Ω–µ —Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏

### 5a. –ì—Ä–µ—à–∫–∞ "DataError: Invalid PKCS8 input" (–ü–û–ü–†–ê–í–ï–ù–ê —Ñ–µ–≤—Ä—É–∞—Ä–∏ 2026)

**–°–∏–º–ø—Ç–æ–º:** Server –ª–æ–≥–æ–≤–µ—Ç–µ –ø–æ–∫–∞–∑–≤–∞—Ç –≥—Ä–µ—à–∫–∞:
```
Error sending push notification: DataError: Invalid PKCS8 input.
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–¢–∞–∑–∏ –≥—Ä–µ—à–∫–∞ —Å–µ –ø–æ–ª—É—á–∞–≤–∞—à–µ –∑–∞—â–æ—Ç–æ `web-push generate-vapid-keys` –∫–æ–º–∞–Ω–¥–∞—Ç–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞ –∫–ª—é—á–æ–≤–µ –≤ **raw** base64url —Ñ–æ—Ä–º–∞—Ç (32 –±–∞–π—Ç–∞ –∑–∞ —á–∞—Å—Ç–Ω–∏—è –∫–ª—é—á), –Ω–æ –∫–æ–¥—ä—Ç —Å–µ –æ–ø–∏—Ç–≤–∞—à–µ –¥–∞ –≥–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ –∫–∞—Ç–æ **PKCS8** —Ñ–æ—Ä–º–∞—Ç. Web Crypto API –∏–∑–∏—Å–∫–≤–∞ EC —á–∞—Å—Ç–Ω–∏ –∫–ª—é—á–æ–≤–µ –¥–∞ –±—ä–¥–∞—Ç –≤ PKCS8 –∏–ª–∏ JWK —Ñ–æ—Ä–º–∞—Ç, –Ω–µ –≤ raw.

**–†–µ—à–µ–Ω–∏–µ (–í–µ—á–µ –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–æ):**
–ö–æ–¥—ä—Ç –±–µ—à–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω –¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ raw VAPID –∫–ª—é—á–æ–≤–µ—Ç–µ –≤ JWK (JSON Web Key) —Ñ–æ—Ä–º–∞—Ç –ø—Ä–µ–¥–∏ –¥–∞ –≥–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ –≤ Web Crypto API. –¢–∞–∑–∏ –ø–æ–ø—Ä–∞–≤–∫–∞:

1. **–î–µ–∫–æ–¥–∏—Ä–∞ –ø—É–±–ª–∏—á–Ω–∏—è –∫–ª—é—á** (65 –±–∞–π—Ç–∞: 0x04 + 32 –±–∞–π—Ç–∞ x + 32 –±–∞–π—Ç–∞ y)
2. **–ò–∑–≤–ª–∏—á–∞ x –∏ y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏—Ç–µ** –æ—Ç –ø—É–±–ª–∏—á–Ω–∏—è –∫–ª—é—á
3. **–ò–∑–ø–æ–ª–∑–≤–∞ —Å–∫–∞–ª–∞—Ä–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–Ω–∏—è –∫–ª—é—á** (d) –æ—Ç 32-–±–∞–π—Ç–æ–≤–∏—è —á–∞—Å—Ç–µ–Ω –∫–ª—é—á
4. **–°—ä–∑–¥–∞–≤–∞ JWK –æ–±–µ–∫—Ç** —Å –ø—Ä–∞–≤–∏–ª–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç:
   ```json
   {
     "kty": "EC",
     "crv": "P-256",
     "x": "<base64url x –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞>",
     "y": "<base64url y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞>",
     "d": "<base64url —á–∞—Å—Ç–µ–Ω –∫–ª—é—á>",
     "ext": true
   }
   ```
5. **–ò–º–ø–æ—Ä—Ç–∏—Ä–∞ –∫–ª—é—á–∞ –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ 'jwk' —Ñ–æ—Ä–º–∞—Ç** –≤–º–µ—Å—Ç–æ 'pkcs8'

**–ö–∞–∫–≤–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ:**
- –ü—Ä–æ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ç–µ –∫–ª—é—á–æ–≤–µ –æ—Ç `web-push generate-vapid-keys`
- –ù–µ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ
- Worker –∫–æ–¥—ä—Ç –≤–µ—á–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
–°–ª–µ–¥ —Ä–∞–∑–≥—Ä—ä—â–∞–Ω–µ –Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—è worker, —Ç–µ—Å—Ç–≤–∞–π—Ç–µ –∫–∞—Ç–æ –∏–∑–ø—Ä–∞—Ç–∏—Ç–µ push –∏–∑–≤–µ—Å—Ç–∏–µ –æ—Ç admin –ø–∞–Ω–µ–ª–∞. –¢—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ:
- ‚úÖ "Push notification sent successfully" - –ü–æ–ø—Ä–∞–≤–∫–∞—Ç–∞ —Ä–∞–±–æ—Ç–∏!
- ‚ùå –ê–∫–æ –≤—Å–µ –æ—â–µ –≤–∏–∂–¥–∞—Ç–µ –≥—Ä–µ—à–∫–∏, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ Cloudflare Worker –ª–æ–≥–æ–≤–µ—Ç–µ –∑–∞ –¥–µ—Ç–∞–π–ª–∏

### 6. –ü–æ–¥–¥—ä—Ä–∂–∞—Ç –ª–∏ —Å–µ –≤—Å–∏—á–∫–∏ –±—Ä–∞—É–∑—ä—Ä–∏?

–ü–æ–¥–¥—ä—Ä–∂–∞–Ω–∏:
- ‚úÖ Chrome/Edge 50+
- ‚úÖ Firefox 44+
- ‚úÖ Opera 37+

–ù–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞—Ç:
- ‚ùå Safari (iOS/macOS) - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞
- ‚ùå Internet Explorer

### 7. –ú–æ–≥–∞—Ç –ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –¥–∞ —Å–ø—Ä–∞—Ç –∏–∑–≤–µ—Å—Ç–∏—è—Ç–∞?

–î–∞, –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞:
1. –ë–ª–æ–∫–∏—Ä–∞—Ç –∏–∑–≤–µ—Å—Ç–∏—è—Ç–∞ –ø—Ä–µ–∑ browser settings
2. –ü—Ä–µ–º–∞—Ö–Ω–∞—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ—Ç–æ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è
3. **–ù–û–í**: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞—Ç –∫–æ–∏ –∏–∑–≤–µ—Å—Ç–∏—è –∏—Å–∫–∞—Ç –¥–∞ –ø–æ–ª—É—á–∞–≤–∞—Ç —á—Ä–µ–∑:
   - –û—Ç–≤–æ—Ä–µ—Ç–µ `/profile.html`
   - –°–µ–∫—Ü–∏—è "üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è"
   - –ê–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–Ω–∏ —Ç–∏–ø–æ–≤–µ –∏–∑–≤–µ—Å—Ç–∏—è
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ –≤—Ä–µ–º–µ –∏ —á–µ—Å—Ç–æ—Ç–∞

### 8. –ö–æ–ª–∫–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ —Å–∞ –∞–±–æ–Ω–∏—Ä–∞–Ω–∏?

–ú–æ–º–µ–Ω—Ç–Ω–æ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –Ω–µ –ø–æ–∫–∞–∑–≤–∞ —Ç–æ—á–µ–Ω –±—Ä–æ–π. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –≤ Cloudflare KV dashboard –∑–∞ –∫–ª—é—á–æ–≤–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å `push_subscription_`.

## API –ï–Ω–¥–ø–æ–π–Ω—Ç–∏

### –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –ï–Ω–¥–ø–æ–π–Ω—Ç–∏

#### GET `/api/user/notification-preferences`
–ò–∑–≤–ª–∏—á–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª.

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `userId` - ID –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è

**–û—Ç–≥–æ–≤–æ—Ä:**
```json
{
  "success": true,
  "preferences": {
    "enabled": true,
    "meals": { "enabled": true, "advanceMinutes": 60 },
    "water": { "enabled": true },
    "sleep": { "enabled": true, "time": "22:00" },
    "activity": { "enabled": true, "morningTime": "07:00", "dayTime": "15:00" },
    "supplements": { "enabled": true }
  }
}
```

#### POST `/api/user/notification-preferences`
–ó–∞–ø–∞–∑–≤–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª.

**–¢—è–ª–æ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞:**
```json
{
  "userId": "user_1234567890_abc123",
  "preferences": {
    "enabled": true,
    "meals": { "enabled": true, "advanceMinutes": 60 },
    "water": { "enabled": true },
    "sleep": { "enabled": true, "time": "22:00" },
    "activity": { "enabled": true, "morningTime": "07:00", "dayTime": "15:00" },
    "supplements": { "enabled": true }
  }
}
```

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∏ –ï–Ω–¥–ø–æ–π–Ω—Ç–∏

#### POST `/api/admin/send-message`
–ò–∑–ø—Ä–∞—â–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª –æ—Ç AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞.

**–¢—è–ª–æ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞:**
```json
{
  "userId": "user_1234567890_abc123",
  "message": "–í–∞—à–µ—Ç–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ –æ—Ç AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞"
}
```

**–û—Ç–≥–æ–≤–æ—Ä:**
```json
{
  "success": true,
  "message": "–°—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ –±–µ—à–µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ"
}
```

#### GET `/api/admin/notification-templates`
–ò–∑–≤–ª–∏—á–∞ —à–∞–±–ª–æ–Ω–∏—Ç–µ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è.

**–û—Ç–≥–æ–≤–æ—Ä:**
```json
{
  "success": true,
  "templates": {
    "meals": {
      "breakfast": { "title": "–í—Ä–µ–º–µ –∑–∞ –∑–∞–∫—É—Å–∫–∞", "body": "–ó–∞–ø–æ—á–Ω–µ—Ç–µ –¥–µ–Ω—è —Å–∏...", "time": "08:00" },
      "lunch": { "title": "–í—Ä–µ–º–µ –∑–∞ –æ–±—è–¥", "body": "–í—Ä–µ–º–µ –µ –∑–∞ –æ–±—è–¥...", "time": "13:00" },
      "dinner": { "title": "–í—Ä–µ–º–µ –∑–∞ –≤–µ—á–µ—Ä—è", "body": "–ù–µ –∑–∞–±—Ä–∞–≤—è–π—Ç–µ...", "time": "19:00" },
      "snack": { "title": "–í—Ä–µ–º–µ –∑–∞ –∑–∞–∫—É—Å–∫–∞", "body": "–ú–µ–∂–¥–∏–Ω–Ω–∞ –∑–∞–∫—É—Å–∫–∞...", "time": "10:30" }
    },
    "water": { "title": "–í—Ä–µ–º–µ –∑–∞ –≤–æ–¥–∞", "body": "–ü–∏–π—Ç–µ –≤–æ–¥–∞!", "frequency": 2 },
    "sleep": { "title": "–í—Ä–µ–º–µ –∑–∞ —Å—ä–Ω", "body": "–ü–æ–¥–≥–æ—Ç–≤–µ—Ç–µ —Å–µ –∑–∞ –ø–æ—á–∏–≤–∫–∞", "time": "22:00" },
    "activity": {
      "morning": { "title": "–°—É—Ç—Ä–µ—à–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç", "body": "–ó–∞–ø–æ—á–Ω–µ—Ç–µ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç", "time": "07:00" },
      "day": { "title": "–í—Ä–µ–º–µ –∑–∞ –¥–≤–∏–∂–µ–Ω–∏–µ", "body": "–ù–∞–ø—Ä–∞–≤–µ—Ç–µ —Ä–∞–∑—Ö–æ–¥–∫–∞", "time": "15:00" }
    },
    "supplements": { "title": "–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –¥–æ–±–∞–≤–∫–∏", "body": "–í—Ä–µ–º–µ –∑–∞ –¥–æ–±–∞–≤–∫–∏", "times": [] }
  }
}
```

#### POST `/api/admin/notification-templates`
–ó–∞–ø–∞–∑–≤–∞ —à–∞–±–ª–æ–Ω–∏—Ç–µ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è.

**–¢—è–ª–æ –Ω–∞ –∑–∞—è–≤–∫–∞—Ç–∞:**
```json
{
  "templates": {
    "meals": { ... },
    "water": { ... },
    "sleep": { ... },
    "activity": { ... },
    "supplements": { ... }
  }
}
```

## –°–∏–≥—É—Ä–Ω–æ—Å—Ç

### –í–∞–∂–Ω–æ:
- ‚ùó –ù–ò–ö–û–ì–ê –Ω–µ —Å–ø–æ–¥–µ–ª—è–π—Ç–µ VAPID —á–∞—Å—Ç–Ω–∏—è –∫–ª—é—á
- ‚ùó –í–ò–ù–ê–ì–ò –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–∏ environment variables
- ‚ùó –ò–∑–∏—Å–∫–≤–∞ HTTPS –ø—Ä–æ—Ç–æ–∫–æ–ª

## –ë—ä–¥–µ—â–∏ –ü–æ–¥–æ–±—Ä–µ–Ω–∏—è

–ü–ª–∞–Ω–∏—Ä–∞–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏:
- üìÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–ª–∞–Ω–∏—Ä–∞–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è (cron)
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ –∫–ª–∏–∫–æ–≤–µ
- üé® Rich notifications —Å –±—É—Ç–æ–Ω–∏
- üîä –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –∑–≤—É—Ü–∏

–í–µ—á–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–∏:
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª
- ‚úÖ –ê–¥–º–∏–Ω —Å—ä–æ–±—â–µ–Ω–∏—è –¥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º–∏ —à–∞–±–ª–æ–Ω–∏ –∑–∞ –∏–∑–≤–µ—Å—Ç–∏—è
- ‚úÖ –ù–∞–ø–æ–º–Ω—è–Ω–∏—è –∑–∞ —Å—ä–Ω, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –∏ –¥–æ–±–∞–≤–∫–∏

## –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ browser console –∑–∞ –≥—Ä–µ—à–∫–∏
2. –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–∞–π—Ç–µ VAPID –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞ –≤ admin –ø–∞–Ω–µ–ª–∞
3. –ü—Ä–µ–≥–ª–µ–¥–∞–π—Ç–µ Cloudflare Worker –ª–æ–≥–æ–≤–µ—Ç–µ
4. –¢–µ—Å—Ç–≤–∞–π—Ç–µ —Å —Ä–∞–∑–ª–∏—á–Ω–∏ –±—Ä–∞—É–∑—ä—Ä–∏

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—ä–ª–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏ –µ–∑–∏–∫: `PUSH_NOTIFICATIONS_SETUP.md`

## –ö–æ–Ω—Ç–∞–∫—Ç–∏

–ó–∞ –≤—ä–ø—Ä–æ—Å–∏ –∏ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

---

*–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è: –§–µ–≤—Ä—É–∞—Ä–∏ 2026*
