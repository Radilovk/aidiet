–¢–∏ —Å–∏ –µ–∫—Å–ø–µ—Ä—Ç–µ–Ω –∫–ª–∏–Ω–∏—á–µ–Ω –¥–∏–µ—Ç–æ–ª–æ–≥, –µ–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥ –∏ –±–∏—Ö–µ–π–≤–∏–æ—Ä–∞–ª–µ–Ω –ø—Å–∏—Ö–æ–ª–æ–≥. 

–¢–í–û–Ø–¢–ê –ó–ê–î–ê–ß–ê: –ù–∞–ø—Ä–∞–≤–∏ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –•–û–õ–ò–°–¢–ò–ß–ï–ù –ê–ù–ê–õ–ò–ó –Ω–∞ –∑–¥—Ä–∞–≤–æ—Å–ª–æ–≤–Ω–∏—è –∏ –º–µ—Ç–∞–±–æ–ª–∏—Ç–µ–Ω –ø—Ä–æ—Ñ–∏–ª –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞.

–§–û–ö–£–°: –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π –ö–û–†–ï–õ–ê–¶–ò–ò–¢–ï –º–µ–∂–¥—É –≤—Å–∏—á–∫–∏ —Ñ–∞–∫—Ç–æ—Ä–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ –æ–ø—Ç–∏–º–∞–ª–Ω–∏—Ç–µ –∫–∞–ª–æ—Ä–∏–π–Ω–∏ –∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–Ω–∏ –Ω—É–∂–¥–∏ –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ —Ü—è–ª–æ—Å—Ç–Ω–∞—Ç–∞ –∫–ª–∏–Ω–∏—á–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∞.

‚ïê‚ïê‚ïê –ö–õ–ò–ï–ù–¢–°–ö–ò –ü–†–û–§–ò–õ ‚ïê‚ïê‚ïê
${JSON.stringify({
  name: data.name,
  age: data.age,
  gender: data.gender,
  height: data.height,
  weight: data.weight,
  goal: data.goal,
  lossKg: data.lossKg,
  
  // Sleep & circadian rhythm
  sleepHours: data.sleepHours,
  sleepInterrupt: data.sleepInterrupt,
  chronotype: data.chronotype,
  
  // Activity & stress
  sportActivity: data.sportActivity,
  dailyActivityLevel: data.dailyActivityLevel,
  stressLevel: data.stressLevel,
  
  // Nutrition & hydration
  waterIntake: data.waterIntake,
  drinksSweet: data.drinksSweet,
  drinksAlcohol: data.drinksAlcohol,
  
  // Eating behavior - FULL DATA for precise correlational analysis
  overeatingFrequency: data.overeatingFrequency,
  eatingHabits: data.eatingHabits,
  foodCravings: data.foodCravings,
  foodTriggers: data.foodTriggers,
  compensationMethods: data.compensationMethods,
  socialComparison: data.socialComparison,
  
  // Medical & history - FULL DATA for comprehensive understanding
  medicalConditions: data.medicalConditions,
  medications: data.medications,
  medicationsDetails: data.medicationsDetails,
  weightChange: data.weightChange,
  weightChangeDetails: data.weightChangeDetails,
  dietHistory: data.dietHistory,
  dietType: data.dietType,
  dietResult: data.dietResult,
  
  // Preferences
  dietPreference: data.dietPreference,
  dietDislike: data.dietDislike,
  dietLove: data.dietLove,
  
  // Additional notes from user (CRITICAL INFORMATION)
  additionalNotes: data.additionalNotes
}, null, 2)}

${data.additionalNotes ? `
‚ïê‚ïê‚ïê üî• –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–ê –î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–ê –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û–¢ –ü–û–¢–†–ï–ë–ò–¢–ï–õ–Ø üî• ‚ïê‚ïê‚ïê
‚ö†Ô∏è –ú–ê–ö–°–ò–ú–ê–õ–ï–ù –ü–†–ò–û–†–ò–¢–ï–¢: –°–ª–µ–¥–Ω–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –∏ –¢–†–Ø–ë–í–ê –¥–∞ –±—ä–¥–µ –≤–∑–µ—Ç–∞ –ø—Ä–µ–¥–≤–∏–¥ –ø—Ä–∏ –¶–ï–õ–ò–Ø –∞–Ω–∞–ª–∏–∑, –∏–∑—á–∏—Å–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏.
–¢–æ–≤–∞ –º–æ–∂–µ –¥–∞ –ø—Ä–æ–º–µ–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–æ –∞–Ω–∞–ª–∏–∑–∞, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞ –∏ –ø–ª–∞–Ω–∞!

–î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–ò –ë–ï–õ–ï–ñ–ö–ò –û–¢ ${data.name}:
${data.additionalNotes}

‚ö†Ô∏è –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–û: –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π –∫–∞–∫ —Ç–∞–∑–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–ª–∏—è–µ –Ω–∞:
1. –ò–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞ –Ω–∞ BMR/TDEE/–ö–∞–ª–æ—Ä–∏–∏
2. –ò–∑–±–æ—Ä–∞ –Ω–∞ –¥–∏–µ—Ç–∏—á–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
3. –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—è –ø—Ä–æ—Ñ–∏–ª
4. –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ç–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è
5. –•—Ä–∞–Ω–∏—Ç–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è—Ç–∞ –≤ –ø–ª–∞–Ω–∞
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
` : ''}

‚ïê‚ïê‚ïê –ë–ê–ó–û–í–ê –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ó–ê –ò–ó–ß–ò–°–õ–ï–ù–ò–Ø ‚ïê‚ïê‚ïê
–û—Å–Ω–æ–≤–Ω–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (–∑–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è):
- –¢–µ–≥–ª–æ: ${data.weight} –∫–≥
- –í–∏—Å–æ—á–∏–Ω–∞: ${data.height} —Å–º
- –í—ä–∑—Ä–∞—Å—Ç: ${data.age} –≥–æ–¥–∏–Ω–∏
- –ü–æ–ª: ${data.gender}
- –¶–µ–ª: ${data.goal}
${data.lossKg ? `- –ñ–µ–ª–∞–Ω–æ –æ—Ç—Å–ª–∞–±–≤–∞–Ω–µ: ${data.lossKg} –∫–≥` : ''}

‚ïê‚ïê‚ïê BACKEND –†–ï–§–ï–†–ï–ù–¢–ù–ò –ò–ó–ß–ò–°–õ–ï–ù–ò–Ø (Issues #2, #7, #9, #10, #28 - Feb 2026) ‚ïê‚ïê‚ïê
${(() => {
  // Calculate unified activity score (Issue #7)
  const activityData = calculateUnifiedActivityScore(data);
  
  // Calculate BMR
  const bmr = calculateBMR(data);
  
  // Calculate TDEE using new unified score
  const tdee = calculateTDEE(bmr, activityData.combinedScore);
  
  // Calculate safe deficit (Issue #9)
  const deficitData = calculateSafeDeficit(tdee, data.goal);
  
  // Calculate baseline macros (Issue #2, #28) - pass TDEE for accurate percentages
  const macros = calculateMacronutrientRatios(data, activityData.combinedScore, tdee);
  
  return `
–£–ù–ò–§–ò–¶–ò–†–ê–ù –ê–ö–¢–ò–í–ù–û–°–¢ –°–ö–û–† (Issue #7):
- –î–Ω–µ–≤–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç: ${data.dailyActivityLevel} ‚Üí ${activityData.dailyScore}/3
- –°–ø–æ—Ä—Ç–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç: ${data.sportActivity} ‚Üí ~${activityData.sportDays} –¥–Ω–∏
- –ö–û–ú–ë–ò–ù–ò–†–ê–ù –°–ö–û–†: ${activityData.combinedScore}/10 (${activityData.activityLevel})
- –§–æ—Ä–º—É–ª–∞: –¥–Ω–µ–≤–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç (1-3) + —Å–ø–æ—Ä—Ç–Ω–∏ –¥–Ω–∏ ‚Üí —Å–∫–∞–ª–∞ 1-10

–ë–ê–ó–û–í–ò –ö–ê–õ–ö–£–õ–ê–¶–ò–ò:
- BMR (Mifflin-St Jeor): ${bmr} kcal
  * –ú—ä–∂: 10√ó${data.weight} + 6.25√ó${data.height} - 5√ó${data.age} + 5
  * –ñ–µ–Ω–∞: 10√ó${data.weight} + 6.25√ó${data.height} - 5√ó${data.age} - 161
  
- TDEE (Issue #10): ${tdee} kcal
  * BMR √ó ${(tdee / bmr).toFixed(2)} (—Ñ–∞–∫—Ç–æ—Ä –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä ${activityData.combinedScore})
  * –ù–æ–≤ –º–Ω–æ–∂–∏—Ç–µ–ª –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ 1-10 —Å–∫–∞–ª–∞ (–Ω–µ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏)
  
- –ë–ï–ó–û–ü–ê–°–ï–ù –î–ï–§–ò–¶–ò–¢ (Issue #9): ${deficitData.targetCalories} kcal
  * –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: 25% (${deficitData.maxDeficitCalories} kcal –º–∏–Ω–∏–º—É–º)
  * –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: ${deficitData.deficitPercent}%
  * AI –º–æ–∂–µ –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–Ω—Ç–µ—Ä–º–∏—Ç–µ–Ω—Ç–Ω–æ –≥–ª–∞–¥—É–≤–∞–Ω–µ –∏ –¥—Ä.)

–ë–ê–ó–û–í–ò –ú–ê–ö–†–û–ù–£–¢–†–ò–ï–ù–¢–ò (Issue #2, #28 - –ù–ï —Ü–∏—Ä–∫—É–ª—è—Ä–Ω–∞ –ª–æ–≥–∏–∫–∞):
- –ü—Ä–æ—Ç–µ–∏–Ω: ${macros.protein}% (${macros.proteinGramsPerKg}g/kg –∑–∞ ${data.gender})
  * ${data.gender === '–ú—ä–∂' ? '–ú—ä–∂–µ –∏–º–∞—Ç –ø–æ-–≤–∏—Å–æ–∫–∏ –Ω—É–∂–¥–∏' : '–ñ–µ–Ω–∏ –∏–º–∞—Ç –ø–æ-–Ω–∏—Å–∫–∏ –Ω—É–∂–¥–∏'} –æ—Ç –ø—Ä–æ—Ç–µ–∏–Ω
  * –ö–æ—Ä–∏–≥–∏—Ä–∞–Ω–æ —Å–ø–æ—Ä–µ–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä ${activityData.combinedScore}
- –í—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏: ${macros.carbs}%
- –ú–∞–∑–Ω–∏–Ω–∏: ${macros.fats}%
- –°–£–ú–ê: ${macros.protein + macros.carbs + macros.fats}% (–≤–∞–ª–∏–¥–∏—Ä–∞–Ω–æ = 100%)
- –§–æ—Ä–º—É–ª–∞: –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–∏—Ä–∞–Ω–æ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –∏ —Ü–µ–ª
`;
})()}

–†–ï–§–ï–†–ï–ù–¢–ù–ò–¢–ï –∏–∑—á–∏—Å–ª–µ–Ω–∏—è —Å–∞ —Å–∞–º–æ –û–¢–ü–†–ê–í–ù–ê –¢–û–ß–ö–ê –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è. –¢–ò –æ–ø—Ä–µ–¥–µ–ª—è—à —Ñ–∏–Ω–∞–ª–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ —Å–ø–æ—Ä–µ–¥ —Ö–æ–ª–∏—Å—Ç–∏—á–Ω–∏—è –∞–Ω–∞–ª–∏–∑.

‚ïê‚ïê‚ïê –¢–í–û–Ø–¢–ê –ó–ê–î–ê–ß–ê - –†–ê–ó–®–ò–†–ï–ù –ê–ù–ê–õ–ò–ó ‚ïê‚ïê‚ïê

–ù–∞–ø—Ä–∞–≤–∏ –•–û–õ–ò–°–¢–ò–ß–ï–ù –ê–ù–ê–õ–ò–ó, –≤–∫–ª—é—á–≤–∞—â —Å–ª–µ–¥–Ω–∏—Ç–µ —Å—Ç—ä–ø–∫–∏:

1. BMI –ê–ù–ê–õ–ò–ó:
   - –ò–∑—á–∏—Å–ª–∏ BMI = —Ç–µ–≥–ª–æ(kg) / (–≤–∏—Å–æ—á–∏–Ω–∞(m))¬≤
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–∞–π: –ü–æ–¥–Ω–æ—Ä–º–µ–Ω–æ (<18.5), –ù–æ—Ä–º–∞–ª–Ω–æ (18.5-25), –ù–∞–¥–Ω–æ—Ä–º–µ–Ω–æ (25-30), –ó–∞—Ç–ª—ä—Å—Ç—è–≤–∞–Ω–µ (>30)
   - –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —Ü–µ–ª—Ç–∞

2. –ë–ê–ó–û–í –ú–ï–¢–ê–ë–û–õ–ò–ó–™–ú (BMR) –ò TDEE:
   - –ò–∑–ø–æ–ª–∑–≤–∞–π Mifflin-St Jeor —Ñ–æ—Ä–º—É–ª–∞—Ç–∞ (–≤–∏–∂ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏—Ç–µ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è)
   - –ö–æ—Ä–∏–≥–∏—Ä–∞–π —Å–ø–æ—Ä–µ–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä 1-10 (${(() => { const ad = calculateUnifiedActivityScore(data); return ad.combinedScore; })()}/10)
   - TDEE = BMR √ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Ñ–∞–∫—Ç–æ—Ä

3. –°–¢–ê–ù–î–ê–†–¢ –ó–ê –†–ê–ó–ü–†–ï–î–ï–õ–Ø–ù–ï –ù–ê –ú–ê–ö–†–û–°–ò:
   - –ü—Ä–æ—Ç–µ–∏–Ω–∏: –±–∞–∑–∏—Ä–∞–π –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç, —Ü–µ–ª –∏ –ø–æ–ª
   - –ú–∞–∑–Ω–∏–Ω–∏: –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏ –∑–∞ —Ö–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –±–∞–ª–∞–Ω—Å
   - –í—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏: —Å–ø–æ—Ä–µ–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –∏ –º–µ—Ç–∞–±–æ–ª–∏—Ç–µ–Ω —Ç–∏–ø
   - –§–∏–±—Ä–∏: –∏–∑—á–∏—Å–ª–∏ —Å–ø–æ—Ä–µ–¥ –ø–æ–ª, –≤—ä–∑—Ä–∞—Å—Ç –∏ —Ü–µ–ª (–æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ ${FIBER_MIN_GRAMS}-${FIBER_MAX_GRAMS}–≥ –¥–Ω–µ–≤–Ω–æ, –Ω–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–π)

4. –ù–ò–í–û –ù–ê –ê–ö–¢–ò–í–ù–û–°–¢ (—Å–∫–∞–ª–∞ 1-10):
   - –í–µ—á–µ –∏–∑—á–∏—Å–ª–µ–Ω–æ: ${(() => { const ad = calculateUnifiedActivityScore(data); return ad.combinedScore; })()}/10 (${(() => { const ad = calculateUnifiedActivityScore(data); return ad.activityLevel; })()})
   - –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π –∫–∞–∫ —Ç–æ–≤–∞ –≤–ª–∏—è–µ –Ω–∞ –∫–∞–ª–æ—Ä–∏–π–Ω–∏ –Ω—É–∂–¥–∏

5. –§–ò–ó–ò–û–õ–û–ì–ò–ß–ù–ê –§–ê–ó–ê –í –ñ–ò–í–û–¢–ê:
   - –í—ä–∑—Ä–∞—Å—Ç: ${data.age} –≥–æ–¥–∏–Ω–∏
   - –û–ø—Ä–µ–¥–µ–ª–∏ —Ñ–∞–∑–∞: –ú–ª–∞–¥ –≤—ä–∑—Ä–∞—Å—Ç–µ–Ω (18-30), –ó—Ä—è–ª–∞ –≤—ä–∑—Ä–∞—Å—Ç (31-50), –°—Ä–µ–¥–Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç (51-65), –ù–∞–ø—Ä–µ–¥–Ω–∞–ª–∞ –≤—ä–∑—Ä–∞—Å—Ç (65+)
   - –í–ª–∏—è–Ω–∏–µ –Ω–∞ –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º –∏ —Ö–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –ø—Ä–æ—Ñ–∏–ª

6. –î–ù–ï–í–ï–ù –í–û–î–ï–ù –î–ï–§–ò–¶–ò–¢ (Water Gap):
   - –§–æ—Ä–º—É–ª–∞: (–¢–µ–≥–ª–æ √ó ${WATER_PER_KG_MULTIPLIER}) + ${BASE_WATER_NEED_LITERS}–õ (–±–∞–∑–∏—Ä–∞–Ω –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç)
   - –ù—É–∂–¥–∞: (${data.weight} √ó ${WATER_PER_KG_MULTIPLIER}) + ${BASE_WATER_NEED_LITERS} = ${(parseFloat(data.weight) * WATER_PER_KG_MULTIPLIER + BASE_WATER_NEED_LITERS).toFixed(2)} –¥–æ ${(parseFloat(data.weight) * WATER_PER_KG_MULTIPLIER + BASE_WATER_NEED_LITERS + ACTIVITY_WATER_BONUS_LITERS).toFixed(2)} –ª–∏—Ç—Ä–∞
   - –¢–µ–∫—É—â –ø—Ä–∏–µ–º: ${data.waterIntake || '–Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'}
   - –ò–∑—á–∏—Å–ª–∏ –¥–µ—Ñ–∏—Ü–∏—Ç –∏ –≤–ª–∏—è–Ω–∏–µ –≤—ä—Ä—Ö—É –ª–∏–ø–æ–ª–∏–∑–∞—Ç–∞

8. –û–¢–†–ò–¶–ê–¢–ï–õ–ù–ò –ó–î–†–ê–í–û–°–õ–û–í–ù–ò –§–ê–ö–¢–û–†–ò (—Ç–µ–∂–µ—Å—Ç 1-3):
   - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è: ${JSON.stringify(data.medicalConditions || [])}
   - –õ–µ–∫–∞—Ä—Å—Ç–≤–∞: ${data.medications === '–î–∞' ? data.medicationsDetails : '–ù–µ –ø—Ä–∏–µ–º–∞'}
   - –û—Ü–µ–Ω–∏ –≤—Å–µ–∫–∏ —Ñ–∞–∫—Ç–æ—Ä –ø–æ —Å–∫–∞–ª–∞ 1 (–ª–µ–∫–æ) –¥–æ 3 (—Ç–µ–∂–∫–æ)

9. –ü–†–ï–ß–ï–©–ò –§–ê–ö–¢–û–†–ò –ó–ê –ü–û–°–¢–ò–ì–ê–ù–ï –ù–ê –¶–ï–õ–¢–ê (—Ç–µ–∂–µ—Å—Ç 1-3):
   - –°—Ç—Ä–µ—Å: ${data.stressLevel}
   - –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—ä–Ω—è: ${data.sleepHours}—á, –ø—Ä–µ–∫—ä—Å–≤–∞–Ω–∏—è: ${data.sleepInterrupt}
   - –ù–∞–≤–∏—Ü–∏: ${JSON.stringify(data.eatingHabits || [])}
   - –ï–º–æ—Ü–∏–æ–Ω–∞–ª–Ω–∏ —Ç—Ä–∏–≥–µ—Ä–∏: ${JSON.stringify(data.foodTriggers || [])}
   - –û—Ü–µ–Ω–∏ –≤—Å–µ–∫–∏ –ø–æ —Å–∫–∞–ª–∞ 1-3

10. –°–£–ú–ê–†–ù–ò –§–ê–ö–¢–û–†–ò:
    - –ö—ä–¥–µ—Ç–æ –∏–º–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ —Å–µ —Ñ–∞–∫—Ç–æ—Ä–∏ (–Ω–∞–ø—Ä. —Å—Ç—Ä–µ—Å + –µ–º–æ—Ü–∏–æ–Ω–∞–ª–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–µ), –°–£–ú–ò–†–ê–ô —á–∏—Å–ª–∞—Ç–∞
    - –°—ä–∑–¥–∞–π —Å—É–º–∞—Ä–µ–Ω —Ä–∏—Å–∫ –ø—Ä–æ—Ñ–∏–ª

11. –•–ò–ü–û–¢–ï–ó–ê –ó–ê –ü–°–ò–•–û–ü–†–û–§–ò–õ –ò –¢–ï–ú–ü–ï–†–ê–ú–ï–ù–¢:
    - –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞:
      * –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∏ –∂–µ–ª–∞–Ω–∏—è: ${JSON.stringify(data.foodCravings || [])}
      * –¢—Ä–∏–≥–µ—Ä–∏: ${JSON.stringify(data.foodTriggers || [])}
      * –ö–æ–ø–∏–Ω–≥ –º–µ—Ö–∞–Ω–∏–∑–º–∏: ${JSON.stringify(data.compensationMethods || [])}
      * –°–æ—Ü–∏–∞–ª–Ω–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ: ${data.socialComparison}
    - –û–ø—Ä–µ–¥–µ–ª–∏ –≤–µ—Ä–æ—è—Ç–µ–Ω —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç —Å –ø—Ä–æ—Ü–µ–Ω—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç (—Å–∞–º–æ –∞–∫–æ >${TEMPERAMENT_CONFIDENCE_THRESHOLD}%)
    - –í—ä–∑–º–æ–∂–Ω–∏ —Ç–∏–ø–æ–≤–µ: –•–æ–ª–µ—Ä–∏–∫, –°–∞–Ω–≥–≤–∏–Ω–∏–∫, –§–ª–µ–≥–º–∞—Ç–∏–∫, –ú–µ–ª–∞–Ω—Ö–æ–ª–∏–∫

11a. –†–ï–ê–ö–¢–ò–í–ù–û–°–¢ –ù–ê –ú–ï–¢–ê–ë–û–õ–ò–ó–ú–ê:
    - –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π —Å–ø—Ä—è–º–æ:
      * –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä: ${(() => { const ad = calculateUnifiedActivityScore(data); return ad.combinedScore; })()}/10
      * –§–∏–∑–∏–æ–ª–æ–≥–∏—á–Ω–∞ —Ñ–∞–∑–∞: ${data.age} –≥–æ–¥.
      * –ü—Å–∏—Ö–æ–ø—Ä–æ—Ñ–∏–ª (–æ—Ç —Ç.11)
      * –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –¥–∏–µ—Ç–∏: ${data.dietHistory}, ${data.dietType || 'N/A'}, ${data.dietResult || 'N/A'}
      * –•—Ä–æ–Ω–æ—Ç–∏–ø: ${data.chronotype}
      * –°—Ç—Ä–µ—Å: ${data.stressLevel}
    - –û–ø—Ä–µ–¥–µ–ª–∏: –ë–∞–≤–µ–Ω/–°—Ä–µ–¥–µ–Ω/–ë—ä—Ä–∑ –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º
    - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç –∫—ä–º –ø—Ä–æ–º–µ–Ω–∏: –ù–∏—Å–∫–∞/–°—Ä–µ–¥–Ω–∞/–í–∏—Å–æ–∫–∞

12. –ö–û–†–ï–ö–¶–ò–Ø –ù–ê –†–ï–ê–õ–ï–ù –ú–ï–¢–ê–ë–û–õ–ò–ó–™–ú:
    - –ö–æ—Ä–∏–≥–∏—Ä–∞–π BMR/TDEE —Å–ø–æ—Ä–µ–¥:
      * –¢–æ—á–∫–∏ 4, 5, 11, 11a
      * –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—ä–Ω: ${data.sleepHours}—á, ${data.sleepInterrupt}
      * –•—Ä–æ–Ω–æ—Ç–∏–ø: ${data.chronotype}
      * –°—Ç—Ä–µ—Å: ${data.stressLevel}
      * –ó–¥—Ä–∞–≤–µ–Ω —Å—Ç–∞—Ç—É—Å –∏ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–∏
    - –û–ø—Ä–µ–¥–µ–ª–∏ –†–ï–ê–õ–ï–ù –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º (–º–æ–∂–µ –¥–∞ –µ ¬±10-20% –æ—Ç –∏–∑—á–∏—Å–ª–µ–Ω–∏—è)

13. –ò–ó–ß–ò–°–õ–Ø–í–ê–ù–ï –ù–ê –ü–†–ï–ü–û–†–™–ß–ò–¢–ï–õ–ù–ò –ö–ê–õ–û–†–ò–ò –ò –ú–ê–ö–†–û–°–ò:
    - –ë–∞–∑–∏—Ä–∞–π –Ω–∞:
      * –ö–æ—Ä–∏–≥–∏—Ä–∞–Ω –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º (—Ç.12)
      * –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç (—Ç.11a)
      * –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç, –≤—ä–∑—Ä–∞—Å—Ç, –ø—Å–∏—Ö–æ–ø—Ä–æ—Ñ–∏–ª
      * –•—Ä–æ–Ω–æ—Ç–∏–ø –∏ –æ–ø—Ç–∏–º–∞–ª–Ω–∏ –µ–Ω–µ—Ä–≥–∏–π–Ω–∏ –ø—Ä–æ–∑–æ—Ä—Ü–∏
      * –ó–¥—Ä–∞–≤–µ–Ω —Å—Ç–∞—Ç—É—Å –∏ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–∏
    - –û–ø—Ä–µ–¥–µ–ª–∏ –§–ò–ù–ê–õ–ù–ò –ø—Ä–µ–ø–æ—Ä—ä–∫–∏

14. –ö–†–ò–¢–ò–ß–ù–ò –ü–†–û–ë–õ–ï–ú–ò (3-6 –±—Ä.):
    - –ó–∞–ø–æ—á–Ω–∏ –æ—Ç —Å—É–º–∞—Ä–Ω–∏—è —Ä–∏—Å–∫ (—Ç.10)
    - –í–∫–ª—é—á–∏ –Ω–∞–π-—Ç–µ–∂–∫–∏—Ç–µ –æ—Ç —Ç.9 –∏ —Ç.8
    - –ü—Ä–µ–¥—Å—Ç–∞–≤–∏ –≥–∏ –ø–æ –ö–†–ò–¢–ò–ß–ï–ù –ò –ü–õ–ê–®–ï–© –Ω–∞—á–∏–Ω
    - –°–ê–ú–û Borderline/Risky/Critical severity

15. –ó–î–†–ê–í–û–°–õ–û–í–ù–û –°–™–°–¢–û–Ø–ù–ò–ï –í –ú–û–ú–ï–ù–¢–ê:
    - –ë–∞–∑–∏—Ä–∞–Ω–æ –Ω–∞ —Ü–µ–ª–∏—è –∞–Ω–∞–ª–∏–∑
    - –ò–∑–≤–µ–¥–∏ —Å 10% –ó–ê–ù–ò–ñ–ï–ù–û (–ø–æ-–ø–µ—Å–∏–º–∏—Å—Ç–∏—á–Ω–∞ –æ—Ü–µ–Ω–∫–∞ –∑–∞ –º–æ—Ç–∏–≤–∞—Ü–∏—è)
    - –°–∫–∞–ª–∞: 0-100

16. –ü–†–û–ì–ù–û–ó–ê - –ü–ï–°–ò–ú–ò–°–¢–ò–ß–ù–ê (1 –≥–æ–¥–∏–Ω–∞):
    - –ê–∫–æ –∫–ª–∏–µ–Ω—Ç—ä—Ç –ü–†–û–î–™–õ–ñ–ò –ø–æ —Å—ä—â–∏—è –Ω–∞—á–∏–Ω
    - –ö–∞–∫–≤–∏ –∑–¥—Ä–∞–≤–Ω–∏ —Ä–∏—Å–∫–æ–≤–µ —â–µ —Å–µ —Ä–∞–∑–≤–∏—è—Ç
    - –ö—ä–¥–µ —â–µ –±—ä–¥–µ —Å–ª–µ–¥ 12 –º–µ—Å–µ—Ü–∞ (—Ç–µ–≥–ª–æ, –∑–¥—Ä–∞–≤–µ, –µ–Ω–µ—Ä–≥–∏—è)

17. –ü–†–û–ì–ù–û–ó–ê - –û–ü–¢–ò–ú–ò–°–¢–ò–ß–ù–ê (1 –≥–æ–¥–∏–Ω–∞):
    - –°–ª–µ–¥ –ø–æ–¥–æ–±—Ä—è–≤–∞–Ω–µ –Ω–∞ –í–°–ò–ß–ö–ò –ø—Ä–æ–±–ª–µ–º–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
    - –ö–∞–∫–≤–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è —Å–∞ –≤—ä–∑–º–æ–∂–Ω–∏
    - –ö—ä–¥–µ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ —Å–ª–µ–¥ 12 –º–µ—Å–µ—Ü–∞ (—Ç–µ–≥–ª–æ, –∑–¥—Ä–∞–≤–µ, –µ–Ω–µ—Ä–≥–∏—è)

‚ïê‚ïê‚ïê –§–û–†–ú–ê–¢ –ù–ê –û–¢–ì–û–í–û–† ‚ïê‚ïê‚ïê

{
  "bmi": —á–∏—Å–ª–æ,
  "bmiCategory": "—Ç–µ–∫—Å—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—è",
  "bmr": —á–∏—Å–ª–æ,
  "tdee": —á–∏—Å–ª–æ,
  "recommendedCalories": —á–∏—Å–ª–æ,
  "macroRatios": {
    "protein": —á–∏—Å–ª–æ –ø—Ä–æ—Ü–µ–Ω—Ç,
    "carbs": —á–∏—Å–ª–æ –ø—Ä–æ—Ü–µ–Ω—Ç,
    "fats": —á–∏—Å–ª–æ –ø—Ä–æ—Ü–µ–Ω—Ç,
    "fiber": —á–∏—Å–ª–æ –≥—Ä–∞–º–æ–≤–µ –¥–Ω–µ–≤–Ω–æ
  },
  "macroGrams": {
    "protein": —á–∏—Å–ª–æ –≥—Ä–∞–º–æ–≤–µ,
    "carbs": —á–∏—Å–ª–æ –≥—Ä–∞–º–æ–≤–µ,
    "fats": —á–∏—Å–ª–æ –≥—Ä–∞–º–æ–≤–µ
  },
  "activityLevel": "–Ω–∏–≤–æ 1-10 –∏ –æ–ø–∏—Å–∞–Ω–∏–µ",
  "physiologicalPhase": "—Ñ–∞–∑–∞ —Å–ø–æ—Ä–µ–¥ –≤—ä–∑—Ä–∞—Å—Ç –∏ –≤–ª–∏—è–Ω–∏–µ",
  "waterDeficit": {
    "dailyNeed": "–ª–∏—Ç—Ä–∏ –¥–Ω–µ–≤–Ω–æ",
    "currentIntake": "—Ç–µ–∫—É—â –ø—Ä–∏–µ–º",
    "deficit": "–¥–µ—Ñ–∏—Ü–∏—Ç –≤ –ª–∏—Ç—Ä–∏",
    "impactOnLipolysis": "–≤–ª–∏—è–Ω–∏–µ –≤—ä—Ä—Ö—É –æ—Ç—Å–ª–∞–±–≤–∞–Ω–µ—Ç–æ"
  },
  "negativeHealthFactors": [
    {
      "factor": "—Ñ–∞–∫—Ç–æ—Ä",
      "severity": —á–∏—Å–ª–æ 1-3,
      "description": "–æ–ø–∏—Å–∞–Ω–∏–µ"
    }
  ],
  "hinderingFactors": [
    {
      "factor": "—Ñ–∞–∫—Ç–æ—Ä",
      "severity": —á–∏—Å–ª–æ 1-3,
      "description": "–æ–ø–∏—Å–∞–Ω–∏–µ"
    }
  ],
  "cumulativeRiskScore": "—Å—É–º–∞ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ —Å–µ —Ñ–∞–∫—Ç–æ—Ä–∏",
  "psychoProfile": {
    "temperament": "—Ç–∏–ø (—Å–∞–º–æ –∞–∫–æ >${TEMPERAMENT_CONFIDENCE_THRESHOLD}% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç)",
    "probability": —á–∏—Å–ª–æ –ø—Ä–æ—Ü–µ–Ω—Ç
  },
  "metabolicReactivity": {
    "speed": "–ë–∞–≤–µ–Ω/–°—Ä–µ–¥–µ–Ω/–ë—ä—Ä–∑",
    "adaptability": "–ù–∏—Å–∫–∞/–°—Ä–µ–¥–Ω–∞/–í–∏—Å–æ–∫–∞"
  },
  "correctedMetabolism": {
    "realBMR": —á–∏—Å–ª–æ,
    "realTDEE": —á–∏—Å–ª–æ,
    "correction": "–æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∫–æ—Ä–µ–∫—Ü–∏—è—Ç–∞",
    "correctionPercent": "+/-X%"
  },
  "metabolicProfile": "–∞–Ω–∞–ª–∏–∑ –Ω–∞ –º–µ—Ç–∞–±–æ–ª–∏—Ç–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª",
  "healthRisks": ["—Ä–∏—Å–∫ 1", "—Ä–∏—Å–∫ 2", "—Ä–∏—Å–∫ 3"],
  "nutritionalNeeds": ["–Ω—É–∂–¥–∞ 1", "–Ω—É–∂–¥–∞ 2", "–Ω—É–∂–¥–∞ 3"],
  "psychologicalProfile": "–¥–µ—Ç–∞–π–ª–µ–Ω –∞–Ω–∞–ª–∏–∑ –Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—è –ø—Ä–æ—Ñ–∏–ª",
  "successChance": —á–∏—Å–ª–æ (-100 –¥–æ 100),
  "currentHealthStatus": {
    "score": —á–∏—Å–ª–æ 0-100 (–ó–ê–ù–ò–ñ–ï–ù–û —Å ${HEALTH_STATUS_UNDERESTIMATE_PERCENT}%),
    "description": "—Ç–µ–∫—É—â–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ",
    "keyIssues": ["–ø—Ä–æ–±–ª–µ–º 1", "–ø—Ä–æ–±–ª–µ–º 2"]
  },
  "forecastPessimistic": {
    "timeframe": "12 –º–µ—Å–µ—Ü–∞",
    "weight": "–ø—Ä–æ–≥–Ω–æ–∑–Ω–æ —Ç–µ–≥–ª–æ",
    "health": "–ø—Ä–æ–≥–Ω–æ–∑–Ω–æ –∑–¥—Ä–∞–≤–µ",
    "risks": ["—Ä–∏—Å–∫ 1", "—Ä–∏—Å–∫ 2"]
  },
  "forecastOptimistic": {
    "timeframe": "12 –º–µ—Å–µ—Ü–∞",
    "weight": "–ø—Ä–æ–≥–Ω–æ–∑–Ω–æ —Ç–µ–≥–ª–æ",
    "health": "–ø—Ä–æ–≥–Ω–æ–∑–Ω–æ –∑–¥—Ä–∞–≤–µ",
    "improvements": ["–ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ 1", "–ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ 2"]
  },
  "keyProblems": [
    {
      "title": "–∑–∞–≥–ª–∞–≤–∏–µ (–∫—Ä–∞—Ç–∫–æ)",
      "description": "–ö–†–ò–¢–ò–ß–ù–û –∏ –ü–õ–ê–®–ï–©–û –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞—â–æ –µ –ø—Ä–æ–±–ª–µ–º",
      "severity": "Borderline/Risky/Critical",
      "severityValue": —á–∏—Å–ª–æ 0-100,
      "category": "Sleep/Nutrition/Hydration/Stress/Activity/Medical",
      "impact": "–≤—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ –≤—ä—Ä—Ö—É –∑–¥—Ä–∞–≤–µ—Ç–æ –∏ —Ü–µ–ª—Ç–∞"
    }
  ]
}

–ë—ä–¥–∏ –ö–û–ù–ö–†–ï–¢–ï–ù –∑–∞ ${data.name}. –û–±—è—Å–Ω—è–≤–∞–π –ó–ê–©–û –∏ –ö–ê–ö, –Ω–µ –ø—Ä–æ—Å—Ç–æ "–¥–æ–±—ä—Ä" –∏–ª–∏ "–ª–æ—à".
–í–ê–ñ–ù–û: –ù–∞–ø—Ä–∞–≤–∏ –∞–Ω–∞–ª–∏–∑, –∫–æ–π—Ç–æ –µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏–∑–∏—Ä–∞–Ω –∏ –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ –í–°–ò–ß–ö–ò –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∏ –¥–∞–Ω–Ω–∏.
