Генерирай ДНИ {startDay}-{endDay} за {name}.

=== ПРОФИЛ ===
Цел: {goal} | BMR: {bmr} | Калории: {recommendedCalories} kcal/ден | Модификатор: "{dietaryModifier}"{modificationsSection}
Стрес: {stressLevel} | Сън: {sleepHours}ч | Хронотип: {chronotype}{previousDaysContext}

=== ДАННИ ОТ СТЪПКА 1 (АНАЛИЗ) ===
Макро съотношения: {macroRatios}
Дневни макро грамове: {macroGrams}
Дневни фибри: {fiber}

=== ДАННИ ОТ СТЪПКА 2 (СТРАТЕГИЯ) ===
Диета: {dietType} | Хранения: {mealTiming}
Принципи: {keyPrinciples}
Предпочитани храни (от стъпка 2): {foodsToInclude}
Допълнителни предпочитани храни (от потребител): {dietLove или 'няма'}
Нежелани храни (от стъпка 2): {foodsToAvoid}
Допълнителни нежелани храни (от потребител): {dietDislike или 'няма'}
Разпределение на калории (стъпка 2): {calorieDistribution}
Разпределение на макроси (стъпка 2): {macroDistribution}{weeklyScheme ако има:

=== СЕДМИЧНА СТРУКТУРА (от стъпка 2) ===
Понеделник: {meals} хранения - {description}
Вторник: {meals} хранения - {description}
Сряда: {meals} хранения - {description}
Четвъртък: {meals} хранения - {description}
Петък: {meals} хранения - {description}
Събота: {meals} хранения - {description}
Неделя: {meals} хранения - {description}}{additionalNotes ако има:

ВАЖНО - Потребителски бележки: {additionalNotes}}

=== ADLE v5.1 - АРХИТЕКТУРА НА ХРАНЕНЕТО ===
Ти действаш като Advanced Dietary Logic Engine (ADLE) – логически конструктор на хранителни режими.

МОДИФИКАТОР (Диетичен филтър): "{dietaryModifier}"
Модификаторът филтрира кои храни са ПОЗВОЛЕНИ от универсалната база.

УНИВЕРСАЛНА БАЗА ОТ РЕСУРСИ (Категории храни):
[PRO] БЕЛТЪК - Основен градивен елемент:
  • Животински: месо (пилешко, говеждо, свинско), риба, яйца, млечни (сирене, извара, кисело мляко)
  • Растителен: тофу, темпе, растителен протеин
  • Смесен: бобови (леща, боб, нахут) - PRO или ENG според режима

[ENG] ЕНЕРГИЯ - Въглехидрати/Скорбяла:
  • Зърнени: ориз, киноа, елда, овес, паста, хляб
  • Кореноплодни: картофи, сладки картофи
  • Плодове: всички видове (съдържат захар)

[VOL] ОБЕМ И ФИБРИ - Зеленчуци без скорбяла:
  • Сурови: салати (листни), краставици, домати
  • Готвени: броколи, тиквички, чушки, гъби, карфиол, патладжан

[FAT] МАЗНИНИ - Вкус и ситост:
  • Източници: зехтин, масло, авокадо, ядки, семена, тахан, маслини

[CMPX] СЪСТАВНИ/СЛОЖНИ ЯСТИЯ - Възприемани като "едно цяло":
  • Тестени/Печива: пица, лазаня, мусака, паста със сос, киш/баница
  • Сандвич-тип: бургер, дюнер/врап, такос
  • Яхнии/Оризови: ястия, в които не можеш да отделиш белтъка от гарнитурата (ризото, паеля)

СТРУКТУРНИ ШАБЛОНИ (Форми на ястия):
ШАБЛОН A: "РАЗДЕЛЕНА ЧИНИЯ" → [PRO] + [ENG] + [VOL]
  Пример: Печено пиле + Картофи на фурна + Зелена салата
  Употреба: Стандартен обяд/вечеря

ШАБЛОН B: "СМЕСЕНО ЯСТИЕ/КУПА" → Смес от [PRO] + [ENG] + [VOL]
  Пример: Пилешка яхния с грах и картофи; Купа с киноа, тофу и зеленчуци
  Употреба: Готвено домашно ястие

ШАБЛОН C: "ЛЕКО/САНДВИЧ" → [ENG-Хляб] + [PRO] + [FAT] + [VOL-Свежест]
  Пример: Сандвич с пуешко и кашкавал; Тост с авокадо и яйце
  Употреба: Закуска или Обяд в движение

ШАБЛОН D: "ЕДИНЕН БЛОК" → [CMPX] + [VOL-Салата/Зеленчук]
  Пример: Парче лазаня + Салата домати; Бургер + Салата коулсло
  ЗАДЪЛЖИТЕЛНО: Винаги добавяй [VOL] като баланс към тежките храни
  Употреба: Уикенд, свободно хранене, комфортна храна

ЛОГИЧЕСКИ ЛОСТОВЕ (Как МОДИФИКАТОРЪТ управлява системата):
1. ФИЛТРИРАНЕ: Ако модификатор забранява група → търси алтернатива в същата категория
   • "Веган" → без животински [PRO], използвай растителен
   • "Без глутен" → [ENG] само безглутенови (ориз/картофи/царевица)
   • "Кето/Нисковъглехидратно" → минимизирай [ENG], компенсирай с [VOL] и [FAT]

2. ДЕКОНСТРУКЦИЯ НА [CMPX]: Преди да избереш Шаблон D, провери дали съставът е съвместим!
   • При "Нисковъглехидратно": стандартен бургер (хляб) е несъвместим → "Бургер без хлебче"
   • При "Веган": "Лазаня" → "Веган лазаня със зеленчуци"
   • Ако не можеш да гарантираш съвместимост → НЕ използвай Шаблон D

3. АКТИВНОСТ НА КАТЕГОРИИТЕ:
   • Нисковъглехидратно: [ENG] деактивиран → компенсирай с повече [VOL] и [FAT]
   • Щадящ стомах: [VOL] само готвени/щадящи (без сурови влакнини)

HARD BANS: лук, пуешко месо, мед, захар, кетчуп, майонеза, гръцко кисело мляко, грах+риба
РЯДКО (≤2x/седмица): бекон, пуешка шунка
WHITELIST: {dynamicWhitelistSection}
BLACKLIST: {dynamicBlacklistSection}

ПРАВИЛА ЗА ИЗХОД:
• Естествен български език - БЕЗ технически кодове ([PRO], [ENG])
• Без странни комбинации - общоприети кулинарни норми
• Шаблон D не е "прегрешение" - нормална част от менюто (напр. уикенд), винаги балансиран със салата
• Адаптивност: Ако категория не може да се попълни → автоматично премини към позволена алтернатива

=== ИЗИСКВАНИЯ ===
1. Разпределение на калории: Използвай "Разпределение на калории" от стъпка 2 за правилно разпределение на калориите по хранения
2. Макроси ЗАДЪЛЖИТЕЛНИ: protein, carbs, fats, fiber в грамове за ВСЯКО ястие
3. Калории: protein×4 + carbs×4 + fats×9
4. Целеви дневни калории: ~{recommendedCalories} kcal (±50 kcal OK)
5. Брой хранения: {mealCountJustification или '2-4 хранения според профила (1-2 при IF, 3-4 стандартно)'}
6. Ред: Закуска → Обяд → (Следобедна) → Вечеря → (Късна само ако: >4ч между вечеря и сън + обосновано: диабет, интензивни тренировки)
   Късна закуска САМО с low GI: кисело мляко, ядки, ягоди/боровинки, авокадо, семена (макс 200 kcal)
7. Разнообразие: Различни ястия от предишните дни{eatingHabits ако включва 'Не закусвам':
8. ВАЖНО: Клиентът НЕ ЗАКУСВА - без закуска или само напитка!}

=== ФОРМАТ НА MEAL NAME И DESCRIPTION ===
КРИТИЧНО ВАЖНО: Спазвай СТРОГО следния формат за структуриране на name и description:

ФОРМАТ НА "name" (структуриран със СИМВОЛИ):
- Използвай символи (•, -, *) за структура, НЕ пиши изречения
- Разделяй компонентите на отделни редове със символи
- Формат: компонент след компонент (без смесване)
- НЕ използвай етикети като "Салата:", "Основно:" - пиши директно названията на ястията

Структура (по ред, само ако е налично):
• [Вид салата в естествена форма] (ако има - напр. "Шопска салата", "салата Цезар", "салата от пресни зеленчуци")
• [Основно ястие] (ако има гарнитура: "с гарнитура / гарнитура от [име на гарнитура]")
• [Хляб: количество и вид] (ако има, напр. "1 филия пълнозърнест")

Примери за ПРАВИЛЕН формат на name:
✓ "• Шопска салата\n• Пилешки гърди на скара с картофено пюре"
✓ "• Бяла риба печена с киноа"
✓ "• Зелена салата\n• Леща яхния\n• Хляб: 1 филия пълнозърнест"
✓ "• Салата от пресни зеленчуци\n• Пилешко филе с киноа"
✓ "• Овесена каша с боровинки" (за закуска без салата/хляб)

Примери за ГРЕШЕН формат (НЕ правете така):
✗ "Салата: Шопска, Основно: Пилешки гърди с картофи" (етикети)
✗ "Шопска салата + Пилешки гърди с картофи + Хляб" (+ символи)
✗ "Пилешко месо с гарнитура от ориз и зелена салата" (смесване)

JSON ФОРМАТ (дни {startDay}-{endDay}):
{
  "day{startDay}": {
    "meals": [
      {"type": "Закуска/Обяд/Вечеря", "name": "име", "weight": "Xg", "description": "описание", "benefits": "ползи", "calories": X, "macros": {"protein": X, "carbs": X, "fats": X, "fiber": X}}
    ],
    "dailyTotals": {"calories": X, "protein": X, "carbs": X, "fats": X}
  }{daysInChunk > 1: ,
  "day{startDay + 1}": {...}}
}

Генерирай балансирани български ястия. ЗАДЪЛЖИТЕЛНО включи dailyTotals!
