# üîß –û—Ç—Å—Ç—Ä–∞–Ω–µ–Ω–∏ –ì—Ä–µ—à–∫–∏ –≤ Plan2 –ü—Ä–æ–º–ø—Ç–æ–≤–µ

## üìã –†–µ–∑—é–º–µ

–ê–Ω–∞–ª–∏–∑–∏—Ä–∞—Ö –∏ –∫–æ—Ä–∏–≥–∏—Ä–∞—Ö –∫—Ä–∏—Ç–∏—á–Ω–∏ –Ω–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É –ø—Ä–æ–º–ø—Ç–æ–≤–µ—Ç–µ –≤ Plan2 —Ñ–∞–π–ª–∞ –∏ —Ä–µ–∞–ª–Ω–∏—Ç–µ backend –∏–∑—á–∏—Å–ª–µ–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–∞–Ω–∏ –≤ worker.js.

**–î–∞—Ç–∞:** 2026-02-18  
**–§–∞–π–ª:** Plan2  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ—Ä–∏–≥–∏—Ä–∞–Ω –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω —Å backend

---

## üêõ –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–∏ –ì—Ä–µ—à–∫–∏

### 1. ‚ùå –ì—Ä–µ—à–∫–∞: –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –î–µ—Ñ–∏—Ü–∏—Ç 30% –≤–º–µ—Å—Ç–æ 25%

**–ü—Ä–æ–±–ª–µ–º:**
```
Plan2 (–ø—Ä–µ–¥–∏):
- –ë–ï–ó–û–ü–ê–°–ï–ù –î–ï–§–ò–¶–ò–¢ (Issue #9): {targetCalories} kcal
  * –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: 30% ({maxDeficitCalories} kcal –º–∏–Ω–∏–º—É–º)
  * –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: {deficitPercent}%
```

**Backend —Ä–µ–∞–ª–Ω–æ—Å—Ç (worker.js):**
```javascript
const MAX_DEFICIT_PERCENT = 0.25; // 25% –º–∞–∫—Å–∏–º—É–º (—Ä–µ–¥ 465)

// –ò –≤ –ø—Ä–æ–º–ø—Ç–∞ (—Ä–µ–¥ 4296):
- –ë–ï–ó–û–ü–ê–°–ï–ù –î–ï–§–ò–¶–ò–¢ (Issue #9): ${deficitData.targetCalories} kcal
  * –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: 25% (${deficitData.maxDeficitCalories} kcal –º–∏–Ω–∏–º—É–º)
  * –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: ${deficitData.deficitPercent}%
  * AI –º–æ–∂–µ –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–Ω—Ç–µ—Ä–º–∏—Ç–µ–Ω—Ç–Ω–æ –≥–ª–∞–¥—É–≤–∞–Ω–µ –∏ –¥—Ä.)
```

**–ó–∞—â–æ –µ –≥—Ä–µ—à–∫–∞:**
- Backend –∏–∑–ø–æ–ª–∑–≤–∞ 25% –∫–∞—Ç–æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–µ–Ω –º–∞–∫—Å–∏–º—É–º
- 30% –º–æ–∂–µ –¥–∞ –¥–æ–≤–µ–¥–µ –¥–æ –∑–∞–≥—É–±–∞ –Ω–∞ –º—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞ –∏ —Ö–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –¥–∏—Å–±–∞–ª–∞–Ω—Å
- –ù–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ—Ç–æ –æ–±—ä—Ä–∫–≤–∞ AI –º–æ–¥–µ–ª–∞

**–ö–æ—Ä–µ–∫—Ü–∏—è:**
```
Plan2 (—Å–ª–µ–¥):
- –ë–ï–ó–û–ü–ê–°–ï–ù –î–ï–§–ò–¶–ò–¢ (Issue #9): {targetCalories} kcal
  * –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: 25% ({maxDeficitCalories} kcal –º–∏–Ω–∏–º—É–º)
  * –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: {deficitPercent}%
  * AI –º–æ–∂–µ –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–Ω—Ç–µ—Ä–º–∏—Ç–µ–Ω—Ç–Ω–æ –≥–ª–∞–¥—É–≤–∞–Ω–µ –∏ –¥—Ä.)
```

**–í—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ö—Ä–∏—Ç–∏—á–Ω–æ - –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤–ª–∏—è–µ –Ω–∞ –∫–∞–ª–æ—Ä–∏–π–Ω–∏—Ç–µ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ –∏ –∑–¥—Ä–∞–≤–Ω–∞—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç

---

### 2. ‚ùå –ì—Ä–µ—à–∫–∞: –ù–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞ Temperament –ü—Ä–∞–≥ (75% vs 80%)

**–ü—Ä–æ–±–ª–µ–º:**
Plan2 –∏–∑–ø–æ–ª–∑–≤–∞—à–µ —Ä–∞–∑–ª–∏—á–Ω–∏ –ø—Ä–∞–≥–æ–≤–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –º–µ—Å—Ç–∞:
- –†–µ–¥ 78 (–°—Ç—ä–ø–∫–∞ 1 - –±–∞–∑–æ–≤–∞ —Ö–∏–ø–æ—Ç–µ–∑–∞): "—Å–∞–º–æ –∞–∫–æ >75%"
- –†–µ–¥ 139 (–°—Ç—ä–ø–∫–∞ 1 - –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ): "–∞–∫–æ >80%"
- –†–µ–¥ 241 (JSON —Ñ–æ—Ä–º–∞—Ç): "—Å–∞–º–æ –∞–∫–æ >75%"
- –†–µ–¥ 387 (–°—Ç—ä–ø–∫–∞ 2): "–∞–∫–æ >75%"
- –†–µ–¥ 434 (–°—Ç—ä–ø–∫–∞ 2 JSON): "–∞–∫–æ >80%"

**Backend –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ (worker.js, —Ä–µ–¥ 100):**
```javascript
const TEMPERAMENT_CONFIDENCE_THRESHOLD = 80; // Minimum confidence % to report temperament
```

**–ó–∞—â–æ –µ –≥—Ä–µ—à–∫–∞:**
- –ù–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—ä–∑–¥–∞–≤–∞ –æ–±—ä—Ä–∫–≤–∞–Ω–µ –≤ –ª–æ–≥–∏–∫–∞—Ç–∞
- AI –Ω–µ –∑–Ω–∞–µ –∫–æ–π –ø—Ä–∞–≥ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞
- Backend —è—Å–Ω–æ –¥–µ—Ñ–∏–Ω–∏—Ä–∞ 80% –∫–∞—Ç–æ –º–∏–Ω–∏–º—É–º

**–ö–æ—Ä–µ–∫—Ü–∏—è:**
–£–Ω–∏—Ñ–∏—Ü–∏—Ä–∞—Ö –í–°–ò–ß–ö–ò —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –∫—ä–º **80%**:
- –†–µ–¥ 78: "—Å–∞–º–æ –∞–∫–æ >80% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç"
- –†–µ–¥ 241: "—Ç–∏–ø (—Å–∞–º–æ –∞–∫–æ >80% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç)"
- –†–µ–¥ 387: "–∞–∫–æ >80% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç"

**–í—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –°—Ä–µ–¥–Ω–æ - –≤–ª–∏—è–µ –Ω–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—è –ø—Ä–æ—Ñ–∏–ª

---

### 3. ‚ùå –ì—Ä–µ—à–∫–∞: –ù–µ—Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â Placeholder {sum}

**–ü—Ä–æ–±–ª–µ–º:**
```
Plan2 (–ø—Ä–µ–¥–∏):
- –°–£–ú–ê: {sum}% (–≤–∞–ª–∏–¥–∏—Ä–∞–Ω–æ = 100%)
```

**Backend —Ä–µ–∞–ª–Ω–æ—Å—Ç (worker.js, —Ä–µ–¥ 4307):**
```javascript
- –°–£–ú–ê: ${macros.protein + macros.carbs + macros.fats}% (–≤–∞–ª–∏–¥–∏—Ä–∞–Ω–æ = 100%)
```

Backend –ù–ï –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ `{sum}`. –¢–æ–π –∏–∑—á–∏—Å–ª—è–≤–∞ —Å—É–º–∞—Ç–∞ inline –∫–∞—Ç–æ –∏–∑—Ä–∞–∑.

**–ó–∞—â–æ –µ –≥—Ä–µ—à–∫–∞:**
- `{sum}` –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –≤ backend –∏–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞
- AI –Ω—è–º–∞ –¥–∞ –ø–æ–ª—É—á–∏ —Ä–µ–∞–ª–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –í–æ–¥–∏ –¥–æ –ø—Ä–∞–∑–Ω–æ –ø–æ–ª–µ –∏–ª–∏ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–ö–æ—Ä–µ–∫—Ü–∏—è:**
```
Plan2 (—Å–ª–µ–¥):
- –°–£–ú–ê: {protein + carbs + fats}% (–≤–∞–ª–∏–¥–∏—Ä–∞–Ω–æ = 100%)
```

**–í—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –°—Ä–µ–¥–Ω–æ - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–Ω–æ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

---

## ‚úÖ –ù–∞–ø—Ä–∞–≤–µ–Ω–∏ –ö–æ—Ä–µ–∫—Ü–∏–∏

### –û–±–æ–±—â–µ–Ω–∏–µ –Ω–∞ –ü—Ä–æ–º–µ–Ω–∏—Ç–µ:

| # | –ì—Ä–µ—à–∫–∞ | –ü—Ä–µ–¥–∏ | –°–ª–µ–¥ | –†–µ–¥–æ–≤–µ |
|---|--------|-------|------|--------|
| 1 | –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç | 30% | 25% | ~60 |
| 2 | Temperament –ø—Ä–∞–≥ (–±–∞–∑–æ–≤–∞ —Ö–∏–ø–æ—Ç–µ–∑–∞) | >75% | >80% | ~78 |
| 3 | Temperament –ø—Ä–∞–≥ (JSON —Å—Ç—ä–ø–∫–∞ 1) | >75% | >80% | ~241 |
| 4 | Temperament –ø—Ä–∞–≥ (—Å—Ç—ä–ø–∫–∞ 2) | >75% | >80% | ~387 |
| 5 | Sum placeholder | {sum} | {protein + carbs + fats} | ~70 |

**–û–±—â–æ –∫–æ—Ä–µ–∫—Ü–∏–∏:** 5 –∫—Ä–∏—Ç–∏—á–Ω–∏ –Ω–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

---

## üîç –î–µ—Ç–∞–π–ª–Ω–∞ –ê–Ω–∞–ª–∏–∑–∞

### –ì—Ä–µ—à–∫–∞ #1: –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –î–µ—Ñ–∏—Ü–∏—Ç

**–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–æ –æ–±—è—Å–Ω–µ–Ω–∏–µ:**
- **25% –¥–µ—Ñ–∏—Ü–∏—Ç** –µ –º–∞–∫—Å–∏–º–∞–ª–Ω–∏—è—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω –ø—Ä–∞–≥ —Å–ø–æ—Ä–µ–¥ American Dietetic Association
- **30% –¥–µ—Ñ–∏—Ü–∏—Ç** –º–æ–∂–µ –¥–∞ –ø—Ä–∏—á–∏–Ω–∏:
  - –ó–∞–≥—É–±–∞ –Ω–∞ –º—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞
  - –ó–∞–±–∞–≤—è–Ω–µ –Ω–∞ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞ (adaptive thermogenesis)
  - –•–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –¥–∏—Å–±–∞–ª–∞–Ω—Å (–Ω–∞–º–∞–ª–µ–Ω T3, –ª–µ–ø—Ç–∏–Ω)
  - –ù–∞–º–∞–ª–µ–Ω–∞ –µ–Ω–µ—Ä–≥–∏—è –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç
  - –ü–æ–≤–∏—à–µ–Ω —Ä–∏—Å–∫ –æ—Ç –Ω–µ–¥–æ—Ö—Ä–∞–Ω–≤–∞–Ω–µ

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ –æ–±—è—Å–Ω–µ–Ω–∏–µ:**
```javascript
// Backend (worker.js, —Ä–µ–¥ 465)
const MAX_DEFICIT_PERCENT = 0.25; // 25% maximum

// –ò–∑—á–∏—Å–ª–µ–Ω–∏–µ (—Ä–µ–¥ 478)
const maxDeficitCalories = Math.round(tdee * (1 - MAX_DEFICIT_PERCENT));
```

Backend –∏–∑—Ä–∏—á–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –¥–æ 25%. AI –º–æ–∂–µ –¥–∞ –ø—Ä–∏–ª–æ–∂–∏ –ø–æ-–≥–æ–ª—è–º –¥–µ—Ñ–∏—Ü–∏—Ç –≤ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏ (–Ω–∞–ø—Ä. –∏–Ω—Ç–µ—Ä–º–∏—Ç–µ–Ω—Ç–Ω–æ –≥–ª–∞–¥—É–≤–∞–Ω–µ), –Ω–æ —Ç–æ–≤–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ **–∏–∑—Ä–∏—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–æ**.

---

### –ì—Ä–µ—à–∫–∞ #2: Temperament –ü—Ä–∞–≥

**–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ –æ–±—è—Å–Ω–µ–Ω–∏–µ:**
- Temperament –µ –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏ –º–∞—Ä–∫–µ—Ä–∏ (cravings, triggers, compensation)
- –ù–∏—Å–∫–∞ —É–≤–µ—Ä–µ–Ω–æ—Å—Ç (<80%) –≤–æ–¥–∏ –¥–æ –Ω–µ—Ç–æ—á–Ω–∏ –∑–∞–∫–ª—é—á–µ–Ω–∏—è
- 80% –µ –±–∞–ª–∞–Ω—Å–∏—Ä–∞–Ω –ø—Ä–∞–≥ –º–µ–∂–¥—É –ø—Ä–µ–∫–∞–ª–µ–Ω–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–µ–Ω (90%) –∏ –ø—Ä–µ–∫–∞–ª–µ–Ω–æ –ª–∏–±–µ—Ä–∞–ª–µ–Ω (70%)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –ª–æ–≥–∏–∫–∞:**
```javascript
// Backend –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ (worker.js, —Ä–µ–¥ 100)
const TEMPERAMENT_CONFIDENCE_THRESHOLD = 80;

// –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –≤ –ø—Ä–æ–º–ø—Ç–∞ (—Ä–µ–¥ 4372)
- –û–ø—Ä–µ–¥–µ–ª–∏ –≤–µ—Ä–æ—è—Ç–µ–Ω —Ç–µ–º–ø–µ—Ä–∞–º–µ–Ω—Ç —Å –ø—Ä–æ—Ü–µ–Ω—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç (—Å–∞–º–æ –∞–∫–æ >${TEMPERAMENT_CONFIDENCE_THRESHOLD}%)
```

–ù–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ—Ç–æ –º–µ–∂–¥—É 75% –∏ 80% —Å—ä–∑–¥–∞–≤–∞ –¥–≤—É—Å–º–∏—Å–ª–∏–µ:
- AI –º–æ–∂–µ –¥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏ temperament –ø—Ä–∏ 77% —É–≤–µ—Ä–µ–Ω–æ—Å—Ç (–Ω–∞–¥ 75%)
- –ù–æ backend –æ—á–∞–∫–≤–∞ –º–∏–Ω–∏–º—É–º 80%
- –í–æ–¥–∏ –¥–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç

**–†–µ—à–µ–Ω–∏–µ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–µ –Ω–∞ **80%** –Ω–∞–≤—Å—è–∫—ä–¥–µ

---

### –ì—Ä–µ—à–∫–∞ #3: Sum Placeholder

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ –æ–±—è—Å–Ω–µ–Ω–∏–µ:**

Backend –ù–ï —Å—ä–∑–¥–∞–≤–∞ –æ—Ç–¥–µ–ª–Ω–∞ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∞ `sum`. –í–º–µ—Å—Ç–æ —Ç–æ–≤–∞, –∏–∑—á–∏—Å–ª—è–≤–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ:

```javascript
// Backend (worker.js, —Ä–µ–¥ 4307)
- –°–£–ú–ê: ${macros.protein + macros.carbs + macros.fats}% (–≤–∞–ª–∏–¥–∏—Ä–∞–Ω–æ = 100%)
```

–§—É–Ω–∫—Ü–∏—è—Ç–∞ `calculateMacronutrientRatios()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ —á–µ:
```javascript
// worker.js, —Ä–µ–¥ 445-448
const total = proteinPercent + carbsPercent + fatsPercent;
if (total !== 100) {
  fatsPercent += (100 - total); // Adjust fats to make it exactly 100
}
```

–ù–æ –≤—Ä—ä—â–∞ —Å–∞–º–æ `{protein, carbs, fats, proteinGramsPerKg}`, **–Ω–µ sum**.

**–ó–∞—â–æ –µ –ø—Ä–æ–±–ª–µ–º:**
- Placeholder —Å–µ –∑–∞–º–µ—Å—Ç–≤–∞ —Å –ø—Ä–∞–∑–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç
- AI –Ω—è–º–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –Ω–µ –≤–∏–∂–¥–∞ –¥–∞–ª–∏ —Å—É–º–∞—Ç–∞ –µ 100%

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–ø–æ–ª–∑–≤–∞–π –∏–∑—Ä–∞–∑–∞ `{protein + carbs + fats}` –∫–∞–∫—Ç–æ –ø—Ä–∞–≤–∏ backend

---

## üìä –í—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –ö–æ—Ä–µ–∫—Ü–∏–∏—Ç–µ

### –ö—Ä–∏—Ç–∏—á–Ω–∏ –ü–æ–¥–æ–±—Ä–µ–Ω–∏—è:

1. **–ó–¥—Ä–∞–≤–Ω–∞ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç** ‚úÖ
   - –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω –æ—Ç –æ–ø–∞—Å–Ω–∏ 30% –∫—ä–º –±–µ–∑–æ–ø–∞—Å–Ω–∏ 25%
   - –°—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏

2. **–õ–æ–≥–∏—á–µ—Å–∫–∞ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç** ‚úÖ
   - Temperament –ø—Ä–∞–≥ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω –Ω–∞ 80%
   - –ü—Ä–µ–º–∞—Ö–Ω–∞—Ç–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –≤ –ª–æ–≥–∏–∫–∞—Ç–∞

3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –ö–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç** ‚úÖ
   - –ü—Ä–µ–º–∞—Ö–Ω–∞—Ç –Ω–µ—Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â placeholder
   - –í—Å–∏—á–∫–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∞—Ç –Ω–∞ backend –∏–∑—Ö–æ–¥

4. **AI Model Performance** ‚úÖ
   - –ü–æ-—è—Å–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ‚Üí –ø–æ-–¥–æ–±—Ä–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
   - –ù–∞–º–∞–ª–µ–Ω–∏ –≥—Ä–µ—à–∫–∏ –æ—Ç –Ω–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

---

## üß™ –í–∞–ª–∏–¥–∞—Ü–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –°—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å Backend:

**Backend Calculations (worker.js, —Ä–µ–¥ 4264-4310):**
```javascript
const activityData = calculateUnifiedActivityScore(data);
const bmr = calculateBMR(data);
const tdee = calculateTDEE(bmr, activityData.combinedScore);
const deficitData = calculateSafeDeficit(tdee, data.goal);
const macros = calculateMacronutrientRatios(data, activityData.combinedScore, tdee);
```

**Plan2 –û—á–∞–∫–≤–∞–Ω–∏ –ü—Ä–æ–º–µ–Ω–ª–∏–≤–∏:**
- ‚úÖ `{bmr}` - –æ—Ç calculateBMR()
- ‚úÖ `{tdee}` - –æ—Ç calculateTDEE()
- ‚úÖ `{targetCalories}` - –æ—Ç deficitData.targetCalories
- ‚úÖ `{maxDeficitCalories}` - –æ—Ç deficitData.maxDeficitCalories
- ‚úÖ `{deficitPercent}` - –æ—Ç deficitData.deficitPercent
- ‚úÖ `{protein}` - –æ—Ç macros.protein
- ‚úÖ `{carbs}` - –æ—Ç macros.carbs
- ‚úÖ `{fats}` - –æ—Ç macros.fats
- ‚úÖ `{proteinGramsPerKg}` - –æ—Ç macros.proteinGramsPerKg
- ‚úÖ `{combinedScore}` - –æ—Ç activityData.combinedScore
- ‚úÖ `{activityLevel}` - –æ—Ç activityData.activityLevel
- ‚úÖ `{dailyScore}` - –æ—Ç activityData.dailyScore
- ‚úÖ `{sportDays}` - –æ—Ç activityData.sportDays

**–í—Å–∏—á–∫–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –≤–∞–ª–∏–¥–∏—Ä–∞–Ω–∏:** ‚úÖ

---

## üìù –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –ù–∞–±–ª—é–¥–µ–Ω–∏—è

### –ö–∞–∫–≤–æ –ù–ï –µ –ø—Ä–æ–º–µ–Ω–µ–Ω–æ (–∏ –∑–∞—â–æ):

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –ø—Ä–æ–º–ø—Ç–æ–≤–µ—Ç–µ** - –ó–∞–ø–∞–∑–µ–Ω–∞ –±–µ–∑ –ø—Ä–æ–º–µ–Ω–∏
   - –†–∞–±–æ—Ç–∏ –¥–æ–±—Ä–µ —Å–ø–æ—Ä–µ–¥ –æ–ø–∏—Å–∞–Ω–∏–µ—Ç–æ ("—Å –º–∞–ª–∫–∏ –≥—Ä–µ—à–∫–∏")
   - –ü—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–∞ —Å–∞–º–æ –∫–æ—Ä–µ–∫—Ü–∏–∏ –Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏

2. **ADLE v5.1 –ª–æ–≥–∏–∫–∞—Ç–∞** - –ù–µ–ø–æ–∫—ä—Ç–Ω–∞—Ç–∞
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–µ—Ç–æ –µ —Å—Ç–∞–±–∏–ª–Ω–∞
   - –°–∞–º–æ backend —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏—Ç–µ —Å–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω–∏

3. **JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ç–µ** - –ú–∏–Ω–∏–º–∞–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏
   - –°–∞–º–æ temperament –ø—Ä–∞–≥ –æ–±–Ω–æ–≤–µ–Ω
   - –û—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –ø–æ–ª–µ—Ç–∞ –±–µ–∑ –ø—Ä–æ–º–µ–Ω–∏

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –†–µ–∑—é–º–µ –Ω–∞ –ö–æ—Ä–µ–∫—Ü–∏–∏—Ç–µ:

**–ü—Ä–µ–¥–∏:**
- ‚ùå –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç 30% (–æ–ø–∞—Å–Ω–æ)
- ‚ùå Temperament –ø—Ä–∞–≥ 75%/80% (–æ–±—ä—Ä–∫–≤–∞—â–æ)
- ‚ùå Placeholder {sum} (–Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞)

**–°–ª–µ–¥:**
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç 25% (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ Temperament –ø—Ä–∞–≥ 80% (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ)
- ‚úÖ –ò–∑—Ä–∞–∑ {protein + carbs + fats} (–∫–æ—Ä–µ–∫—Ç–Ω–æ)

### –°–ª–µ–¥–≤–∞—â–∏ –°—Ç—ä–ø–∫–∏:

1. ‚úÖ –ö–æ—Ä–µ–∫—Ü–∏–∏—Ç–µ —Å–∞ –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏
2. ‚úÖ –ü—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–∞ committed
3. ‚è≥ –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–º–ø—Ç–æ–≤–µ—Ç–µ (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ)
4. ‚è≥ –ö–∞—á–≤–∞–Ω–µ –Ω–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω–∏ –ø—Ä–æ–º–ø—Ç–æ–≤–µ –≤ KV storage (–∞–∫–æ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç)

---

## üìö –°–≤—ä—Ä–∑–∞–Ω–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `BACKEND_CALCULATIONS_DOCUMENTATION_BG.md` - –ü—ä–ª–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ backend –∏–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞
- `BACKEND_CALCULATIONS_VERIFICATION_BG.md` - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è—Ç–∞
- `worker.js` (—Ä–µ–¥–æ–≤–µ 244-486, 4264-4310) - Backend calculation functions

---

**–î–∞—Ç–∞:** 2026-02-18  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–™–†–®–ï–ù–û - Plan2 –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–∞–Ω —Å backend  
**–í–µ—Ä—Å–∏—è:** 1.0
