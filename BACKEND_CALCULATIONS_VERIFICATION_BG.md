# ‚úÖ –ü–û–¢–í–™–†–ñ–î–ï–ù–ò–ï: Backend –†–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏ –ò–∑—á–∏—Å–ª–µ–Ω–∏—è

## üìã –†–µ–∑—é–º–µ –Ω–∞ –ó–∞–¥–∞—á–∞—Ç–∞

**–í—ä–ø—Ä–æ—Å:** –°–ø—Ä—è–º–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏—Ç–µ –¥–∞–Ω–Ω–∏, –∫–æ–∏ –±–∞–∑–æ–≤–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤ backend –∏ —Å–µ –ø–æ–¥–∞–≤–∞—Ç –∫—ä–º AI –º–æ–¥–µ–ª–∞?

**–û—Ç–≥–æ–≤–æ—Ä:** ‚úÖ **–í–°–ò–ß–ö–ò** –±–∞–∑–æ–≤–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤ backend –∏ —Å–µ –ø–æ–¥–∞–≤–∞—Ç –∫—ä–º AI –≤ –°—Ç—ä–ø–∫–∞ 1 (Analysis).

---

## ‚úÖ –ü–æ—Ç–≤—ä—Ä–¥–µ–Ω–∏ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –ò–∑—á–∏—Å–ª–µ–Ω–∏—è

### 1. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç –°–∫–æ—Ä (Issue #7)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–∑—á–∏—Å–ª—è–≤–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
**–§—É–Ω–∫—Ü–∏—è:** `calculateUnifiedActivityScore(data)`  
**–õ–æ–∫–∞—Ü–∏—è:** `worker.js`, —Ä–µ–¥–æ–≤–µ 284-320  

**–§–æ—Ä–º—É–ª–∞:**
```
–∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω —Å–∫–æ—Ä = –¥–Ω–µ–≤–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç (1-3) + —Å–ø–æ—Ä—Ç–Ω–∏ –¥–Ω–∏ (0-7) ‚Üí —Å–∫–∞–ª–∞ 1-10
```

**–ö–∞–∫–≤–æ —Å–µ –ø–æ–¥–∞–≤–∞ –∫—ä–º AI:**
```
–£–ù–ò–§–ò–¶–ò–†–ê–ù –ê–ö–¢–ò–í–ù–û–°–¢ –°–ö–û–† (Issue #7):
- –î–Ω–µ–≤–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç: {dailyActivityLevel} ‚Üí {dailyScore}/3
- –°–ø–æ—Ä—Ç–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç: {sportActivity} ‚Üí ~{sportDays} –¥–Ω–∏
- –ö–û–ú–ë–ò–ù–ò–†–ê–ù –°–ö–û–†: {combinedScore}/10 ({activityLevel})
- –§–æ—Ä–º—É–ª–∞: –¥–Ω–µ–≤–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç (1-3) + —Å–ø–æ—Ä—Ç–Ω–∏ –¥–Ω–∏ ‚Üí —Å–∫–∞–ª–∞ 1-10
```

**–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω, —Ç–µ—Å—Ç–≤–∞–Ω —Å –ø—Ä–∏–º–µ—Ä–Ω–∏ –¥–∞–Ω–Ω–∏

---

### 2. ‚úÖ BMR - –ë–∞–∑–∞–ª–µ–Ω –ú–µ—Ç–∞–±–æ–ª–∏—Ç–µ–Ω –†–∏—Ç—ä–º

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–∑—á–∏—Å–ª—è–≤–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
**–§—É–Ω–∫—Ü–∏—è:** `calculateBMR(data)`  
**–õ–æ–∫–∞—Ü–∏—è:** `worker.js`, —Ä–µ–¥–æ–≤–µ 244-268  

**–§–æ—Ä–º—É–ª–∏:**
- **–ú—ä–∂:** `BMR = 10√ó{weight} + 6.25√ó{height} - 5√ó{age} + 5`
- **–ñ–µ–Ω–∞:** `BMR = 10√ó{weight} + 6.25√ó{height} - 5√ó{age} - 161`

**–ö–∞–∫–≤–æ —Å–µ –ø–æ–¥–∞–≤–∞ –∫—ä–º AI:**
```
- BMR (Mifflin-St Jeor): {bmr} kcal
  * –ú—ä–∂: 10√ó{weight} + 6.25√ó{height} - 5√ó{age} + 5
  * –ñ–µ–Ω–∞: 10√ó{weight} + 6.25√ó{height} - 5√ó{age} - 161
```

**–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ Mifflin-St Jeor —Ñ–æ—Ä–º—É–ª–∞—Ç–∞ (–∑–ª–∞—Ç–µ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç)

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç:**
```
–ú—ä–∂, 35 –≥–æ–¥., 85 kg, 180 cm
BMR = 10√ó85 + 6.25√ó180 - 5√ó35 + 5 = 1805 kcal ‚úì
```

---

### 3. ‚úÖ TDEE - –û–±—â –î–Ω–µ–≤–µ–Ω –ï–Ω–µ—Ä–≥–∏–µ–Ω –†–∞–∑—Ö–æ–¥ (Issue #10)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–∑—á–∏—Å–ª—è–≤–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
**–§—É–Ω–∫—Ü–∏—è:** `calculateTDEE(bmr, activityLevel)`  
**–õ–æ–∫–∞—Ü–∏—è:** `worker.js`, —Ä–µ–¥–æ–≤–µ 330-363  

**–§–æ—Ä–º—É–ª–∞:**
```
TDEE = BMR √ó {activityFactor}
```

**–ú–Ω–æ–∂–∏—Ç–µ–ª–∏ (1-10 —Å–∫–∞–ª–∞):**
```
–°–∫–æ—Ä 1:  √ó 1.20  |  –°–∫–æ—Ä 6:  √ó 1.60
–°–∫–æ—Ä 2:  √ó 1.30  |  –°–∫–æ—Ä 7:  √ó 1.675
–°–∫–æ—Ä 3:  √ó 1.375 |  –°–∫–æ—Ä 8:  √ó 1.75
–°–∫–æ—Ä 4:  √ó 1.45  |  –°–∫–æ—Ä 9:  √ó 1.85
–°–∫–æ—Ä 5:  √ó 1.525 |  –°–∫–æ—Ä 10: √ó 1.95
```

**–ö–∞–∫–≤–æ —Å–µ –ø–æ–¥–∞–≤–∞ –∫—ä–º AI:**
```
- TDEE (Issue #10): {tdee} kcal
  * BMR √ó {activityFactor} (—Ñ–∞–∫—Ç–æ—Ä –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä {combinedScore})
  * –ù–æ–≤ –º–Ω–æ–∂–∏—Ç–µ–ª –±–∞–∑–∏—Ä–∞–Ω –Ω–∞ 1-10 —Å–∫–∞–ª–∞ (–Ω–µ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏)
```

**–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ò–∑–ø–æ–ª–∑–≤–∞ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä (Issue #7)

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç:**
```
BMR: 1805 kcal, Activity Score: 5
TDEE = 1805 √ó 1.525 = 2753 kcal ‚úì
```

---

### 4. ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω –ö–∞–ª–æ—Ä–∏–µ–Ω –î–µ—Ñ–∏—Ü–∏—Ç (Issue #9)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–∑—á–∏—Å–ª—è–≤–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
**–§—É–Ω–∫—Ü–∏—è:** `calculateSafeDeficit(tdee, goal)`  
**–õ–æ–∫–∞—Ü–∏—è:** `worker.js`, —Ä–µ–¥–æ–≤–µ 464-486  

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏:**
- **–ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç:** 25% (–º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–µ–Ω –ª–∏–º–∏—Ç)
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç:** 18% (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–µ–Ω –ø–æ–¥—Ö–æ–¥)

**–§–æ—Ä–º—É–ª–∏:**
```
targetCalories = TDEE √ó 0.82  (18% –¥–µ—Ñ–∏—Ü–∏—Ç)
maxDeficitCalories = TDEE √ó 0.75  (25% –º–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç)
```

**–ö–∞–∫–≤–æ —Å–µ –ø–æ–¥–∞–≤–∞ –∫—ä–º AI:**
```
- –ë–ï–ó–û–ü–ê–°–ï–ù –î–ï–§–ò–¶–ò–¢ (Issue #9): {targetCalories} kcal
  * –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: 25% ({maxDeficitCalories} kcal –º–∏–Ω–∏–º—É–º)
  * –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç: {deficitPercent}%
  * AI –º–æ–∂–µ –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏–Ω—Ç–µ—Ä–º–∏—Ç–µ–Ω—Ç–Ω–æ –≥–ª–∞–¥—É–≤–∞–Ω–µ –∏ –¥—Ä.)
```

**–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ 25% (–Ω–µ 30% - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –ø–æ-–±–µ–∑–æ–ø–∞—Å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç:**
```
TDEE: 2753 kcal, –¶–µ–ª: –û—Ç—Å–ª–∞–±–≤–∞–Ω–µ
targetCalories = 2753 √ó 0.82 = 2257 kcal (18% –¥–µ—Ñ–∏—Ü–∏—Ç) ‚úì
maxDeficitCalories = 2753 √ó 0.75 = 2065 kcal (25% –º–∞–∫—Å) ‚úì
```

**–ó–∞—â–æ 25%, –∞ –Ω–µ 30%?**
- 25% –µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–µ–Ω –º–∞–∫—Å–∏–º—É–º
- 30% –º–æ–∂–µ –¥–∞ –¥–æ–≤–µ–¥–µ –¥–æ –∑–∞–≥—É–±–∞ –Ω–∞ –º—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞, —Ö–æ—Ä–º–æ–Ω–∞–ª–µ–Ω –¥–∏—Å–±–∞–ª–∞–Ω—Å
- AI –º–æ–∂–µ –¥–∞ –ø—Ä–∏–ª–æ–∂–∏ >25% –≤ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏, –Ω–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–æ

---

### 5. ‚úÖ –ë–∞–∑–æ–≤–∏ –ú–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–Ω–∏ –°—ä–æ—Ç–Ω–æ—à–µ–Ω–∏—è (Issue #2, #28)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–∑—á–∏—Å–ª—è–≤–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ  
**–§—É–Ω–∫—Ü–∏—è:** `calculateMacronutrientRatios(data, activityScore, tdee)`  
**–õ–æ–∫–∞—Ü–∏—è:** `worker.js`, —Ä–µ–¥–æ–≤–µ 393-456  

**–ê–ª–≥–æ—Ä–∏—Ç—ä–º:**
1. –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –ø—Ä–æ—Ç–µ–∏–Ω–æ–≤–∏ –Ω—É–∂–¥–∏ (g/kg) —Å–ø–æ—Ä–µ–¥ –ø–æ–ª –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç
2. –ö–æ—Ä–µ–∫—Ü–∏—è —Å–ø–æ—Ä–µ–¥ —Ü–µ–ª (–º—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞ +20%, –æ—Ç—Å–ª–∞–±–≤–∞–Ω–µ +10%)
3. –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ç–µ–∏–Ω–æ–≤–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∏ (–≥—Ä–∞–º–æ–≤–µ √ó 4 cal/g)
4. –†–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∏ (carbs/fats —Å–ø–æ—Ä–µ–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç)
5. **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–æ—á–Ω–æ 100% —Å—É–º–∞**

**–§–æ—Ä–º—É–ª–∏:**

**–ü—Ä–æ—Ç–µ–∏–Ω (g/kg):**
```
–ú—ä–∂:  activityScore >= 7 ? 2.0 g/kg
      activityScore >= 5 ? 1.6 g/kg
                           1.2 g/kg

–ñ–µ–Ω–∞: activityScore >= 7 ? 1.8 g/kg
      activityScore >= 5 ? 1.4 g/kg
                           1.0 g/kg

–ö–æ—Ä–µ–∫—Ü–∏—è:
  –ú—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞: √ó 1.2
  –û—Ç—Å–ª–∞–±–≤–∞–Ω–µ:    √ó 1.1
```

**–†–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
```
proteinPercent = (–ø—Ä–æ—Ç–µ–∏–Ω_g √ó 4) / TDEE √ó 100
remainingPercent = 100 - proteinPercent

activityScore >= 7: carbs 60%, fats 40% –æ—Ç –æ—Å—Ç–∞–Ω–∞–ª–æ—Ç–æ
activityScore >= 4: carbs 50%, fats 50% –æ—Ç –æ—Å—Ç–∞–Ω–∞–ª–æ—Ç–æ
activityScore < 4:  carbs 40%, fats 60% –æ—Ç –æ—Å—Ç–∞–Ω–∞–ª–æ—Ç–æ
```

**–ö–∞–∫–≤–æ —Å–µ –ø–æ–¥–∞–≤–∞ –∫—ä–º AI:**
```
–ë–ê–ó–û–í–ò –ú–ê–ö–†–û–ù–£–¢–†–ò–ï–ù–¢–ò (Issue #2, #28 - –ù–ï —Ü–∏—Ä–∫—É–ª—è—Ä–Ω–∞ –ª–æ–≥–∏–∫–∞):
- –ü—Ä–æ—Ç–µ–∏–Ω: {protein}% ({proteinGramsPerKg}g/kg –∑–∞ {gender})
  * {gender === '–ú—ä–∂' ? '–ú—ä–∂–µ –∏–º–∞—Ç –ø–æ-–≤–∏—Å–æ–∫–∏' : '–ñ–µ–Ω–∏ –∏–º–∞—Ç –ø–æ-–Ω–∏—Å–∫–∏'} –Ω—É–∂–¥–∏ –æ—Ç –ø—Ä–æ—Ç–µ–∏–Ω
  * –ö–æ—Ä–∏–≥–∏—Ä–∞–Ω–æ —Å–ø–æ—Ä–µ–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä {combinedScore}
- –í—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏: {carbs}%
- –ú–∞–∑–Ω–∏–Ω–∏: {fats}%
- –°–£–ú–ê: {protein + carbs + fats}% (–≤–∞–ª–∏–¥–∏—Ä–∞–Ω–æ = 100%)
- –§–æ—Ä–º—É–ª–∞: –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–∏—Ä–∞–Ω–æ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –∏ —Ü–µ–ª
```

**–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:** ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞ —Ç–æ—á–Ω–æ 100%, –ù–ï –µ —Ü–∏—Ä–∫—É–ª—è—Ä–Ω–∞ –ª–æ–≥–∏–∫–∞

**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç:**
```
–ú—ä–∂, 85 kg, Activity: 5, TDEE: 2753 kcal, –¶–µ–ª: –û—Ç—Å–ª–∞–±–≤–∞–Ω–µ

–ü—Ä–æ—Ç–µ–∏–Ω: 1.6 √ó 1.1 = 1.76 ‚Üí 1.8 g/kg
–ì—Ä–∞–º–æ–≤–µ: 85 √ó 1.8 = 153 g
–ö–∞–ª–æ—Ä–∏–∏: 153 √ó 4 = 612 kcal
–ü—Ä–æ—Ü–µ–Ω—Ç: 612 / 2753 √ó 100 = 22%

–û—Å—Ç–∞–Ω–∞–ª–∏: 100 - 22 = 78%
Carbs: 78 √ó 0.5 = 39% (—Å—Ä–µ–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç)
Fats: 78 √ó 0.5 = 39%

–ü—Ä–æ–≤–µ—Ä–∫–∞: 22 + 39 + 39 = 100% ‚úì
```

---

## üîÑ –ü–æ—Ç–æ–∫ –Ω–∞ –î–∞–Ω–Ω–∏ (–ü–æ—Ç–≤—ä—Ä–¥–µ–Ω)

### –°—Ç—ä–ø–∫–∞ 1: Backend –ò–∑—á–∏—Å–ª–µ–Ω–∏—è

```javascript
// worker.js, —Ä–µ–¥–æ–≤–µ 4264-4310 (–≤ generateAnalysisPrompt)

const activityData = calculateUnifiedActivityScore(data);      // ‚úì
const bmr = calculateBMR(data);                                 // ‚úì
const tdee = calculateTDEE(bmr, activityData.combinedScore);   // ‚úì
const deficitData = calculateSafeDeficit(tdee, data.goal);     // ‚úì
const macros = calculateMacronutrientRatios(                   // ‚úì
  data, 
  activityData.combinedScore, 
  tdee
);
```

### –°—Ç—ä–ø–∫–∞ 2: –§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –∑–∞ AI

Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞ –≤ —Å–µ–∫—Ü–∏—è:
```
‚ïê‚ïê‚ïê BACKEND –†–ï–§–ï–†–ï–ù–¢–ù–ò –ò–ó–ß–ò–°–õ–ï–ù–ò–Ø (Issues #2, #7, #9, #10, #28 - Feb 2026) ‚ïê‚ïê‚ïê
```

**–ü–æ—Ç–≤—ä—Ä–¥–µ–Ω–æ:** ‚úÖ –°–µ–∫—Ü–∏—è—Ç–∞ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞ –¥–∏–Ω–∞–º–∏—á–Ω–æ —Å —Ä–µ–∞–ª–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏

### –°—Ç—ä–ø–∫–∞ 3: AI –ü–æ–ª—É—á–∞–≤–∞ –î–∞–Ω–Ω–∏—Ç–µ

AI –º–æ–¥–µ–ª–∞ –ø–æ–ª—É—á–∞–≤–∞ –≤ `generateAnalysisPrompt()`:
1. ‚úÖ –ü—ä–ª–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏
2. ‚úÖ Backend —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è (–≤—Å–∏—á–∫–∏ 5)
3. ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ —Ö–æ–ª–∏—Å—Ç–∏—á–µ–Ω –∞–Ω–∞–ª–∏–∑

### –°—Ç—ä–ø–∫–∞ 4: AI –ê–Ω–∞–ª–∏–∑–∏—Ä–∞ –∏ –ö–æ—Ä–∏–≥–∏—Ä–∞

AI –∏–∑–ø–æ–ª–∑–≤–∞ backend —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ –∫–∞—Ç–æ:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–Ω–∞ —Ç–æ—á–∫–∞ –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ë–∞–∑–æ–≤–∞ –ª–∏–Ω–∏—è –∑–∞ –∫–æ—Ä–µ–∫—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç

AI –º–æ–∂–µ –¥–∞ –∫–æ—Ä–∏–≥–∏—Ä–∞ —Å–ø–æ—Ä–µ–¥:
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —Å—ä—Å—Ç–æ—è–Ω–∏—è
- –ú–µ–¥–∏–∫–∞–º–µ–Ω—Ç–∏
- –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—ä–Ω—è
- –°—Ç—Ä–µ—Å –Ω–∏–≤–∞
- –•—Ä–æ–Ω–æ—Ç–∏–ø
- –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –¥–∏–µ—Ç–∏
- –ú–µ—Ç–∞–±–æ–ª–∏—Ç–Ω–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç
- –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ñ–∏–ª

---

## üìä –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è—Ç–∞

### –ò–∑–∏—Å–∫–≤–∞–Ω–µ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ –≤ backend

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–ó–ü–™–õ–ù–ï–ù–û

–í—Å–∏—á–∫–∏ 5 –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä
- ‚úÖ BMR (Mifflin-St Jeor)
- ‚úÖ TDEE (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω —Å–∫–æ—Ä)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç (–º–∞–∫—Å 25%)
- ‚úÖ –ë–∞–∑–æ–≤–∏ –º–∞–∫—Ä–æ —Å—ä–æ—Ç–Ω–æ—à–µ–Ω–∏—è

### –ò–∑–∏—Å–∫–≤–∞–Ω–µ 2: –ü–æ–¥–∞–≤–∞–Ω–µ –∫—ä–º AI –º–æ–¥–µ–ª–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–ó–ü–™–õ–ù–ï–ù–û

–í—Å–∏—á–∫–∏ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è —Å–µ –ø–æ–¥–∞–≤–∞—Ç –∫—ä–º AI –≤ –°—Ç—ä–ø–∫–∞ 1 (Analysis):
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–∏ –≤ —á–µ—Ç–∏–º —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ –° –ø–æ–∫–∞–∑–∞–Ω–∏ —Ñ–æ—Ä–º—É–ª–∏ –∏ –æ–±—è—Å–Ω–µ–Ω–∏—è
- ‚úÖ –° —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –∫—ä–º Issues (#2, #7, #9, #10, #28)

### –ò–∑–∏—Å–∫–≤–∞–Ω–µ 3: –ü—Ä–µ—Ü–∏–∑–Ω–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏ —Ñ–æ—Ä–º—É–ª–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–ó–ü–™–õ–ù–ï–ù–û

–í—Å–∏—á–∫–∏ —Ñ–æ—Ä–º—É–ª–∏ —Å–∞:
- ‚úÖ –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –≤–∞–ª–∏–¥–Ω–∏ (Mifflin-St Jeor –∑–∞ BMR)
- ‚úÖ –ë–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ –Ω–∞—É—á–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Å–ø–æ—Ä–µ–¥ –ø–æ–ª, –≤—ä–∑—Ä–∞—Å—Ç, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç, —Ü–µ–ª
- ‚úÖ –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è (–Ω–∞–ø—Ä. –º–∞–∫—Ä–æ—Å–∏ = 100%)

### –ò–∑–∏—Å–∫–≤–∞–Ω–µ 4: –ù–ï —Ü–∏—Ä–∫—É–ª—è—Ä–Ω–∞ –ª–æ–≥–∏–∫–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–ó–ü–™–õ–ù–ï–ù–û

Backend –∏–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞:
- ‚úÖ –ù–ï –∏–∑–ø–æ–ª–∑–≤–∞—Ç AI —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- ‚úÖ –ë–∞–∑–∏—Ä–∞–Ω–∏ —Å–∞–º–æ –Ω–∞ –≤—Ö–æ–¥–Ω–∏ –¥–∞–Ω–Ω–∏
- ‚úÖ AI –ø–æ–ª—É—á–∞–≤–∞ backend —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∫–∞—Ç–æ –†–ï–§–ï–†–ï–ù–¶–ò–Ø
- ‚úÖ AI –ø—Ä–∞–≤–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ —Ö–æ–ª–∏—Å—Ç–∏—á–Ω–∞ –∫–æ—Ä–µ–∫—Ü–∏—è

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°—ä–∑–¥–∞–¥–µ–Ω–∞ –µ –ø—ä–ª–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

### 1. BACKEND_CALCULATIONS_DOCUMENTATION_BG.md
**–†–∞–∑–º–µ—Ä:** 13.6 KB  
**–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:**
- –ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –≤—Å–∏—á–∫–∏ 5 –∏–∑—á–∏—Å–ª–µ–Ω–∏—è
- –§–æ—Ä–º—É–ª–∏ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∏
- –ü—Ä–∏–º–µ—Ä–∏ —Å —Ä–µ–∞–ª–Ω–∏ –¥–∞–Ω–Ω–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü–æ—Ç–æ–∫ –Ω–∞ –¥–∞–Ω–Ω–∏
- FAQ

### 2. BACKEND_CALCULATIONS_QUICK_REFERENCE_BG.md
**–†–∞–∑–º–µ—Ä:** 6.6 KB  
**–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ:**
- –ë—ä—Ä–∑–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –Ω–∞ —Ñ–æ—Ä–º—É–ª–∏—Ç–µ
- –ü—Ä–∏–º–µ—Ä–Ω–∏ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è
- –¢–∞–±–ª–∏—Ü–∏ —Å –º–Ω–æ–∂–∏—Ç–µ–ª–∏
- –ö—Ä–∞—Ç–∫–∏ –æ—Ç–≥–æ–≤–æ—Ä–∏ –Ω–∞ —á–µ—Å—Ç–æ –∑–∞–¥–∞–≤–∞–Ω–∏ –≤—ä–ø—Ä–æ—Å–∏

---

## üß™ –¢–µ—Å—Ç–æ–≤–µ

–ü—Ä–æ–≤–µ–¥–µ–Ω–∏ —Å–∞ —Ä—ä—á–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ —Å –ø—Ä–∏–º–µ—Ä–Ω–∏ –¥–∞–Ω–Ω–∏:

**–¢–µ—Å—Ç –¥–∞–Ω–Ω–∏:**
```javascript
{
  name: 'Test User',
  age: 35,
  gender: '–ú—ä–∂',
  height: 180,
  weight: 85,
  goal: '–û—Ç—Å–ª–∞–±–≤–∞–Ω–µ',
  dailyActivityLevel: '–°—Ä–µ–¥–Ω–æ',
  sportActivity: '–°—Ä–µ–¥–Ω–∞ (2‚Äì4 –¥–Ω–∏ —Å–µ–¥–º–∏—á–Ω–æ)'
}
```

**–†–µ–∑—É–ª—Ç–∞—Ç–∏:**
```
‚úì Activity Score: 5/10 (–°—Ä–µ–¥–Ω–∞)
‚úì BMR: 1805 kcal
‚úì TDEE: 2753 kcal
‚úì Target Calories: 2257 kcal (18% –¥–µ—Ñ–∏—Ü–∏—Ç)
‚úì Max Deficit: 2065 kcal (25% –º–∞–∫—Å)
‚úì Macros: 22% protein (1.8 g/kg), 39% carbs, 39% fats
‚úì Sum: 100%
```

**–í—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ:** ‚úÖ –£–°–ü–ï–®–ù–ò

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ò–ß–ö–û –ï –í–ï–ß–ï –ò–ú–ü–õ–ï–ú–ï–ù–¢–ò–†–ê–ù–û**

Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞ –∏ –ø–æ–¥–∞–≤–∞ –∫—ä–º AI –º–æ–¥–µ–ª–∞:
1. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–∞–Ω –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç —Å–∫–æ—Ä (Issue #7)
2. ‚úÖ BMR - Mifflin-St Jeor —Ñ–æ—Ä–º—É–ª–∞
3. ‚úÖ TDEE - –±–∞–∑–∏—Ä–∞–Ω–æ –Ω–∞ 1-10 —Å–∫–∞–ª–∞ (Issue #10)
4. ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω –∫–∞–ª–æ—Ä–∏–µ–Ω –¥–µ—Ñ–∏—Ü–∏—Ç - –º–∞–∫—Å 25% (Issue #9)
5. ‚úÖ –ë–∞–∑–æ–≤–∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–Ω–∏ —Å—ä–æ—Ç–Ω–æ—à–µ–Ω–∏—è (Issue #2, #28)

### –ü—Ä–æ–º–µ–Ω–∏ –ù–∞–ø—Ä–∞–≤–µ–Ω–∏

1. ‚úÖ –û–±–Ω–æ–≤–µ–Ω –∫–æ–º–µ–Ω—Ç–∞—Ä –≤ `generateAnalysisPrompt()` –∑–∞ —è—Å–Ω–æ—Ç–∞
2. ‚úÖ –°—ä–∑–¥–∞–¥–µ–Ω–∞ –ø—ä–ª–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (2 —Ñ–∞–π–ª–∞)
3. ‚úÖ –ü—Ä–æ–≤–µ–¥–µ–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ –∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ù—è–º–∞ –ù—É–∂–¥–∞ –æ—Ç –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –ü—Ä–æ–º–µ–Ω–∏

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –≤–µ—á–µ —Ä–∞–±–æ—Ç–∏ —Å–ø–æ—Ä–µ–¥ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ç–∞:
- Backend –∏–∑—á–∏—Å–ª—è–≤–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ ‚úì
- AI –ø–æ–ª—É—á–∞–≤–∞ —Ç–µ–∑–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –≤ –°—Ç—ä–ø–∫–∞ 1 ‚úì
- –§–æ—Ä–º—É–ª–∏—Ç–µ —Å–∞ –ø—Ä–µ—Ü–∏–∑–Ω–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏ ‚úì
- –ù—è–º–∞ —Ü–∏—Ä–∫—É–ª—è—Ä–Ω–∞ –ª–æ–≥–∏–∫–∞ ‚úì

---

## üìö –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ö—ä–¥–µ –¥–∞ –ù–∞–º–µ—Ä–∏—Ç–µ –ö–æ–¥–∞

**–§–∞–π–ª:** `worker.js`

**–§—É–Ω–∫—Ü–∏–∏:**
- `calculateUnifiedActivityScore()` - —Ä–µ–¥ 284-320
- `calculateBMR()` - —Ä–µ–¥ 244-268
- `calculateTDEE()` - —Ä–µ–¥ 330-363
- `calculateSafeDeficit()` - —Ä–µ–¥ 464-486
- `calculateMacronutrientRatios()` - —Ä–µ–¥ 393-456

**–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ:**
- `generateAnalysisPrompt()` - —Ä–µ–¥ 4061-4518
- Backend –∏–∑—á–∏—Å–ª–µ–Ω–∏—è - —Ä–µ–¥ 4264-4310

### –ö–∞–∫ –¥–∞ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–∞—Ç–µ

1. –û—Ç–≤–æ—Ä–µ—Ç–µ `worker.js`
2. –ù–∞–º–µ—Ä–µ—Ç–µ —Ä–µ–¥ 4264
3. –í–∏–∂—Ç–µ —Å–µ–∫—Ü–∏—è—Ç–∞ "BACKEND –†–ï–§–ï–†–ï–ù–¢–ù–ò –ò–ó–ß–ò–°–õ–ï–ù–ò–Ø"
4. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —á–µ –≤—Å–∏—á–∫–∏ 5 –∏–∑—á–∏—Å–ª–µ–Ω–∏—è —Å–µ –ø—Ä–∞–≤—è—Ç

### –ö–∞–∫ –¥–∞ –¢–µ—Å—Ç–≤–∞—Ç–µ

```javascript
// –°—ä–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç –¥–∞–Ω–Ω–∏
const testData = { /* ... */ };

// –ò–∑–≤–∏–∫–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ
const activity = calculateUnifiedActivityScore(testData);
const bmr = calculateBMR(testData);
const tdee = calculateTDEE(bmr, activity.combinedScore);
const deficit = calculateSafeDeficit(tdee, testData.goal);
const macros = calculateMacronutrientRatios(testData, activity.combinedScore, tdee);

// –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
console.log('Activity:', activity);
console.log('BMR:', bmr);
console.log('TDEE:', tdee);
console.log('Deficit:', deficit);
console.log('Macros:', macros);
```

---

**–î–∞—Ç–∞:** 2026-02-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–¢–í–™–†–î–ï–ù–û - –í—Å–∏—á–∫–æ —Ä–∞–±–æ—Ç–∏ —Å–ø–æ—Ä–µ–¥ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ç–∞  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–í–µ—Ä—Å–∏—è:** 1.0

**–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:** –ù–µ —Å–∞ –Ω—É–∂–Ω–∏ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏. –°–∏—Å—Ç–µ–º–∞—Ç–∞ –≤–µ—á–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞ –∏ –ø–æ–¥–∞–≤–∞ –≤—Å–∏—á–∫–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ç–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∫—ä–º AI –º–æ–¥–µ–ª–∞ –≤ –°—Ç—ä–ø–∫–∞ 1.
