# –†–ï–®–ï–ù–ò–ï: Async –ü—Ä–æ–±–ª–µ–º–∏ —Å –ò–∑–≤–µ—Å—Ç–∏—è - 17 –§–µ–≤—Ä—É–∞—Ä–∏ 2026

## –ü—Ä–æ–±–ª–µ–º—ä—Ç (–æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è)

"–û–¢–ù–û–í–û:–æ—Ç–Ω–æ–≤–æ –ø–æ–ª—É—á–∞–≤–∞–º –ø—Ä–∞–∑–Ω–æ –Ω–∞–ø–æ–º–Ω—è–Ω–µ –±–µ–∑ —Ç–µ–∫—Å—Ç –≤—ä—Ç—Ä–µ –ø—Ä–∏ '–ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ AI –ê—Å–∏—Å—Ç–µ–Ω—Ç –°—ä–æ–±—â–µ–Ω–∏—è' –Ω—è–∫—ä–¥–µ –∏–º–∞—à –≥—Ä–µ—à–∫–∞. —Ç–æ–≤–∞ —Ç—Ä—è–±–≤–∞—à–µ –¥–∞ –µ –æ—Ç–¥–∞–≤–Ω–∞ –æ–ø—Ä–∞–≤–µ–Ω–æ!!!!!!!!!!!!! –ø—Ä–µ–≥–ª–µ–¥–∞–π –∫–∞–∫–≤–æ —Å–∏ –ø—Ä–∞–≤–∏–ª –≤–µ—á–µ –ø–æ –≤—ä–ø—Ä–æ—Å–∞, –ø–æ–ø—Ä–≤–∏ –∏–ª–∏ –∏–∑—Ç—Ä–∏–π, –Ω–æ –Ω–µ –Ω–∞–¥–≥—Ä–∞–∂–¥–∞–π –∏–∑–ª–∏—à–Ω–æ –æ—Ç–Ω–æ–≤–æ –∫–æ–¥–∞, –≤–º–µ—Å—Ç–æ –¥–∞ –æ–ø—Ä–∞–≤–∏—à —Å—Ç–∞—Ä–∏—Ç–µ —Å–∏ –≥—Ä–µ—à–∫–∏

–¥–æ—Ä–∏ –≤ –º–æ–º–µ–Ω—Ç–∞, —è–≤–Ω–æ –∏ –æ—â–µ –Ω–µ—â–∞ —Å–∏ —Ä–∞–∑–≤–∞–ª–∏–ª. –ü–æ–ª—É—á–∞–≤–∞–º –∏–∑–≤—Å—Ç–∏—è –µ–¥–≤–∞ –∫–æ–≥–∞—Ç–æ –µ –æ—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ. –ø—Ä–∏ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–µ –ø–æ–ª—É—á–∞–≤–∞—Ç –∏–∑–≤–µ—Å—Ç–∏—è!!!!!–∫–∞–∫–≤–∏ —Å–∞ —Ç–µ–∑–∏ –≥—Ä–µ—à–∫–∏????????? –∑–∞—â–æ –Ω–µ –º–æ–∂–µ—à –¥–∞ —Å—Ö–≤–∞–Ω–µ—à –≥–ª–æ–±–∞–ª–Ω–æ –∏–¥–µ—è—Ç–∞ –∏ –¥–∞ –æ–ø—Ä–∞–≤–∏—à –Ω–µ—â–∞—Ç–∞"

## –î–≤–µ –ö—Ä–∏—Ç–∏—á–Ω–∏ –ì—Ä–µ—à–∫–∏

### üêõ –ì—Ä–µ—à–∫–∞ #1: –ü—Ä–∞–∑–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è –±–µ–∑ —Ç–µ–∫—Å—Ç

**–ö—ä–¥–µ:** `sw.js`, —Ä–µ–¥–æ–≤–µ 155 –∏ 161

**–ö–∞–∫–≤–æ –±–µ—à–µ –≥—Ä–µ—à–Ω–æ:**
```javascript
// ‚ùå –ì–†–ï–®–ù–û - –í—Ä—ä—â–∞ Promise, –Ω–µ –¥–∞–Ω–Ω–∏—Ç–µ!
const parsedData = event.data.json();  
notificationData = parsedData;  // parsedData –µ Promise –æ–±–µ–∫—Ç!

// ‚ùå –ì–†–ï–®–ù–û - –í—Ä—ä—â–∞ Promise, –Ω–µ —Ç–µ–∫—Å—Ç–∞!
const textData = event.data.text();
notificationData.body = textData;  // textData –µ Promise –æ–±–µ–∫—Ç!
```

**–ó–∞—â–æ —Å–µ –ø–æ–ª—É—á–∞–≤–∞—Ö–∞ –ø—Ä–∞–∑–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è:**
- `event.data.json()` –∏ `event.data.text()` —Å–∞ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏ –º–µ—Ç–æ–¥–∏** - –≤—Ä—ä—â–∞—Ç Promise
- –ë–µ–∑ `await`, –∫–æ–¥—ä—Ç —Å–ª–∞–≥–∞ Promise –æ–±–µ–∫—Ç –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
- –ö–æ–≥–∞—Ç–æ –∏–∑–≤–µ—Å—Ç–∏–µ—Ç–æ —Å–µ –ø–æ–∫–∞–∂–µ, `notificationData.body` —Å—ä–¥—ä—Ä–∂–∞ `[object Promise]` –∏–ª–∏ –µ –ø—Ä–∞–∑–Ω–æ
- **–†–µ–∑—É–ª—Ç–∞—Ç:** –ü—Ä–∞–∑–Ω–æ –∏–∑–≤–µ—Å—Ç–∏–µ –±–µ–∑ —Ç–µ–∫—Å—Ç

### üêõ –ì—Ä–µ—à–∫–∞ #2: –ò–∑–≤–µ—Å—Ç–∏—è –Ω–µ —Ä–∞–±–æ—Ç—è—Ç –ø—Ä–∏ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º—ä—Ç:**
–ö–æ–≥–∞—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ, –±—Ä–∞—É–∑—ä—Ä—ä—Ç –º–æ–∂–µ –¥–∞ –ø—Ä–µ–∫—Ä–∞—Ç–∏ service worker –ø–æ –≤—Å—è–∫–æ –≤—Ä–µ–º–µ. –ê–∫–æ async –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ –Ω–µ —Å–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –∏–∑—á–∞–∫–∞–Ω–∏ —á—Ä–µ–∑ `event.waitUntil()`, service worker —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ –ø—Ä–µ–¥–∏ –∏–∑–≤–µ—Å—Ç–∏–µ—Ç–æ –¥–∞ –µ –ø–æ–∫–∞–∑–∞–Ω–æ.

**–ö–∞–∫–≤–æ —Å–µ —Å–ª—É—á–≤–∞—à–µ:**
```
1. Push —Å—ä–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—Å—Ç–∏–≥–∞
2. Service worker —Å–µ —Å—ä–±—É–∂–¥–∞
3. event.data.json() —Å–µ –∏–∑–≤–∏–∫–≤–∞ (–≤—Ä—ä—â–∞ Promise)
4. –ö–æ–¥—ä—Ç –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ –≤–µ–¥–Ω–∞–≥–∞ –ë–ï–ó –¥–∞ —á–∞–∫–∞
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ ‚Üí Service worker –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø—Ä–µ–∫—Ä–∞—Ç–µ–Ω
6. Promise –Ω–∏–∫–æ–≥–∞ –Ω–µ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ ‚Üí –ò–∑–≤–µ—Å—Ç–∏–µ—Ç–æ –Ω–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞
```

**–†–µ–∑—É–ª—Ç–∞—Ç:** –ò–∑–≤–µ—Å—Ç–∏—è —Ä–∞–±–æ—Ç—è—Ç —Å–∞–º–æ –∫–æ–≥–∞—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –µ –æ—Ç–≤–æ—Ä–µ–Ω–æ!

## –†–µ—à–µ–Ω–∏–µ—Ç–æ

### –ü—Ä–æ–º–µ–Ω–∏—Ç–µ

**–§–∞–π–ª:** `sw.js`  
**–†–µ–¥–æ–≤–µ:** 140-251 (push event handler –Ω–∞–ø—ä–ª–Ω–æ –ø–æ–ø—Ä–∞–≤–µ–Ω)

### –ö–ª—é—á–æ–≤–∏ –∫–æ—Ä–µ–∫—Ü–∏–∏

#### 1. Push handler –æ–±–≤–∏—Ç –≤ async —Ñ—É–Ω–∫—Ü–∏—è
```javascript
self.addEventListener('push', (event) => {
  const notificationPromise = (async () => {
    // –í—Å–∏—á–∫–∏ async –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—É–∫
  })();
  
  event.waitUntil(notificationPromise);
});
```

–¢–æ–∑–∏ –º–æ–¥–µ–ª –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ –≤—Å–∏—á–∫–∏ async –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∞ –∏–∑—á–∞–∫–∞–Ω–∏ –∏ service worker —á–∞–∫–∞ –∑–∞–≤—ä—Ä—à–≤–∞–Ω–µ—Ç–æ –∏–º.

#### 2. –î–æ–±–∞–≤–µ–Ω await –∑–∞ event.data.json()
```javascript
// –ü—Ä–µ–¥–∏ (–ì–†–ï–®–ù–û):
const parsedData = event.data.json();

// –°–µ–≥–∞ (–ü–†–ê–í–ò–õ–ù–û):
const parsedData = await event.data.json();
```

#### 3. –î–æ–±–∞–≤–µ–Ω await –∑–∞ event.data.text()
```javascript
// –ü—Ä–µ–¥–∏ (–ì–†–ï–®–ù–û):
const textData = event.data.text();

// –°–µ–≥–∞ (–ü–†–ê–í–ò–õ–ù–û):
const textData = await event.data.text();
```

#### 4. –î–æ–±–∞–≤–µ–Ω–∞ –≤–ª–æ–∂–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏
```javascript
try {
  const parsedData = await event.data.json();
  notificationData = parsedData;
} catch (e) {
  console.warn('[SW] JSON parse failed, trying text:', e);
  try {
    const textData = await event.data.text();  // –°–µ–≥–∞ —Å await!
    notificationData.body = textData;
  } catch (textError) {
    console.error('[SW] Failed to parse text data:', textError);
    // –ò–∑–ø–æ–ª–∑–≤–∞ —Ä–µ–∑–µ—Ä–≤–µ–Ω —Ç–µ–∫—Å—Ç –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
  }
}
```

#### 5. –î–æ–±–∞–≤–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –≥—Ä–µ—à–∫–∞
```javascript
event.waitUntil(notificationPromise.catch(err => {
  console.error('[SW] Failed to show notification:', err);
  // –ü–æ–∫–∞–∂–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ –∏–∑–≤–µ—Å—Ç–∏–µ
  return self.registration.showNotification(DEFAULT_TITLE, {
    body: DEFAULT_BODY,
    icon: DEFAULT_ICON,
    badge: DEFAULT_BADGE
  });
}));
```

–¢–æ–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ –¥–æ—Ä–∏ –ø—Ä–∏ –≥—Ä–µ—à–∫–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø–æ–ª—É—á–∞–≤–∞ –∏–∑–≤–µ—Å—Ç–∏–µ.

## –ó–∞—â–æ —Ç–æ–≤–∞ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ—Ç–æ —Ä–µ—à–µ–Ω–∏–µ?

### 1. –ê–¥—Ä–µ—Å–∏—Ä–∞ –æ—Å–Ω–æ–≤–Ω–∏—Ç–µ –ø—Ä–∏—á–∏–Ω–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª–Ω–æ –∏–∑—á–∞–∫–≤–∞ async –º–µ—Ç–æ–¥–∏—Ç–µ (`event.data.json()`, `event.data.text()`)
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ service worker —á–∞–∫–∞ –∏–∑–≤–µ—Å—Ç–∏–µ—Ç–æ –¥–∞ —Å–µ –ø–æ–∫–∞–∂–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ —Å—ä—Å—Ç–µ–∑–∞—Ç–µ–ª–Ω–∏ —É—Å–ª–æ–≤–∏—è –ø—Ä–∏ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞–Ω–µ –Ω–∞ service worker

### 2. –ú–∏–Ω–∏–º–∞–ª–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏
- –ü—Ä–æ–º–µ–Ω–µ–Ω —Å–∞–º–æ push event handler –≤ `sw.js`
- –ë–ï–ó –ø—Ä–æ–º–µ–Ω–∏ –≤ –±–µ–∫–µ–Ω–¥–∞ (worker.js)
- –ë–ï–ó –ø—Ä–æ–º–µ–Ω–∏ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞ (admin.html)
- –ë–ï–ó –Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç

### 3. –ó–∞—â–∏—Ç–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–∏–≤–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏
- –†–µ–∑–µ—Ä–≤–Ω–æ –∏–∑–≤–µ—Å—Ç–∏–µ –∞–∫–æ –Ω–µ—â–æ —Å–µ –æ–±—ä—Ä–∫–∞
- –õ–æ–≥–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏ –∑–∞ debugging

### 4. –û–±—Ä–∞—Ç–Ω–æ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ
- –†–∞–±–æ—Ç–∏ —Å –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–∏ –∏ plaintext –∏–∑–≤–µ—Å—Ç–∏—è
- –ó–∞–ø–∞–∑–≤–∞ –≤—Å–∏—á–∫–∏ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏
- –ë–ï–ó breaking changes

## –ö–∞–∫–≤–æ —Å–µ–≥–∞ —Ä–∞–±–æ—Ç–∏ ‚úÖ

### 1. –ü—Ä–∞–∑–Ω–∏—Ç–µ –∏–∑–≤–µ—Å—Ç–∏—è —Å–∞ –æ–ø—Ä–∞–≤–µ–Ω–∏:
- ‚úÖ –¢–µ–∫—Å—Ç—ä—Ç —Å–µ –∏–∑–≤–ª–∏—á–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –æ—Ç push payload
- ‚úÖ `await` –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ Promise-–∏—Ç–µ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç –ø—Ä–µ–¥–∏ —É–ø–æ—Ç—Ä–µ–±–∞
- ‚úÖ Body –≤–∏–Ω–∞–≥–∏ —Å—ä–¥—ä—Ä–∂–∞ —Ä–µ–∞–ª–µ–Ω —Ç–µ–∫—Å—Ç, –Ω–∏–∫–æ–≥–∞ Promise –æ–±–µ–∫—Ç

### 2. –ò–∑–≤–µ—Å—Ç–∏—è —Ä–∞–±–æ—Ç—è—Ç –ø—Ä–∏ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- ‚úÖ `event.waitUntil()` –ø—Ä–∞–≤–∏–ª–Ω–æ —á–∞–∫–∞ async –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ
- ‚úÖ Service worker –æ—Å—Ç–∞–≤–∞ –∂–∏–≤ –¥–æ–∫–∞—Ç–æ –∏–∑–≤–µ—Å—Ç–∏–µ—Ç–æ —Å–µ –ø–æ–∫–∞–∂–µ
- ‚úÖ Push —Å—ä–æ–±—â–µ–Ω–∏—è —Å–µ –¥–æ—Å—Ç–∞–≤—è—Ç –¥–æ—Ä–∏ –∫–æ–≥–∞—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∏

### 3. –°—Ç–∞–±–∏–ª–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –≥—Ä–µ—à–∫–∏:
- ‚úÖ –ê–∫–æ JSON parsing —Å–µ –ø—Ä–æ–≤–∞–ª–∏, –ø—Ä–æ–±–≤–∞ text parsing
- ‚úÖ –ê–∫–æ text parsing —Å–µ –ø—Ä–æ–≤–∞–ª–∏, –∏–∑–ø–æ–ª–∑–≤–∞ —Ä–µ–∑–µ—Ä–≤–µ–Ω —Ç–µ–∫—Å—Ç
- ‚úÖ –ê–∫–æ –ø–æ–∫–∞–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∏–∑–≤–µ—Å—Ç–∏–µ —Å–µ –ø—Ä–æ–≤–∞–ª–∏, –ø–æ–∫–∞–∑–≤–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ –∏–∑–≤–µ—Å—Ç–∏–µ

## –¢–µ—Å—Ç–≤–∞–Ω–µ

### –¢–µ—Å—Ç 1: –ò–∑–≤–µ—Å—Ç–∏–µ —Å –æ—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
1. –û—Ç–≤–æ—Ä–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –≤ –±—Ä–∞—É–∑—ä—Ä–∞
2. –û—Ç–∏–¥–µ—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª ‚Üí "–ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ AI –ê—Å–∏—Å—Ç–µ–Ω—Ç –°—ä–æ–±—â–µ–Ω–∏—è"
3. –ò–∑–ø—Ä–∞—Ç–µ—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ —Å—ä–æ–±—â–µ–Ω–∏–µ
4. **–û—á–∞–∫–≤–∞–Ω–æ:** –ò–∑–≤–µ—Å—Ç–∏–µ—Ç–æ —Å–µ –ø–æ—è–≤—è–≤–∞ —Å —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ

### –¢–µ—Å—Ç 2: –ò–∑–≤–µ—Å—Ç–∏–µ —Å—ä—Å –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
1. –ó–∞—Ç–≤–æ—Ä–µ—Ç–µ –≤—Å–∏—á–∫–∏ —Ç–∞–±–æ–≤–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
2. –ù–µ–∫–∞ –Ω—è–∫–æ–π –¥—Ä—É–≥ –∏–∑–ø—Ä–∞—Ç–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞
3. **–û—á–∞–∫–≤–∞–Ω–æ:** –ò–∑–≤–µ—Å—Ç–∏–µ—Ç–æ —Å–µ –ø–æ—è–≤—è–≤–∞ –¥–æ—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –¥–∞ –µ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ

### –¢–µ—Å—Ç 3: –ü—Ä–∞–∑–µ–Ω/–Ω–µ–≤–∞–ª–∏–¥–µ–Ω payload
1. –ò–∑–ø—Ä–∞—Ç–µ—Ç–µ push —Å –Ω–µ–≤–∞–ª–∏–¥–µ–Ω JSON
2. **–û—á–∞–∫–≤–∞–Ω–æ:** –ò–∑–≤–µ—Å—Ç–∏–µ—Ç–æ —Å–µ –ø–æ—è–≤—è–≤–∞ —Å —Ä–µ–∑–µ—Ä–≤–µ–Ω —Ç–µ–∫—Å—Ç (–Ω–µ –ø—Ä–∞–∑–Ω–æ)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ –Ω–∞ –±—Ä–∞—É–∑—ä—Ä–∞

–°–ª–µ–¥ –∫–æ—Ä–µ–∫—Ü–∏—è—Ç–∞, –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–∫–∞–∑–≤–∞:
```
[SW] Push notification received
[SW] event.data: [object]
[SW] Parsed JSON data: {title: "AI –ê—Å–∏—Å—Ç–µ–Ω—Ç - NutriPlan", body: "–¢–µ—Å—Ç–æ–≤–æ —Å—ä–æ–±—â–µ–Ω–∏–µ", ...}
[SW] Final notification data: {title: "AI –ê—Å–∏—Å—Ç–µ–Ω—Ç - NutriPlan", body: "–¢–µ—Å—Ç–æ–≤–æ —Å—ä–æ–±—â–µ–Ω–∏–µ", ...}
[SW] Showing notification with title: AI –ê—Å–∏—Å—Ç–µ–Ω—Ç - NutriPlan body: –¢–µ—Å—Ç–æ–≤–æ —Å—ä–æ–±—â–µ–Ω–∏–µ
```

–í–µ—á–µ –Ω—è–º–∞ –ø—Ä–∞–∑–µ–Ω body –∏–ª–∏ Promise –æ–±–µ–∫—Ç–∏!

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª | –°—Ç–æ–π–Ω–æ—Å—Ç |
|-----------|----------|
| –ü—Ä–æ–º–µ–Ω–µ–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ | 1 (sw.js) |
| –î–æ–±–∞–≤–µ–Ω–∏ —Ä–µ–¥–æ–≤–µ | 103 |
| –ü—Ä–µ–º–∞—Ö–Ω–∞—Ç–∏ —Ä–µ–¥–æ–≤–µ | 89 |
| –ù–µ—Ç–Ω–∞ –ø—Ä–æ–º—è–Ω–∞ | +14 —Ä–µ–¥–∞ |
| –ó–∞—Å–µ–≥–Ω–∞—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ | 1 (push event handler) |

## –ü—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –°–∏–Ω—Ç–∞–∫—Ç–∏—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
$ node -c sw.js
‚úÖ JavaScript —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—ä—Ç –µ –≤–∞–ª–∏–¥–µ–Ω
```

### ‚úÖ Code Review
```
‚úÖ –ù—è–º–∞ –∑–∞–±–µ–ª–µ–∂–∫–∏ –æ—Ç –ø—Ä–µ–≥–ª–µ–¥–∞
‚úÖ –ö–æ–¥—ä—Ç —Å–ª–µ–¥–≤–∞ –Ω–∞–π-–¥–æ–±—Ä–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏
‚úÖ –ü—Ä–∞–≤–∏–ª–Ω–∞ —É–ø–æ—Ç—Ä–µ–±–∞ –Ω–∞ async/await
```

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç (CodeQL)
```
Analysis Result for 'javascript': Found 0 alerts
‚úÖ –ù—è–º–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞
```

## –í—Ä—ä–∑–∫–∏ —Å –ø—Ä–µ–¥–∏—à–Ω–∏ –∫–æ—Ä–µ–∫—Ü–∏–∏

–¢–∞–∑–∏ –∫–æ—Ä–µ–∫—Ü–∏—è –∞–¥—Ä–µ—Å–∏—Ä–∞ –æ—Å–Ω–æ–≤–Ω–∏—è async –ø—Ä–æ–±–ª–µ–º, –∫–æ–π—Ç–æ –º–æ–∂–µ –¥–∞ –µ –ø—Ä–∏—á–∏–Ω—è–≤–∞–ª –ø—Ä–æ–±–ª–µ–º–∏ –¥–æ—Ä–∏ —Å–ª–µ–¥ –ø—Ä–µ–¥–∏—à–Ω–∏—Ç–µ –∫–æ—Ä–µ–∫—Ü–∏–∏:

- [EMPTY_NOTIFICATION_FIX_2026-02-17.md](./EMPTY_NOTIFICATION_FIX_2026-02-17.md) - –î–æ–±–∞–≤–µ–Ω–∏ —Ä–µ–∑–µ—Ä–≤–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∑–∞ title/body (–∑–∞—â–∏—Ç–Ω–æ)
- [NOTIFICATION_FIX_2026-02-17.md](./NOTIFICATION_FIX_2026-02-17.md) - –ü–æ–ø—Ä–∞–≤–µ–Ω–∞ —É–ø–æ—Ç—Ä–µ–±–∞ –Ω–∞ ECDH –∫–ª—é—á
- [PUSH_NOTIFICATION_FIX_2026-02-17.md](./PUSH_NOTIFICATION_FIX_2026-02-17.md) - –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–æ RFC 8291 –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–µ

**–¢–∞–∑–∏ –∫–æ—Ä–µ–∫—Ü–∏—è –¥–æ–ø—ä–ª–≤–∞ –ø—Ä–µ–¥–∏—à–Ω–∏—Ç–µ, –∫–∞—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞, —á–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ —Ä–∞–±–æ—Ç—è—Ç –ø—Ä–∞–≤–∏–ª–Ω–æ.**

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### MDN –†–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏

–û—Ç [MDN PushMessageData](https://developer.mozilla.org/en-US/docs/Web/API/PushMessageData):

> **`PushMessageData.json()`**
> 
> –í—Ä—ä—â–∞: **Promise**, –∫–æ–π—Ç–æ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Å –¥–∞–Ω–Ω–∏—Ç–µ –∫–∞—Ç–æ JavaScript –æ–±–µ–∫—Ç.

> **`PushMessageData.text()`**
> 
> –í—Ä—ä—â–∞: **Promise**, –∫–æ–π—Ç–æ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Å –¥–∞–Ω–Ω–∏—Ç–µ –∫–∞—Ç–æ string.

–ò –¥–≤–∞—Ç–∞ –º–µ—Ç–æ–¥–∞ —Å–∞ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏** –∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–∑—á–∞–∫–≤–∞—Ç —Å await.

## –í–Ω–µ–¥—Ä—è–≤–∞–Ω–µ

### –ó–∞ GitHub Pages / Static Hosting
Service worker —â–µ —Å–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ —Å–ª–µ–¥–≤–∞—â–æ—Ç–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –º–æ–∂–µ –¥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞:
1. –ó–∞—Ç–≤–æ—Ä—è—Ç –≤—Å–∏—á–∫–∏ —Ç–∞–±–æ–≤–µ —Å—ä—Å —Å–∞–π—Ç–∞
2. –û—Ç–≤–æ—Ä—è—Ç –æ—Ç–Ω–æ–≤–æ —Å–∞–π—Ç–∞

–ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –≤ DevTools ‚Üí Application ‚Üí Service Workers ‚Üí Update

## –†–µ–∑—é–º–µ

‚úÖ **–ü—Ä–æ–±–ª–µ–º 1 –æ–ø—Ä–∞–≤–µ–Ω:** –ü—Ä–∞–∑–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è - async –º–µ—Ç–æ–¥–∏—Ç–µ —Å–µ –∏–∑—á–∞–∫–≤–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–æ  
‚úÖ **–ü—Ä–æ–±–ª–µ–º 2 –æ–ø—Ä–∞–≤–µ–Ω:** –ò–∑–≤–µ—Å—Ç–∏—è—Ç–∞ —Ä–∞–±–æ—Ç—è—Ç –ø—Ä–∏ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
‚úÖ **–û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞:** –õ–∏–ø—Å–≤–∞—â `await` –∑–∞ `event.data.json()` –∏ `event.data.text()`  
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –û–±–≤–∏–≤–∞–Ω–µ –≤ async IIFE –∏ –∏–∑—á–∞–∫–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ async –æ–ø–µ—Ä–∞—Ü–∏–∏  
‚úÖ **–ü—Ä–æ–º–µ–Ω–∏:** 14 –Ω–µ—Ç–Ω–∏ —Ä–µ–¥–∞ –≤ sw.js  
‚úÖ **–¢–µ—Å—Ç–≤–∞–Ω–µ:** –°–∏–Ω—Ç–∞–∫—Å–∏—Å ‚úÖ –ü—Ä–µ–≥–ª–µ–¥ ‚úÖ –°–∏–≥—É—Ä–Ω–æ—Å—Ç ‚úÖ  
‚úÖ **–í—ä–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –ú–∏–Ω–∏–º–∞–ª–Ω–æ, —Ñ–æ–∫—É—Å–∏—Ä–∞–Ω–æ, –∫–æ—Ä–∏–≥–∏—Ä–∞ –æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –ø—Ä–∏—á–∏–Ω–∞  

**–ò –¥–≤–∞—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å–∞ –Ω–∞–ø—ä–ª–Ω–æ —Ä–µ—à–µ–Ω–∏.**

---

*–ü–æ–ø—Ä–∞–≤–µ–Ω–æ: 17 —Ñ–µ–≤—Ä—É–∞—Ä–∏ 2026*  
*–ü—Ä–æ–±–ª–µ–º–∏: –ü—Ä–∞–∑–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è + –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞—Ç–≤–æ—Ä–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ*  
*–†–µ—à–µ–Ω–∏–µ: –ü—Ä–∞–≤–∏–ª–Ω–æ –∏–∑—á–∞–∫–≤–∞–Ω–µ –Ω–∞ async –∏–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ –æ—Ç push —Å—ä–æ–±—â–µ–Ω–∏—è*
