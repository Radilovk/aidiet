# API JSON –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –î–∞–Ω–Ω–∏—Ç–µ –∏ –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è

## –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ç–∞

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ **Multi-Step Architecture —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ—Ä–µ–∫—Ü–∏—è** –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏–∑–∏—Ä–∞–Ω —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω –ø—Ä–µ–∑ **4+1+1 —Å—Ç—ä–ø–∫–∏** (4 –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ + 1 –∑–∞ —á–∞—Ç + 1 –∑–∞ –∫–æ—Ä–µ–∫—Ü–∏—è):

```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: 1 (–ê–Ω–∞–ª–∏–∑) + 1 (–°—Ç—Ä–∞—Ç–µ–≥–∏—è) + 4 (–•—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω) + 1 (–†–µ–∑—é–º–µ) + –ö–û–†–ï–ö–¶–ò–Ø = 7 AI –∑–∞—è–≤–∫–∏ + –¥–æ 4 –æ–ø–∏—Ç–∞ –∑–∞ –∫–æ—Ä–µ–∫—Ü–∏—è
```

### –û–±—â–∞ –°—Ö–µ–º–∞ –Ω–∞ –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è—Ç–∞

```
–ö–õ–ò–ï–ù–¢ (Frontend)
    ‚Üì POST /api/generate-plan + userData
BACKEND (Cloudflare Worker)
    ‚Üì –°—Ç—ä–ø–∫–∞ 1-4 (7 AI –∑–∞—è–≤–∫–∏ - –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ)
    ‚Üì –°—Ç—ä–ø–∫–∞ 5 (–í–ê–õ–ò–î–ê–¶–ò–Ø - 12+ –ø—Ä–æ–≤–µ—Ä–∫–∏)
    ‚Üì ‚îå‚îÄ‚îÄ‚îÄ –ê–∫–æ –∏–º–∞ –≥—Ä–µ—à–∫–∏ ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì ‚îÇ  –°—Ç—ä–ø–∫–∞ 6 (–ö–û–†–ï–ö–¶–ò–Ø)  ‚îÇ
    ‚Üì ‚îÇ  –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ         ‚îÇ
    ‚Üì ‚îÇ  (–¥–æ 4 –æ–ø–∏—Ç–∞)         ‚îÇ
    ‚Üì ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì JSON response
–ö–õ–ò–ï–ù–¢
    ‚Üì –ó–∞–ø–∞–∑–≤–∞–Ω–µ –≤ localStorage
    ‚Üì –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ plan.html
```

---

## –°—Ç—ä–ø–∫–∞ 0: –ö–ª–∏–µ–Ω—Ç—Å–∫–∏ –î–∞–Ω–Ω–∏ (Input –æ—Ç –í—ä–ø—Ä–æ—Å–Ω–∏–∫–∞)

### –ö–∞–∫–≤–æ —Å–µ –∏–∑–ø—Ä–∞—â–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫—ä–º backend

**Endpoint:** `POST /api/generate-plan`

**JSON –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –í—ä–ø—Ä–æ—Å–Ω–∏–∫–∞:**

```json
{
  "name": "–ò–º–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞",
  "age": 30,
  "gender": "–ú—ä–∂/–ñ–µ–Ω–∞",
  "weight": 75,
  "height": 175,
  "goal": "–û—Ç—Å–ª–∞–±–≤–∞–Ω–µ/–ü–æ–∫–∞—á–≤–∞–Ω–µ –Ω–∞ –º—É—Å–∫—É–ª–Ω–∞ –º–∞—Å–∞/–ü–æ–¥–¥—Ä—ä–∂–∫–∞",
  "sportActivity": "–í–∏—Å–æ–∫–æ/–°—Ä–µ–¥–Ω–æ/–ù–∏—Å–∫–æ/–ù–∏–∫–∞–∫–≤–∞",
  
  "medicalConditions": [
    "–î–∏–∞–±–µ—Ç —Ç–∏–ø 2",
    "–ü–æ–≤–∏—à–µ–Ω —Ö–æ–ª–µ—Å—Ç–µ—Ä–æ–ª"
  ],
  "medications": [
    "–ú–µ—Ç—Ñ–æ—Ä–º–∏–Ω 500mg",
    "–°—Ç–∞—Ç–∏–Ω–∏"
  ],
  "allergies": "–Ø–¥–∫–∏, —Å–æ—è",
  
  "dietPreference": "–í—Å–µ—è–¥–µ–Ω/–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü/–í–µ–≥–∞–Ω/–ü–µ—Å–∫–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü",
  "dietLike": "–ü–∏–ª–µ—à–∫–æ, —Ä–∏–±–∞, –∑–µ–ª–µ–Ω—á—É—Ü–∏",
  "dietDislike": "–°–ø–∞–Ω–∞–∫, –∫–∞—Ä—Ñ–∏–æ–ª",
  
  "sleepHours": 7,
  "sleepQuality": "–î–æ–±—Ä–æ/–°—Ä–µ–¥–Ω–æ/–õ–æ—à–æ",
  "stressLevel": "–í–∏—Å–æ–∫–æ/–°—Ä–µ–¥–Ω–æ/–ù–∏—Å–∫–æ",
  "waterIntake": 2.5,
  
  "breakfastTime": "07:00",
  "lunchTime": "12:30",
  "dinnerTime": "19:00",
  
  "bloodPressure": "120/80",
  "bloodSugar": "5.5",
  "cholesterolTotal": "5.2",
  "cholesterolLDL": "3.1",
  "cholesterolHDL": "1.8",
  "triglycerides": "1.2",
  "hemoglobin": "140",
  "iron": "15",
  "vitaminD": "45",
  "vitaminB12": "350",
  
  "digestionProblems": ["–ó–∞–ø–µ–∫", "–ü–æ–¥—É–≤–∞–Ω–µ"],
  "energyLevels": "–ù–∏—Å–∫–æ/–°—Ä–µ–¥–Ω–æ/–í–∏—Å–æ–∫–æ",
  "appetitePattern": "–ù–æ—Ä–º–∞–ª–Ω–æ/–ü–æ–≤–∏—à–µ–Ω–æ/–ù–∞–º–∞–ª–µ–Ω–æ",
  
  "smoking": "–î–∞/–ù–µ",
  "alcohol": "–†—è–¥–∫–æ/–ü–æ–Ω—è–∫–æ–≥–∞/–ß–µ—Å—Ç–æ/–ù–∏–∫–æ–≥–∞",
  
  "planModifications": []
}
```

### –ö–∞–∫–≤–æ –ò–∑—á–∏—Å–ª—è–≤–∞ Backend-–∞ (–ø—Ä–µ–¥–∏ AI)

Backend-—ä—Ç –∏–∑—á–∏—Å–ª—è–≤–∞ –∫—Ä–∏—Ç–∏—á–Ω–∏ –∑–¥—Ä–∞–≤–Ω–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:

```javascript
// 1. BMR (Basal Metabolic Rate) - –û—Å–Ω–æ–≤–µ–Ω –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º
BMR_–º—ä–∂–µ = 10 * —Ç–µ–≥–ª–æ(kg) + 6.25 * –≤–∏—Å–æ—á–∏–Ω–∞(cm) - 5 * –≤—ä–∑—Ä–∞—Å—Ç + 5
BMR_–∂–µ–Ω–∏ = 10 * —Ç–µ–≥–ª–æ(kg) + 6.25 * –≤–∏—Å–æ—á–∏–Ω–∞(cm) - 5 * –≤—ä–∑—Ä–∞—Å—Ç - 161

// 2. TDEE (Total Daily Energy Expenditure) - –û–±—â –¥–Ω–µ–≤–µ–Ω —Ä–∞–∑—Ö–æ–¥
TDEE = BMR * —Ñ–∞–∫—Ç–æ—Ä_–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç
// –§–∞–∫—Ç–æ—Ä–∏: –ù–∏–∫–∞–∫–≤–∞=1.2, –ù–∏—Å–∫–æ=1.375, –°—Ä–µ–¥–Ω–æ=1.55, –í–∏—Å–æ–∫–æ=1.725

// 3. BMI (Body Mass Index)
BMI = —Ç–µ–≥–ª–æ(kg) / (–≤–∏—Å–æ—á–∏–Ω–∞(m))¬≤

// 4. –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∏ –∫–∞–ª–æ—Ä–∏–∏ —Å–ø–æ—Ä–µ–¥ —Ü–µ–ª—Ç–∞
–û—Ç—Å–ª–∞–±–≤–∞–Ω–µ: TDEE * 0.85 (-15%)
–ü–æ–∫–∞—á–≤–∞–Ω–µ: TDEE * 1.1 (+10%)
–ü–æ–¥–¥—Ä—ä–∂–∫–∞: TDEE

// 5. –í–æ–¥–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ª–∏—Ç—Ä–∏)
min_water = —Ç–µ–≥–ª–æ(kg) * 0.033
```

**–†–µ–∑—É–ª—Ç–∞—Ç –æ—Ç –∏–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞:**
```json
{
  "calculatedBMR": 1650,
  "calculatedTDEE": 2475,
  "calculatedBMI": 24.5,
  "recommendedCalories": 2100,
  "minWaterIntake": 2.5
}
```

---

## –°—Ç—ä–ø–∫–∞ 1: –ê–ù–ê–õ–ò–ó (Analysis) - –•–æ–ª–∏—Å—Ç–∏—á–Ω–∞ –ó–¥—Ä–∞–≤–Ω–∞ –û—Ü–µ–Ω–∫–∞

### –¶–µ–ª –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞
–î—ä–ª–±–æ–∫ –∞–Ω–∞–ª–∏–∑ –Ω–∞ –∑–¥—Ä–∞–≤–Ω–∏—è —Å—Ç–∞—Ç—É—Å, –º–µ—Ç–∞–±–æ–ª–∏—Ç–µ–Ω –ø—Ä–æ—Ñ–∏–ª –∏ –∫–æ—Ä–µ–ª–∞—Ü–∏–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∏.

### AI –ó–∞—è–≤–∫–∞ (Input –∫—ä–º AI)
**–¢–∏–ø:** `step1_analysis`  
**Token Limit:** 4000 tokens  
**Prompt —Å—ä–¥—ä—Ä–∂–∞:**
- –ü—ä–ª–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏ (–ø—Ä–æ—Ñ–∏–ª, –Ω–∞–≤–∏—Ü–∏, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –∏—Å—Ç–æ—Ä–∏—è)
- –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- –ò–∑—á–∏—Å–ª–µ–Ω–∏ BMR, TDEE, BMI
- –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏ –¥–∞–Ω–Ω–∏ (—Å—ä–Ω, —Å—Ç—Ä–µ—Å, —Ö—Ä–∞–Ω–æ—Å–º–∏–ª–∞–Ω–µ)

### AI –û—Ç–≥–æ–≤–æ—Ä (Output –æ—Ç AI)

**–û—á–∞–∫–≤–∞–Ω JSON —Ñ–æ—Ä–º–∞—Ç:**

```json
{
  "bmr": 1650,
  "recommendedCalories": 2100,
  "bmi": 24.5,
  "bmiCategory": "–ù–æ—Ä–º–∞–ª–Ω–æ —Ç–µ–≥–ª–æ",
  
  "keyProblems": [
    {
      "problem": "–ò–Ω—Å—É–ª–∏–Ω–æ–≤–∞ —Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç",
      "severity": "–í–∏—Å–æ–∫–∞",
      "reasoning": "–ö—Ä—ä–≤–Ω–∞ –∑–∞—Ö–∞—Ä 6.8 mmol/L, HbA1c 6.2%, –ø—Ä–∏–∑–Ω–∞—Ü–∏ –Ω–∞ –º–µ—Ç–∞–±–æ–ª–∏—Ç–µ–Ω —Å–∏–Ω–¥—Ä–æ–º"
    },
    {
      "problem": "–•—Ä–æ–Ω–∏—á–µ–Ω —Å—Ç—Ä–µ—Å",
      "severity": "–°—Ä–µ–¥–Ω–∞",
      "reasoning": "–ù–∞—Ä—É—à–µ–Ω —Å—ä–Ω, –≤–∏—Å–æ–∫ –∫–æ—Ä—Ç–∏–∑–æ–ª, —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–æ –∫–æ–º–ø–µ–Ω—Å–∏—Ä–∞–Ω–µ"
    }
  ],
  
  "metabolicProfile": {
    "metabolismSpeed": "–ó–∞–±–∞–≤–µ–Ω",
    "insulinSensitivity": "–ù–∏—Å–∫–∞",
    "hormonalBalance": "–î–∏—Å–±–∞–ª–∞–Ω—Å - –≤–∏—Å–æ–∫ –∫–æ—Ä—Ç–∏–∑–æ–ª, –Ω–∏—Å–∫–∏ —â–∏—Ç–æ–≤–∏–¥–Ω–∏",
    "inflammationLevel": "–£–º–µ—Ä–µ–Ω–æ –ø–æ–≤–∏—à–µ–Ω–æ"
  },
  
  "nutritionalDeficiencies": [
    {
      "nutrient": "–í–∏—Ç–∞–º–∏–Ω D",
      "current": "22 ng/mL",
      "optimal": "40-60 ng/mL",
      "impact": "–ò–º—É–Ω–Ω–∞ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Å—Ç–Ω–∞ –ø–ª—ä—Ç–Ω–æ—Å—Ç, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ"
    },
    {
      "nutrient": "–ú–∞–≥–Ω–µ–∑–∏–π",
      "reasoning": "–°—Ç—Ä–µ—Å, –º—É—Å–∫—É–ª–Ω–∏ –∫—Ä–∞–º–ø–∏, –ª–æ—à —Å—ä–Ω",
      "impact": "–ï–Ω–µ—Ä–≥–∏–µ–Ω –º–µ—Ç–∞–±–æ–ª–∏–∑—ä–º, –Ω–µ—Ä–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞"
    }
  ],
  
  "digestiveHealth": {
    "status": "–ö–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–∞–Ω–æ",
    "issues": ["–ó–∞–ø–µ–∫", "–ü–æ–¥—É–≤–∞–Ω–µ —Å–ª–µ–¥ —è–¥–µ–Ω–µ"],
    "probableCause": "–ù–∏—Å–∫–∏ —Ñ–∏–±—Ä–∏, –Ω–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ —Ç–µ—á–Ω–æ—Å—Ç–∏, —Å—Ç—Ä–µ—Å"
  },
  
  "cardioMetabolicRisk": {
    "level": "–°—Ä–µ–¥–µ–Ω",
    "factors": [
      "–•–æ–ª–µ—Å—Ç–µ—Ä–æ–ª LDL 3.8 (—Ü–µ–ª <3.0)",
      "–¢—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥–∏ 2.1 (—Ü–µ–ª <1.7)",
      "–ê–±–¥–æ–º–∏–Ω–∞–ª–Ω–æ –∑–∞—Ç–ª—ä—Å—Ç—è–≤–∞–Ω–µ"
    ]
  },
  
  "psychologicalFactors": {
    "stressImpact": "–í–∏—Å–æ–∫ - —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–æ –∫–æ–º–ø–µ–Ω—Å–∏—Ä–∞–Ω–µ",
    "sleepQuality": "–ù–∏—Å–∫–æ - 5-6 —á–∞—Å–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–∞–Ω —Å—ä–Ω",
    "emotionalEating": "–ü—Ä–∏—Å—ä—Å—Ç–≤–∞ - –≤–µ—á–µ—Ä–Ω–∏ –ø—Ä–µ—è–∂–¥–∞–Ω–∏—è"
  },
  
  "keyCorrelations": [
    "–í–∏—Å–æ–∫–∞ –∫—Ä—ä–≤–Ω–∞ –∑–∞—Ö–∞—Ä + –ù–∏—Å—ä–∫ —Å—ä–Ω ‚Üí –ü–æ–≤–∏—à–µ–Ω –∞–ø–µ—Ç–∏—Ç –∏ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞ —Ä–µ–∑–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç",
    "–•—Ä–æ–Ω–∏—á–µ–Ω —Å—Ç—Ä–µ—Å + –ù–∏—Å–∫–∏ —Ñ–∏–±—Ä–∏ ‚Üí –ü—Ä–æ–±–ª–µ–º–∏ —Å —Ö—Ä–∞–Ω–æ—Å–º–∏–ª–∞–Ω–µ—Ç–æ",
    "–ù–∏—Å–∫–∏ –≤–∏—Ç–∞–º–∏–Ω D + –í–∏—Å–æ–∫ —Å—Ç—Ä–µ—Å ‚Üí –ù–∞–º–∞–ª–µ–Ω–∞ –∏–º—É–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è"
  ]
}
```

### –ö–∞–∫–≤–æ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞ —Å–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏
- `keyProblems` ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∏ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞
- `metabolicProfile` ‚Üí –≤–ª–∏—è–µ –Ω–∞ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–∏
- `nutritionalDeficiencies` ‚Üí –≤–ª–∏—è–µ –Ω–∞ –¥–æ–±–∞–≤–∫–∏ –∏ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –∏–∑–±–æ—Ä
- `cardioMetabolicRisk` ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `keyCorrelations` ‚Üí –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–ª–∞–Ω–∞

---

## –°—Ç—ä–ø–∫–∞ 2: –°–¢–†–ê–¢–ï–ì–ò–Ø (Strategy) - –î–∏–µ—Ç–∏—á–µ–Ω –ü–æ–¥—Ö–æ–¥

### –¶–µ–ª –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞
–û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –ø–æ–¥—Ö–æ–¥, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏.

### AI –ó–∞—è–≤–∫–∞ (Input –∫—ä–º AI)
**–¢–∏–ø:** `step2_strategy`  
**Token Limit:** 4000 tokens  
**Prompt —Å—ä–¥—ä—Ä–∂–∞:**
- –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏
- **–ö–û–ú–ü–ê–ö–¢–ï–ù —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –∞–Ω–∞–ª–∏–∑–∞** (67% –ø–æ-–º–∞–ª–∫–æ —Ç–æ–∫–µ–Ω–∏)
- –ò–∑—á–∏—Å–ª–µ–Ω–∏ –∫–∞–ª–æ—Ä–∏–∏ –∏ –º–∞–∫—Ä–æ—Å–∏

### AI –û—Ç–≥–æ–≤–æ—Ä (Output –æ—Ç AI)

**–û—á–∞–∫–≤–∞–Ω JSON —Ñ–æ—Ä–º–∞—Ç:**

```json
{
  "dietaryModifier": "–ù–∏—Å–∫–æ–≥–ª–∏–∫–µ–º–∏—á–µ–Ω —Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞–Ω–∏ –≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏",
  
  "welcomeMessage": "–ó–¥—Ä–∞–≤–µ–π, –ò–≤–∞–Ω! –¢–≤–æ—è—Ç –ø–ª–∞–Ω –µ —Å—ä–∑–¥–∞–¥–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ —Ç–µ–±, –∑–∞ –¥–∞...",
  
  "planJustification": "–ò–∑–±—Ä–∞–Ω–∏—è—Ç –ø–æ–¥—Ö–æ–¥ –µ –Ω–∏—Å–∫–æ–≥–ª–∏–∫–µ–º–∏—á–µ–Ω...",
  
  "mealCountJustification": "–ü—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º 4 —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–æ - –∑–∞–∫—É—Å–∫–∞, –æ–±—è–¥, —Å–ª–µ–¥–æ–±–µ–¥–Ω–∞ –∑–∞–∫—É—Å–∫–∞ –∏ –≤–µ—á–µ—Ä—è...",
  
  "mealsPerDay": 4,
  
  "macroDistribution": {
    "protein": "30%",
    "carbs": "40%",
    "fats": "30%",
    "reasoning": "–ü–æ–≤–∏—à–µ–Ω –ø—Ä–æ—Ç–µ–∏–Ω –∑–∞ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ—Å—Ç..."
  },
  
  "foodsToInclude": [
    "–ó–µ–ª–µ–Ω—á—É—Ü–∏ —Å –≤–∏—Å–æ–∫–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –Ω–∞ —Ñ–∏–±—Ä–∏",
    "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–∏ –ø—Ä–æ—Ç–µ–∏–Ω–∏ (—Ä–∏–±–∞, –ø–∏–ª–µ—à–∫–æ, —è–π—Ü–∞)",
    "–§–µ—Ä–º–µ–Ω—Ç–∏—Ä–∞–ª–∏ —Ö—Ä–∞–Ω–∏ –∑–∞ –ø—Ä–æ–±–∏–æ—Ç–∏—Ü–∏",
    "–Ø–¥–∫–∏ –∏ —Å–µ–º–µ–Ω–∞ –∑–∞ –∑–¥—Ä–∞–≤–æ—Å–ª–æ–≤–Ω–∏ –º–∞–∑–Ω–∏–Ω–∏"
  ],
  
  "foodsToAvoid": [
    "–†–∞—Ñ–∏–Ω–∏—Ä–∞–Ω–∏ –≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏ –∏ –±—è–ª–∞ –∑–∞—Ö–∞—Ä",
    "–ü—Ä–µ—Ä–∞–±–æ—Ç–µ–Ω–∏ –º–µ—Å–∞",
    "–¢—Ä–∞–Ω—Å-–º–∞–∑–Ω–∏–Ω–∏ –∏ —Ñ—Ä–∏—Ç—é—Ä",
    "–ê–ª–∫–æ—Ö–æ–ª –∏ –≥–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞–ø–∏—Ç–∫–∏"
  ],
  
  "mealTiming": {
    "breakfast": "07:00-08:00",
    "lunch": "12:30-13:30",
    "snack": "16:00-17:00",
    "dinner": "18:30-19:30",
    "reasoning": "–†–∞–Ω–Ω–∞ –≤–µ—á–µ—Ä—è –∑–∞ –ø–æ–¥–æ–±—Ä–µ–Ω–∞ –∏–Ω—Å—É–ª–∏–Ω–æ–≤–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–æ—Å—Ç"
  },
  
  "specialGuidelines": [
    "–ó–∞–ø–æ—á–≤–∞–π —Ö—Ä–∞–Ω–µ–Ω–∏–µ—Ç–æ —Å—ä—Å —Å–∞–ª–∞—Ç–∞/–∑–µ–ª–µ–Ω—á—É—Ü–∏",
    "–ò–∑–±—è–≥–≤–∞–π –≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏ —Å–ª–µ–¥ 19:00",
    "–ö–æ–º–±–∏–Ω–∏—Ä–∞–π –≤–∏–Ω–∞–≥–∏ –ø—Ä–æ—Ç–µ–∏–Ω + —Ñ–∏–±—Ä–∏"
  ],
  
  "hydrationStrategy": "2.5-3–ª –¥–Ω–µ–≤–Ω–æ, —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ",
  
  "supplementRecommendations": [
    {
      "supplement": "–í–∏—Ç–∞–º–∏–Ω D3",
      "dosage": "4000 IU –¥–Ω–µ–≤–Ω–æ",
      "reasoning": "–ù–∏–≤–∞ 22 ng/mL (—Ü–µ–ª: 40-60)",
      "timing": "–° –º–∞–∑–Ω–∏–Ω–∏, —Å—É—Ç—Ä–∏–Ω"
    },
    {
      "supplement": "–û–º–µ–≥–∞-3",
      "dosage": "1000-2000mg EPA+DHA",
      "reasoning": "–ü—Ä–æ—Ç–∏–≤–æ–≤—ä–∑–ø–∞–ª–∏—Ç–µ–ª–Ω–æ, —Å—ä—Ä–¥–µ—á–Ω–æ –∑–¥—Ä–∞–≤–µ",
      "timing": "–° —Ö—Ä–∞–Ω–∞"
    }
  ],
  
  "psychologicalSupport": [
    "–¢–µ—Ö–Ω–∏–∫–∏ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–µ—Å–∞ (–º–µ–¥–∏—Ç–∞—Ü–∏—è, –¥–∏—à–∞–Ω–µ)",
    "–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–æ –¥–Ω–µ–≤–Ω–∏–∫ –∑–∞ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –µ–º–æ—Ü–∏–æ–Ω–∞–ª–Ω–æ —è–¥–µ–Ω–µ",
    "–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏ - —Ñ–æ–∫—É—Å –≤—ä—Ä—Ö—É –ø—Ä–æ–≥—Ä–µ—Å–∞, –Ω–µ –ø–µ—Ä—Ñ–µ–∫—Ü–∏—è—Ç–∞"
  ],
  
  "expectedOutcomes": {
    "short_term": "–ü–æ–¥–æ–±—Ä–µ–Ω–∞ –µ–Ω–µ—Ä–≥–∏—è –∏ —Å—ä–Ω (2-4 —Å–µ–¥–º–∏—Ü–∏)",
    "medium_term": "–ù–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –∫—Ä—ä–≤–Ω–∞ –∑–∞—Ö–∞—Ä (1-3 –º–µ—Å–µ—Ü–∞)",
    "long_term": "–ü–æ—Å—Ç–∏–≥–∞–Ω–µ –Ω–∞ —Ü–µ–ª–µ–≤–æ —Ç–µ–≥–ª–æ –∏ –∑–¥—Ä–∞–≤–Ω–∏ –º–∞—Ä–∫–µ—Ä–∏ (6-12 –º–µ—Å–µ—Ü–∞)"
  }
}
```

### –ö–∞–∫–≤–æ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞ —Å–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏
- `dietaryModifier` ‚Üí –≤–ª–∏—è–µ –Ω–∞ –∏–∑–±–æ—Ä–∞ –Ω–∞ —Ö—Ä–∞–Ω–∏
- `mealsPerDay` ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –¥–µ–Ω—è
- `macroDistribution` ‚Üí —Ü–µ–ª–µ–≤–∏ –º–∞–∫—Ä–æ—Å–∏ –∑–∞ –≤—Å—è–∫–æ —è–¥–µ–Ω–µ
- `foodsToAvoid` ‚Üí —Å—Ç—Ä–∏–∫—Ç–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- `mealTiming` ‚Üí –≤—Ä–µ–º–µ–≤–∏ —Ä–∞–º–∫–∏

---

## –°—Ç—ä–ø–∫–∞ 3: –•–†–ê–ù–ò–¢–ï–õ–ï–ù –ü–õ–ê–ù (Meal Plan) - –ü—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–∞ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
–°—Ç—ä–ø–∫–∞ 3 —Å–µ —Å—ä—Å—Ç–æ–∏ –æ—Ç **4 –ø–æ–¥—Å—Ç—ä–ø–∫–∏** (chunks) –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ 7-–¥–Ω–µ–≤–µ–Ω –ø–ª–∞–Ω:

1. **–ü–æ–¥—Å—Ç—ä–ø–∫–∞ 3.1:** –î–µ–Ω 1-2
2. **–ü–æ–¥—Å—Ç—ä–ø–∫–∞ 3.2:** –î–µ–Ω 3-4
3. **–ü–æ–¥—Å—Ç—ä–ø–∫–∞ 3.3:** –î–µ–Ω 5-6
4. **–ü–æ–¥—Å—Ç—ä–ø–∫–∞ 3.4:** –î–µ–Ω 7

### –¶–µ–ª –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞
–ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å —Ç–æ—á–Ω–∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è.

### AI –ó–∞—è–≤–∫–∞ –∑–∞ –≤—Å—è–∫–∞ –ø–æ–¥—Å—Ç—ä–ø–∫–∞ (Input –∫—ä–º AI)

**–¢–∏–ø:** `step3_meal_plan_chunk_1` –¥–æ `step3_meal_plan_chunk_4`  
**Token Limit:** 8000 tokens (–∑–∞ –≤—Å—è–∫–∞ –ø–æ–¥—Å—Ç—ä–ø–∫–∞)  
**Prompt —Å—ä–¥—ä—Ä–∂–∞:**
- –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏ (–∫–æ–º–ø–∞–∫—Ç–µ–Ω)
- **–ö–û–ú–ü–ê–ö–¢–ï–ù –∞–Ω–∞–ª–∏–∑** (—Å–∞–º–æ keyProblems, nutritionalDeficiencies)
- **–ö–û–ú–ü–ê–ö–¢–ù–ê —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** (—Å–∞–º–æ –∫–ª—é—á–æ–≤–∏ –ø—Ä–∞–≤–∏–ª–∞)
- –ü—Ä–µ–¥–∏—à–Ω–∏ –¥–Ω–∏ (–∑–∞ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ)
- ADLE v8 Whitelist/Blacklist (–∫–µ—à–∏—Ä–∞–Ω–∏)
- –ö–∞–ª–æ—Ä–∏–∏ –∏ –º–∞–∫—Ä–æ—Å–∏ –∑–∞ –¥–µ–Ω—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ ADLE v8 —Ö—Ä–∞–Ω–æ—Å—ä—Å—Ç–∞–≤—è–Ω–µ

### AI –û—Ç–≥–æ–≤–æ—Ä –∑–∞ –≤—Å—è–∫–∞ –ø–æ–¥—Å—Ç—ä–ø–∫–∞ (Output –æ—Ç AI)

**–û—á–∞–∫–≤–∞–Ω JSON —Ñ–æ—Ä–º–∞—Ç (–ø—Ä–∏–º–µ—Ä –∑–∞ –î–µ–Ω 1-2):**

```json
{
  "day1": {
    "date": "–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫",
    "totalCalories": 2100,
    "totalMacros": {
      "protein": 157,
      "carbs": 210,
      "fats": 70
    },
    "meals": [
      {
        "type": "–ó–∞–∫—É—Å–∫–∞",
        "time": "07:30",
        "name": "–û–º–ª–µ—Ç —Å—ä—Å –∑–µ–ª–µ–Ω—á—É—Ü–∏ –∏ –ø—ä–ª–Ω–æ–∑—ä—Ä–Ω–µ—Å—Ç —Ö–ª—è–±",
        "description": "3 —è–π—Ü–∞ —Å –¥–æ–º–∞—Ç–∏, —á—É—à–∫–∏ –∏ —Å–ø–∞–Ω–∞–∫, –ø–æ–¥–Ω–µ—Å–µ–Ω–∏ —Å 1 —Ñ–∏–ª–∏–π–∫–∞ –ø—ä–ª–Ω–æ–∑—ä—Ä–Ω–µ—Å—Ç —Ö–ª—è–±",
        "ingredients": [
          "3 —Ü–µ–ª–µ–≤–∏ —è–π—Ü–∞ (210g)",
          "100g –¥–æ–º–∞—Ç–∏",
          "80g —á—É—à–∫–∏",
          "50g –±–µ–π–±–∏ —Å–ø–∞–Ω–∞–∫",
          "1 —Ñ–∏–ª–∏–π–∫–∞ –ø—ä–ª–Ω–æ–∑—ä—Ä–Ω–µ—Å—Ç —Ö–ª—è–± (50g)",
          "5–º–ª –∑–µ—Ö—Ç–∏–Ω –∑–∞ –≥–æ—Ç–≤–µ–Ω–µ"
        ],
        "calories": 450,
        "macros": {
          "protein": 28,
          "carbs": 35,
          "fats": 20
        },
        "cookingInstructions": "–†–∞–∑–±–∏–π —è–π—Ü–∞—Ç–∞...",
        "notes": "–í–∏—Å–æ–∫–æ–ø—Ä–æ—Ç–µ–∏–Ω–æ–≤–∞ –∑–∞–∫—É—Å–∫–∞ –∑–∞ –¥—ä–ª–≥–æ—Ç—Ä–∞–π–Ω–∞ —Å–∏—Ç–æ—Å—Ç"
      },
      {
        "type": "–û–±—è–¥",
        "time": "12:30",
        "name": "–ü–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ —Å –∫–∏–Ω–æ–∞ –∏ –∑–µ–ª–µ–Ω–∞ —Å–∞–ª–∞—Ç–∞",
        "description": "–ü–µ—á–µ–Ω–æ –ø–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ —Å –∫–∏–Ω–æ–∞ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–∞ —Å–∞–ª–∞—Ç–∞",
        "ingredients": [
          "150g –ø–∏–ª–µ—à–∫–æ —Ñ–∏–ª–µ",
          "100g –∫–∏–Ω–æ–∞ (—Å—É—Ö–æ —Ç–µ–≥–ª–æ)",
          "100g –∫—Ä–∞—Å—Ç–∞–≤–∏—Ü–∏",
          "100g –¥–æ–º–∞—Ç–∏",
          "50g –∑–µ–ª–µ–Ω–∞ —Å–∞–ª–∞—Ç–∞",
          "10–º–ª –∑–µ—Ö—Ç–∏–Ω",
          "–õ–∏–º–æ–Ω–æ–≤ —Å–æ–∫"
        ],
        "calories": 550,
        "macros": {
          "protein": 45,
          "carbs": 55,
          "fats": 12
        },
        "cookingInstructions": "–ò–∑–ø–µ—á–∏ –ø–∏–ª–µ—Ç–æ...",
        "notes": "–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏ –≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏ —Å –≤–∏—Å–æ–∫ –ø—Ä–æ—Ç–µ–∏–Ω"
      },
      {
        "type": "–°–ª–µ–¥–æ–±–µ–¥–Ω–∞ –∑–∞–∫—É—Å–∫–∞",
        "time": "16:00",
        "name": "–ö–∏—Å–µ–ª–æ –º–ª—è–∫–æ —Å —è–¥–∫–∏",
        "description": "–ù–∞—Ç—É—Ä–∞–ª–Ω–æ –∫–∏—Å–µ–ª–æ –º–ª—è–∫–æ —Å –±–∞–¥–µ–º–∏ –∏ —Å–µ–º–µ–Ω–∞",
        "ingredients": [
          "200g –∫–∏—Å–µ–ª–æ –º–ª—è–∫–æ 2%",
          "20g –±–∞–¥–µ–º–∏",
          "10g —á–∏–∞ —Å–µ–º–µ–Ω–∞"
        ],
        "calories": 280,
        "macros": {
          "protein": 14,
          "carbs": 18,
          "fats": 16
        },
        "cookingInstructions": "–°–º–µ—Å–≤–∞–Ω–µ",
        "notes": "–ó–¥—Ä–∞–≤–æ—Å–ª–æ–≤–Ω–∏ –º–∞–∑–Ω–∏–Ω–∏ –∏ –ø—Ä–æ–±–∏–æ—Ç–∏—Ü–∏"
      },
      {
        "type": "–í–µ—á–µ—Ä—è",
        "time": "19:00",
        "name": "–ü–µ—á–µ–Ω–∞ —Ä–∏–±–∞ —Å—ä—Å –∑–∞–¥—É—à–µ–Ω–∏ –∑–µ–ª–µ–Ω—á—É—Ü–∏",
        "description": "–§–∏–ª–µ –æ—Ç —Ä–∏–±–∞ —Å—ä—Å –∑–µ–ª–µ–Ω—á—É—Ü–∏ –Ω–∞ –ø–∞—Ä–∞",
        "ingredients": [
          "180g —Ä–∏–±–∞ (—Å—å–æ–º–≥–∞ –∏–ª–∏ —Å–∫—É–º—Ä–∏—è)",
          "150g –±—Ä–æ–∫–æ–ª–∏",
          "100g –º–æ—Ä–∫–æ–≤–∏",
          "80g —Ç–∏–∫–≤–∏—á–∫–∏",
          "10–º–ª –∑–µ—Ö—Ç–∏–Ω"
        ],
        "calories": 420,
        "macros": {
          "protein": 38,
          "carbs": 22,
          "fats": 18
        },
        "cookingInstructions": "–ò–∑–ø–µ—á–∏ —Ä–∏–±–∞—Ç–∞...",
        "notes": "–õ–µ–∫–∞ –≤–µ—á–µ—Ä—è, –±–æ–≥–∞—Ç–∞ –Ω–∞ –æ–º–µ–≥–∞-3"
      }
    ]
  },
  "day2": {
    "date": "–í—Ç–æ—Ä–Ω–∏–∫",
    "totalCalories": 2050,
    "totalMacros": {
      "protein": 155,
      "carbs": 205,
      "fats": 68
    },
    "meals": [
      // –ü–æ–¥–æ–±–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞...
    ]
  }
}
```

### –î–µ—Ç–∞–π–ª–∏ –∑–∞ –≤—Å—è–∫–æ —è–¥–µ–Ω–µ

**–ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞ –∑–∞ –≤—Å—è–∫–æ meal:**
```json
{
  "type": "–ó–∞–∫—É—Å–∫–∞/–û–±—è–¥/–°–ª–µ–¥–æ–±–µ–¥–Ω–∞ –∑–∞–∫—É—Å–∫–∞/–í–µ—á–µ—Ä—è/–ö—ä—Å–Ω–∞ –∑–∞–∫—É—Å–∫–∞",
  "time": "HH:MM",
  "name": "–ö—Ä–∞—Ç–∫–æ –∏–º–µ –Ω–∞ —è–¥–µ–Ω–µ—Ç–æ",
  "description": "1-2 –∏–∑—Ä–µ—á–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏–µ",
  "ingredients": ["–°–ø–∏—Å—ä–∫ —Å —Ç–æ—á–Ω–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞"],
  "calories": 450,
  "macros": {
    "protein": 28,
    "carbs": 35,
    "fats": 20
  },
  "cookingInstructions": "–°—Ç—ä–ø–∫–∏ –∑–∞ –ø—Ä–∏–≥–æ—Ç–≤—è–Ω–µ",
  "notes": "–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –±–µ–ª–µ–∂–∫–∏"
}
```

### ADLE v8 –í–∞–ª–∏–¥–∞—Ü–∏—è

–í—Å—è–∫–æ —è–¥–µ–Ω–µ —Å–ª–µ–¥–≤–∞ —Å—Ç—Ä–∏–∫—Ç–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞:
- **R1:** –ü—Ä–æ—Ç–µ–∏–Ω = —Ç–æ—á–Ω–æ 1 (exception: –∑–∞–∫—É—Å–∫–∞ —Å —è–π—Ü–∞ –º–æ–∂–µ 0-1 secondary)
- **R2:** –ó–µ–ª–µ–Ω—á—É—Ü–∏ = 1-2 (–°–∞–ª–∞—Ç–∞ –ò–õ–ò –°–≤–µ–∂–∞ –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞, –ù–ï –∏ –¥–≤–µ—Ç–µ)
- **R3:** –ï–Ω–µ—Ä–≥–∏—è = 0-1 (–Ω–∏–∫–æ–≥–∞ 2)
- **R4:** –ú–ª–µ—á–Ω–∏ = –º–∞–∫—Å 1 –Ω–∞ —è–¥–µ–Ω–µ
- **R5:** –ú–∞–∑–Ω–∏–Ω–∏ = 0-1 (–∞–∫–æ –∏–º–∞ —è–¥–∫–∏ ‚Üí –±–µ–∑ –∑–µ—Ö—Ç–∏–Ω)
- **R6:** –°–∏—Ä–µ–Ω–µ –ø—Ä–∞–≤–∏–ª–æ (–∞–∫–æ —Å–∏—Ä–µ–Ω–µ ‚Üí –±–µ–∑ –∑–µ—Ö—Ç–∏–Ω/–º–∞—Å–ª–æ)
- **R7:** –ë–µ–∫–æ–Ω –ø—Ä–∞–≤–∏–ª–æ (–∞–∫–æ –±–µ–∫–æ–Ω ‚Üí Fat=0)
- **R8:** –ë–æ–±–æ–≤–∏ –∫–∞—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ (–±–æ–±/–ª–µ—â–∞/–Ω–∞—Ö—É—Ç ‚Üí Energy=0)

### –ü—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–∞ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è - –†–µ–∑—É–ª—Ç–∞—Ç

–°–ª–µ–¥ 4 –ø–æ–¥—Å—Ç—ä–ø–∫–∏ backend-—ä—Ç –∫–æ–º–±–∏–Ω–∏—Ä–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –≤:

```json
{
  "weekPlan": {
    "day1": { /* –î–µ–Ω 1 –¥–∞–Ω–Ω–∏ */ },
    "day2": { /* –î–µ–Ω 2 –¥–∞–Ω–Ω–∏ */ },
    "day3": { /* –î–µ–Ω 3 –¥–∞–Ω–Ω–∏ */ },
    "day4": { /* –î–µ–Ω 4 –¥–∞–Ω–Ω–∏ */ },
    "day5": { /* –î–µ–Ω 5 –¥–∞–Ω–Ω–∏ */ },
    "day6": { /* –î–µ–Ω 6 –¥–∞–Ω–Ω–∏ */ },
    "day7": { /* –î–µ–Ω 7 –¥–∞–Ω–Ω–∏ */ }
  }
}
```

---

## –°—Ç—ä–ø–∫–∞ 4: –†–ï–ó–Æ–ú–ï (Summary) - –ü—Ä–µ–ø–æ—Ä—ä–∫–∏ –∏ –î–æ–±–∞–≤–∫–∏

### –¶–µ–ª –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞
–§–∏–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –ø–ª–∞–Ω–∞ —Å –æ–±—â–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ –∏ –¥–æ–±–∞–≤–∫–∏.

### AI –ó–∞—è–≤–∫–∞ (Input –∫—ä–º AI)
**–¢–∏–ø:** `step4_summary`  
**Token Limit:** 2000 tokens (lightweight)  
**Prompt —Å—ä–¥—ä—Ä–∂–∞:**
- –ó–¥—Ä–∞–≤–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∫—Ä–∞—Ç–∫–∏ keyProblems)
- Whitelist/Blacklist —Ö—Ä–∞–Ω–∏
- –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω weekPlan (–∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è (–∑–∞ consistency)

### AI –û—Ç–≥–æ–≤–æ—Ä (Output –æ—Ç AI)

**–û—á–∞–∫–≤–∞–Ω JSON —Ñ–æ—Ä–º–∞—Ç:**

```json
{
  "summary": {
    "bmr": 1650,
    "dailyCalories": 2100,
    "macros": {
      "protein": 157,
      "carbs": 210,
      "fats": 70
    }
  },
  
  "recommendations": [
    "–ö–æ–Ω—Å—É–º–∏—Ä–∞–π –∑–µ–ª–µ–Ω—á—É—Ü–∏ –ø—Ä–∏ –≤—Å—è–∫–æ —Ö—Ä–∞–Ω–µ–Ω–µ",
    "–ü–∏–π –≤–æ–¥–∞ 30 –º–∏–Ω –ø—Ä–µ–¥–∏ —è–¥–µ–Ω–µ",
    "–ò–∑–±—è–≥–≤–∞–π –≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏ —Å–ª–µ–¥ 19:00",
    "–ö–æ–Ω—Å—É–º–∏—Ä–∞–π —Ñ–µ—Ä–º–µ–Ω—Ç–∏—Ä–∞–ª–∏ —Ö—Ä–∞–Ω–∏ –∑–∞ –ø—Ä–æ–±–∏–æ—Ç–∏—Ü–∏"
  ],
  
  "forbidden": [
    "–†–∞—Ñ–∏–Ω–∏—Ä–∞–Ω–∞ –∑–∞—Ö–∞—Ä –∏ —Å–ª–∞–¥–∫–∏—à–∏",
    "–ü—Ä–µ—Ä–∞–±–æ—Ç–µ–Ω–∏ –º–µ—Å–∞ (–∫–æ–ª–±–∞—Å–∏, –Ω–∞–¥–µ–Ω–∏—Ü–∏)",
    "–õ—É–∫ (ADLE v8 –∑–∞–±—Ä–∞–Ω–∞)",
    "–ü—É–µ—à–∫–æ –º–µ—Å–æ (ADLE v8 –∑–∞–±—Ä–∞–Ω–∞)",
    "–¢—Ä–∞–Ω—Å-–º–∞–∑–Ω–∏–Ω–∏ –∏ —Ñ—Ä–∏—Ç—é—Ä"
  ],
  
  "psychology": [
    "–ü—Ä–∞–∫—Ç–∏–∫—É–≤–∞–π 10 –º–∏–Ω –º–µ–¥–∏—Ç–∞—Ü–∏—è —Å—É—Ç—Ä–∏–Ω",
    "–í–æ–¥–∏ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–æ –¥–Ω–µ–≤–Ω–∏–∫ –∑–∞ –µ–º–æ—Ü–∏–∏",
    "–°–ø–∏ –º–∏–Ω–∏–º—É–º 7-8 —á–∞—Å–∞",
    "–ü—Ä–∞–≤–∏ –∫—Ä–∞—Ç–∫–∏ —Ä–∞–∑—Ö–æ–¥–∫–∏ —Å–ª–µ–¥ —è–¥–µ–Ω–µ"
  ],
  
  "waterIntake": "2.5-3 –ª–∏—Ç—Ä–∞ –¥–Ω–µ–≤–Ω–æ, —Ä–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ",
  
  "supplements": [
    {
      "name": "–í–∏—Ç–∞–º–∏–Ω D3",
      "dosage": "4000 IU –¥–Ω–µ–≤–Ω–æ",
      "timing": "–°—É—Ç—Ä–∏–Ω —Å —Ö—Ä–∞–Ω–∞",
      "reason": "–î–µ—Ñ–∏—Ü–∏—Ç (22 ng/mL), –∏–º—É–Ω–Ω–∞ –ø–æ–¥–∫—Ä–µ–ø–∞"
    },
    {
      "name": "–û–º–µ–≥–∞-3",
      "dosage": "1000-2000mg EPA+DHA",
      "timing": "–° –æ–±—è–¥ –∏–ª–∏ –≤–µ—á–µ—Ä—è",
      "reason": "–ü—Ä–æ—Ç–∏–≤–æ–≤—ä–∑–ø–∞–ª–∏—Ç–µ–ª–Ω–æ, –∫–∞—Ä–¥–∏–æ–ø—Ä–æ—Ç–µ–∫—Ü–∏—è"
    },
    {
      "name": "–ú–∞–≥–Ω–µ–∑–∏–π",
      "dosage": "300-400mg",
      "timing": "–í–µ—á–µ—Ä –ø—Ä–µ–¥–∏ —Å—ä–Ω",
      "reason": "–°—Ç—Ä–µ—Å, –º—É—Å–∫—É–ª–Ω–∏ –∫—Ä–∞–º–ø–∏, —Å—ä–Ω"
    },
    {
      "name": "–ü—Ä–æ–±–∏–æ—Ç–∏—Ü–∏",
      "dosage": "10-15 –º–∏–ª–∏–∞—Ä–¥–∞ CFU",
      "timing": "–°—É—Ç—Ä–∏–Ω –Ω–∞ –ø—Ä–∞–∑–µ–Ω —Å—Ç–æ–º–∞—Ö",
      "reason": "–•—Ä–∞–Ω–æ—Å–º–∏–ª–∞—Ç–µ–ª–Ω–æ –∑–¥—Ä–∞–≤–µ, –∏–º—É–Ω–∏—Ç–µ—Ç"
    }
  ]
}
```

---

## –°—Ç—ä–ø–∫–∞ 5: –í–ê–õ–ò–î–ê–¶–ò–Ø (Validation) - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –¶–µ–ª –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞
–°–ª–µ–¥ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ—Ç–æ –Ω–∞ –ø—ä–ª–Ω–∏—è –ø–ª–∞–Ω (–°—Ç—ä–ø–∫–∏ 1-4), —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–≤—ä—Ä—à–≤–∞ –∑–∞–¥—ä–ª–±–æ—á–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å **12+ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏** –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ, —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç.

### –ö–∞–∫–≤–æ —Å–µ –≤–∞–ª–∏–¥–∏—Ä–∞

#### 1. **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏ –ü—Ä–æ–≤–µ—Ä–∫–∏**
```javascript
// –ù–∞–ª–∏—á–∏–µ –Ω–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚úì analysis —Å keyProblems, BMR, calories
‚úì strategy —Å dietaryModifier, justification
‚úì weekPlan —Å —Ç–æ—á–Ω–æ 7 –¥–Ω–∏
‚úì summary —Å –∫–∞–ª–æ—Ä–∏–∏ –∏ –º–∞–∫—Ä–æ—Å–∏
‚úì recommendations (–º–∏–Ω–∏–º—É–º 3)
‚úì forbidden (–º–∏–Ω–∏–º—É–º 3)
```

#### 2. **Meal Plan –ü—Ä–æ–≤–µ—Ä–∫–∏ (Step 3)**
```javascript
// –ó–∞ –≤—Å–µ–∫–∏ –¥–µ–Ω
‚úì 1-5 —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–æ—Ä–µ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞
‚úì –í—Å—è–∫–æ —è–¥–µ–Ω–µ –∏–º–∞ macros (protein, carbs, fats)
‚úì –ö–∞–ª–æ—Ä–∏–∏ —Å—ä–≤–ø–∞–¥–∞—Ç —Å –º–∞–∫—Ä–æ—Å–∏ (—Ç–æ–ª–µ—Ä–∞–Ω—Å 10%)
‚úì –ú–∏–Ω–∏–º—É–º –¥–Ω–µ–≤–Ω–∏ –∫–∞–ª–æ—Ä–∏–∏ (800+ kcal)
‚úì –ü—Ä–∞–≤–∏–ª–µ–Ω —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ–Ω —Ä–µ–¥ –Ω–∞ —è–¥–µ–Ω–∏—è
‚úì –ú–∞–∫—Å–∏–º—É–º 1 —Å–ª–µ–¥–æ–±–µ–¥–Ω–∞ –∑–∞–∫—É—Å–∫–∞
‚úì –ú–∞–∫—Å–∏–º—É–º 1 –∫—ä—Å–Ω–∞ –∑–∞–∫—É—Å–∫–∞
‚úì –ö—ä—Å–Ω–∞ –∑–∞–∫—É—Å–∫–∞ —Å low-GI —Ö—Ä–∞–Ω–∏
```

#### 3. **ADLE v8 Compliance (Step 3)**
```javascript
// –ó–∞–±—Ä–∞–Ω–µ–Ω–∏ —Ö—Ä–∞–Ω–∏ –ù–ï –ø—Ä–∏—Å—ä—Å—Ç–≤–∞—Ç –≤ –ø–ª–∞–Ω–∞
‚úó –õ—É–∫ (onion) - hard ban
‚úó –ü—É–µ—à–∫–æ –º–µ—Å–æ (turkey meat) - hard ban
‚úó –ì—Ä—ä—Ü–∫–æ –∫–∏—Å–µ–ª–æ –º–ª—è–∫–æ (greek yogurt)
‚úó –ú–µ–¥, –∑–∞—Ö–∞—Ä, –∫–æ–Ω—Ñ–∏—Ç—é—Ä, —Å–∏—Ä–æ–ø–∏
‚úó –ö–µ—Ç—á—É–ø, –º–∞–π–æ–Ω–µ–∑–∞, BBQ —Å–æ—Å
‚úó –ò–∑–∫—É—Å—Ç–≤–µ–Ω–∏ –ø–æ–¥—Å–ª–∞–¥–∏—Ç–µ–ª–∏

// –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–≤—Ç–∞—Ä—è—â–∏ —Å–µ —è—Å—Ç–∏—è –∑–∞ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ
```

#### 4. **Goal Alignment (Step 2)**
```javascript
// –¶–µ–ª "–û—Ç—Å–ª–∞–±–≤–∞–Ω–µ" ‚Üí –ö–∞–ª–æ—Ä–∏–∏ –Ω–µ —Å–∞ —Ç–≤—ä—Ä–¥–µ –≤–∏—Å–æ–∫–∏ (<3000)
// –¶–µ–ª "–ü–æ–∫–∞—á–≤–∞–Ω–µ" ‚Üí –î–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –∫–∞–ª–æ—Ä–∏–∏
```

#### 5. **Medical Conditions (Step 2, 4)**
```javascript
// –î–∏–∞–±–µ—Ç + –≤–∏—Å–æ–∫–æ–≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–Ω–∞ –¥–∏–µ—Ç–∞ ‚Üí –ì–†–ï–®–ö–ê
// –ê–Ω–µ–º–∏—è + –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ –ë–ï–ó –∂–µ–ª—è–∑–æ ‚Üí –ì–†–ï–®–ö–ê
// PCOS + –≤–∏—Å–æ–∫–∏ –≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏ ‚Üí WARNING
// –í–∞—Ä—Ñ–∞—Ä–∏–Ω + –í–∏—Ç–∞–º–∏–Ω K ‚Üí –û–ü–ê–°–ù–û
```

#### 6. **Dietary Preferences (Step 4)**
```javascript
// –í–µ–≥–∞–Ω ‚Üí –ë–µ–∑ –∂–∏–≤–æ—Ç–∏–Ω—Å–∫–∏ –ø—Ä–æ–¥—É–∫—Ç–∏
// –í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü ‚Üí –ë–µ–∑ –º–µ—Å–æ –∏ —Ä–∏–±–∞
```

#### 7. **Strategy Quality (Step 2)**
```javascript
‚úì planJustification (–º–∏–Ω–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–∞)
‚úì welcomeMessage (–º–∏–Ω–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–∞)
‚úì mealCountJustification (–º–∏–Ω–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–∞)
```

#### 8. **Analysis Quality (Step 1)**
```javascript
‚úì –ë–ï–ó "Normal" severity problems (—Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞—Ç)
```

### Validation Result

**JSON –°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```json
{
  "isValid": false,
  "errors": [
    "–î–µ–Ω 3 –∏–º–∞ 6 —Ö—Ä–∞–Ω–µ–Ω–∏—è - —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –º–µ–∂–¥—É 1 –∏ 5",
    "–õ–∏–ø—Å–≤–∞ –¥–µ—Ç–∞–π–ª–Ω–∞ –æ–±–æ—Å–Ω–æ–≤–∫–∞ –∑–∞—â–æ –ø–ª–∞–Ω—ä—Ç –µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω",
    "–î–µ–Ω 2, —Ö—Ä–∞–Ω–µ–Ω–µ 3: –°—ä–¥—ä—Ä–∂–∞ –õ–£–ö (hard ban –æ—Ç ADLE v8)"
  ],
  "warnings": [
    "–ü–ª–∞–Ω—ä—Ç —Å—ä–¥—ä—Ä–∂–∞ —Ç–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ –ø–æ–≤—Ç–∞—Ä—è—â–∏ —Å–µ —è—Å—Ç–∏—è (7 > 5)"
  ],
  "stepErrors": {
    "step1_analysis": [],
    "step2_strategy": [
      "–õ–∏–ø—Å–≤–∞ –¥–µ—Ç–∞–π–ª–Ω–∞ –æ–±–æ—Å–Ω–æ–≤–∫–∞ –∑–∞—â–æ –ø–ª–∞–Ω—ä—Ç –µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω"
    ],
    "step3_mealplan": [
      "–î–µ–Ω 3 –∏–º–∞ 6 —Ö—Ä–∞–Ω–µ–Ω–∏—è - —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –º–µ–∂–¥—É 1 –∏ 5",
      "–î–µ–Ω 2, —Ö—Ä–∞–Ω–µ–Ω–µ 3: –°—ä–¥—ä—Ä–∂–∞ –õ–£–ö (hard ban –æ—Ç ADLE v8)"
    ],
    "step4_final": []
  },
  "earliestErrorStep": "step2_strategy"
}
```

### –ö–∞–∫–≤–æ —Å–µ —Å–ª—É—á–≤–∞ —Å–ª–µ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞

```javascript
if (validation.isValid) {
  // ‚úÖ –ü–ª–∞–Ω—ä—Ç –µ –≤–∞–ª–∏–¥–µ–Ω
  return { success: true, plan, userId, correctionAttempts: 0 };
} else {
  // ‚ùå –ü–ª–∞–Ω—ä—Ç –∏–º–∞ –≥—Ä–µ—à–∫–∏ ‚Üí –ü—Ä–µ–º–∏–Ω–∞–≤–∞–º–µ –∫—ä–º –°—Ç—ä–ø–∫–∞ 6 (–ö–æ—Ä–µ–∫—Ü–∏—è)
  proceedToCorrection(validation);
}
```

---

## –°—Ç—ä–ø–∫–∞ 6: –ö–û–†–ï–ö–¶–ò–Ø (Correction) - –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ

### –¶–µ–ª –Ω–∞ —Å—Ç—ä–ø–∫–∞—Ç–∞
–ê–∫–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞ –æ—Ç–∫—Ä–∏–µ –≥—Ä–µ—à–∫–∏, —Å–∏—Å—Ç–µ–º–∞—Ç–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞** —Å–∞–º–æ –≥—Ä–µ—à–Ω–∏—Ç–µ —á–∞—Å—Ç–∏ –æ—Ç –ø–ª–∞–Ω–∞, –∑–∞–ø–∞–∑–≤–∞–π–∫–∏ –≤–∞–ª–∏–¥–Ω–∏—Ç–µ.

### –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ

#### –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –Ω–∞–π-—Ä–∞–Ω–Ω–∞—Ç–∞ –≥—Ä–µ—à–Ω–∞ —Å—Ç—ä–ø–∫–∞
```javascript
// –ê–∫–æ –∏–º–∞ –≥—Ä–µ—à–∫–∏ –≤:
step1_analysis  ‚Üí –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞: –°—Ç—ä–ø–∫–∞ 1, 2, 3, 4 (–≤—Å–∏—á–∫–æ)
step2_strategy  ‚Üí –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞: –°—Ç—ä–ø–∫–∞ 2, 3, 4 (–∑–∞–ø–∞–∑–≤–∞ –ê–Ω–∞–ª–∏–∑–∞)
step3_mealplan  ‚Üí –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞: –°—Ç—ä–ø–∫–∞ 3, 4 (–∑–∞–ø–∞–∑–≤–∞ –ê–Ω–∞–ª–∏–∑ –∏ –°—Ç—Ä–∞—Ç–µ–≥–∏—è)
step4_final     ‚Üí –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞: –°—Ç—ä–ø–∫–∞ 4 (–∑–∞–ø–∞–∑–≤–∞ –≤—Å–∏—á–∫–æ –¥—Ä—É–≥–æ)
```

#### –ü—Ä–∏–º–µ—Ä: –ì—Ä–µ—à–∫–∞ –≤ Strategy

```javascript
// –í–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞ –æ—Ç–∫—Ä–∏–≤–∞:
validation.earliestErrorStep = "step2_strategy"
validation.errors = [
  "–õ–∏–ø—Å–≤–∞ –¥–µ—Ç–∞–π–ª–Ω–∞ –æ–±–æ—Å–Ω–æ–≤–∫–∞ –∑–∞—â–æ –ø–ª–∞–Ω—ä—Ç –µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω",
  "–õ–∏–ø—Å–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"
]

// –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∞–∑–≤–∞:
‚úì analysis (–æ—Ç –°—Ç—ä–ø–∫–∞ 1) - –ó–ê–ü–ê–ó–ï–ù

// –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞:
üîÑ strategy (–°—Ç—ä–ø–∫–∞ 2) - –° ERROR PREVENTION –ø—Ä–æ–º–ø—Ç
üîÑ weekPlan (–°—Ç—ä–ø–∫–∞ 3) - –ó–∞—Ä–∞–¥–∏ dependency
üîÑ summary (–°—Ç—ä–ø–∫–∞ 4) - –ó–∞—Ä–∞–¥–∏ dependency
```

### Error Prevention Comment

–ü—Ä–∏ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ, AI –ø–æ–ª—É—á–∞–≤–∞ **–∫—Ä–∏—Ç–∏—á–µ–Ω error prevention –ø—Ä–æ–º–ø—Ç**:

```
‚ïê‚ïê‚ïê üö® –ö–†–ò–¢–ò–ß–ù–û: –ü–†–ï–î–û–¢–í–†–ê–¢–Ø–í–ê–ù–ï –ù–ê –ì–†–ï–®–ö–ò - –û–ü–ò–¢ 1 üö® ‚ïê‚ïê‚ïê
‚ö†Ô∏è –ú–ê–ö–°–ò–ú–ê–õ–ï–ù –ü–†–ò–û–†–ò–¢–ï–¢: –ü—Ä–∏ –ø—Ä–µ–¥–∏—à–Ω–∏—è –æ–ø–∏—Ç –±—è—Ö–∞ –æ—Ç–∫—Ä–∏—Ç–∏ 
—Å–ª–µ–¥–Ω–∏—Ç–µ –≥—Ä–µ—à–∫–∏ –≤ —Å—Ç—ä–ø–∫–∞ "–°–¢–†–ê–¢–ï–ì–ò–Ø":

1. –õ–∏–ø—Å–≤–∞ –¥–µ—Ç–∞–π–ª–Ω–∞ –æ–±–æ—Å–Ω–æ–≤–∫–∞ –∑–∞—â–æ –ø–ª–∞–Ω—ä—Ç –µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–µ–Ω 
   (–º–∏–Ω–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–∞)
2. –õ–∏–ø—Å–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞ –∫–ª–∏–µ–Ω—Ç–∞ 
   (strategy.welcomeMessage, –º–∏–Ω–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–∞)

üî¥ –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–û: –ò–∑–±—è–≥–≤–∞–π –≥–æ—Ä–Ω–∏—Ç–µ –≥—Ä–µ—à–∫–∏! –û–±—ä—Ä–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–æ 
–≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:
- –í—Å–∏—á–∫–∏ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–∏—Å—ä—Å—Ç–≤–∞—Ç
- –î–µ—Ç–∞–π–ª–Ω–∏ –æ–±–æ—Å–Ω–æ–≤–∫–∏ (–º–∏–Ω–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–∞ –∫—ä–¥–µ—Ç–æ –µ –ø–æ–∏—Å–∫–∞–Ω–æ)
- –¢–æ—á–Ω–æ 7 –¥–Ω–∏ –≤ —Å–µ–¥–º–∏—á–Ω–∏—è –ø–ª–∞–Ω
- 1-5 —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–µ–Ω —Å–ø–æ—Ä–µ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ç–∞

–ù–ï –ü–û–í–¢–ê–†–Ø–ô —Ç–µ–∑–∏ –≥—Ä–µ—à–∫–∏ –≤ —Ç–æ–∑–∏ –æ–ø–∏—Ç!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

### Correction Loop

```javascript
MAX_CORRECTION_ATTEMPTS = 4; // –ú–∞–∫—Å–∏–º—É–º 4 –æ–ø–∏—Ç–∞

correctionAttempt = 0;

while (!validation.isValid && correctionAttempt < MAX_CORRECTION_ATTEMPTS) {
  correctionAttempt++;
  
  console.log(`–û–ø–∏—Ç ${correctionAttempt}/${MAX_CORRECTION_ATTEMPTS}`);
  
  // –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞ –æ—Ç earliestErrorStep
  regeneratedPlan = await regenerateFromStep(
    env, 
    data, 
    existingPlan,
    validation.earliestErrorStep,
    validation.stepErrors,
    correctionAttempt
  );
  
  // –í–∞–ª–∏–¥–∏—Ä–∞ –æ—Ç–Ω–æ–≤–æ
  validation = validatePlan(regeneratedPlan, userData);
  
  if (validation.isValid) {
    console.log(`‚úÖ –ü–ª–∞–Ω –≤–∞–ª–∏–¥–∏—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ —Å–ª–µ–¥ ${correctionAttempt} –∫–æ—Ä–µ–∫—Ü–∏–∏`);
    break;
  }
}
```

### Token Limit –∑–∞ –ö–æ—Ä–µ–∫—Ü–∏–∏

```javascript
CORRECTION_TOKEN_LIMIT = 8000; // –í–∏—Å–æ–∫ –ª–∏–º–∏—Ç –∑–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ –∫–æ—Ä–µ–∫—Ü–∏–∏
```

### Fallback –ú–µ—Ö–∞–Ω–∏–∑—ä–º

–ê–∫–æ —Å–ª–µ–¥ 4 –æ–ø–∏—Ç–∞ –ø–ª–∞–Ω—ä—Ç –≤—Å–µ –æ—â–µ –µ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω:

```javascript
if (correctionAttempt >= MAX_CORRECTION_ATTEMPTS && !validation.isValid) {
  // –û–ø–∏—Ç –∑–∞ simplified fallback –ø–ª–∞–Ω
  try {
    const simplifiedPlan = await generateSimplifiedFallbackPlan(env, data);
    
    const fallbackValidation = validatePlan(simplifiedPlan, userData);
    
    if (fallbackValidation.isValid) {
      return {
        success: true,
        plan: simplifiedPlan,
        userId,
        correctionAttempts,
        usedFallback: true
      };
    }
  } catch (fallbackError) {
    console.error('Simplified fallback —Å—ä—â–æ —Å–µ –ø—Ä–æ–≤–∞–ª–∏');
  }
  
  // –ê–∫–æ –∏ fallback —Å–µ –ø—Ä–æ–≤–∞–ª–∏
  return {
    success: false,
    error: `–ü–ª–∞–Ω—ä—Ç –Ω–µ –ø—Ä–µ–º–∏–Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω —Ç–µ—Å—Ç —Å–ª–µ–¥ ${correctionAttempts} –æ–ø–∏—Ç–∏`,
    errors: validation.errors
  };
}
```

### Response —Å Correction Info

```json
{
  "success": true,
  "userId": "user_abc123xyz789",
  "correctionAttempts": 2,
  "plan": {
    /* –ö–æ—Ä–∏–≥–∏—Ä–∞–Ω –≤–∞–ª–∏–¥–µ–Ω –ø–ª–∞–Ω */
  },
  "_meta": {
    "regeneratedFrom": "step2_strategy",
    "correctionAttempt": 2
  }
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```javascript
// –í 95%+ –æ—Ç —Å–ª—É—á–∞–∏—Ç–µ:
correctionAttempts = 0  // –ü–ª–∞–Ω –µ –≤–∞–ª–∏–¥–µ–Ω –æ—Ç –ø—ä—Ä–≤–∏ –ø—ä—Ç

// –í —Ä–µ–¥–∫–∏ —Å–ª—É—á–∞–∏:
correctionAttempts = 1-2  // –õ–µ–∫–∞ –∫–æ—Ä–µ–∫—Ü–∏—è
correctionAttempts = 3-4  // –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ—Ä–µ–∫—Ü–∏–∏

// –ú–Ω–æ–≥–æ —Ä—è–¥–∫–æ:
usedFallback = true  // Simplified fallback –ø–ª–∞–Ω
success = false  // –ü—ä–ª–µ–Ω –ø—Ä–æ–≤–∞–ª (–µ–∫—Å—Ç—Ä–µ–º–Ω–æ —Ä—è–¥–∫–æ)
```

---

## –§–∏–Ω–∞–ª–µ–Ω –û–±–µ–∫—Ç - –ü—ä–ª–µ–Ω –ü–ª–∞–Ω (–ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω –†–µ–∑—É–ª—Ç–∞—Ç)

### –ö–∞–∫–≤–æ –≤—Ä—ä—â–∞ backend –∫—ä–º frontend

**Response –æ—Ç POST /api/generate-plan:**

```json
{
  "success": true,
  "userId": "user_abc123xyz789",
  "correctionAttempts": 0,
  "plan": {
    "analysis": {
      /* –°—Ç—ä–ø–∫–∞ 1 - –ê–Ω–∞–ª–∏–∑ */
      "bmr": 1650,
      "recommendedCalories": 2100,
      "bmi": 24.5,
      "bmiCategory": "–ù–æ—Ä–º–∞–ª–Ω–æ —Ç–µ–≥–ª–æ",
      "keyProblems": [ /* ... */ ],
      "metabolicProfile": { /* ... */ },
      "nutritionalDeficiencies": [ /* ... */ ],
      "digestiveHealth": { /* ... */ },
      "cardioMetabolicRisk": { /* ... */ },
      "psychologicalFactors": { /* ... */ },
      "keyCorrelations": [ /* ... */ ]
    },
    
    "strategy": {
      /* –°—Ç—ä–ø–∫–∞ 2 - –°—Ç—Ä–∞—Ç–µ–≥–∏—è */
      "dietaryModifier": "–ù–∏—Å–∫–æ–≥–ª–∏–∫–µ–º–∏—á–µ–Ω",
      "welcomeMessage": "...",
      "planJustification": "...",
      "mealCountJustification": "...",
      "mealsPerDay": 4,
      "macroDistribution": { /* ... */ },
      "foodsToInclude": [ /* ... */ ],
      "foodsToAvoid": [ /* ... */ ],
      "mealTiming": { /* ... */ },
      "specialGuidelines": [ /* ... */ ],
      "hydrationStrategy": "...",
      "supplementRecommendations": [ /* ... */ ],
      "psychologicalSupport": [ /* ... */ ],
      "expectedOutcomes": { /* ... */ }
    },
    
    "weekPlan": {
      /* –°—Ç—ä–ø–∫–∞ 3 - –•—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω (7 –¥–Ω–∏) */
      "day1": {
        "date": "–ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫",
        "totalCalories": 2100,
        "totalMacros": { "protein": 157, "carbs": 210, "fats": 70 },
        "meals": [ /* 4 —è–¥–µ–Ω–∏—è */ ]
      },
      "day2": { /* ... */ },
      "day3": { /* ... */ },
      "day4": { /* ... */ },
      "day5": { /* ... */ },
      "day6": { /* ... */ },
      "day7": { /* ... */ }
    },
    
    "summary": {
      /* –°—Ç—ä–ø–∫–∞ 4 - –†–µ–∑—é–º–µ */
      "bmr": 1650,
      "dailyCalories": 2100,
      "macros": { "protein": 157, "carbs": 210, "fats": 70 }
    },
    
    "recommendations": [ /* ... */ ],
    "forbidden": [ /* ... */ ],
    "psychology": [ /* ... */ ],
    "waterIntake": "2.5-3–ª –¥–Ω–µ–≤–Ω–æ",
    "supplements": [ /* ... */ ],
    
    "_meta": {
      "tokenUsage": {
        "input": 8500,
        "output": 12000,
        "total": 20500
      },
      "generatedAt": "2026-02-10T01:35:00.000Z"
    }
  }
}
```

---

## Frontend - localStorage –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ö–∞–∫–≤–æ —Å–µ –∑–∞–ø–∞–∑–≤–∞ –≤ –±—Ä–∞—É–∑—ä—Ä–∞

–°–ª–µ–¥ —É—Å–ø–µ—à–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ, frontend-—ä—Ç –∑–∞–ø–∞–∑–≤–∞ —Å–ª–µ–¥–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏:

```javascript
// 1. –ü—ä–ª–Ω–∏—è—Ç –ø–ª–∞–Ω
localStorage.setItem('dietPlan', JSON.stringify(result.plan));

// 2. User ID
localStorage.setItem('userId', result.userId);

// 3. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏ –æ—Ç –≤—ä–ø—Ä–æ—Å–Ω–∏–∫–∞
localStorage.setItem('userData', JSON.stringify(questionnaireAnswers));
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ localStorage

```javascript
// dietPlan - –¶–µ–ª–∏—è—Ç –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω –ø–ª–∞–Ω
{
  "analysis": { /* ... */ },
  "strategy": { /* ... */ },
  "weekPlan": { /* ... */ },
  "summary": { /* ... */ },
  "recommendations": [ /* ... */ ],
  "forbidden": [ /* ... */ ],
  "psychology": [ /* ... */ ],
  "waterIntake": "...",
  "supplements": [ /* ... */ ]
}

// userData - –í—ä–ø—Ä–æ—Å–Ω–∏–∫ –æ—Ç–≥–æ–≤–æ—Ä–∏
{
  "name": "...",
  "age": 30,
  "weight": 75,
  // ... –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏ –æ—Ç –≤—ä–ø—Ä–æ—Å–Ω–∏–∫–∞
}

// userId - –£–Ω–∏–∫–∞–ª–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
"user_abc123xyz789"
```

---

## Frontend –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è - plan.html

### –ö–∞–∫–≤–∏ –¥–∞–Ω–Ω–∏ –æ—á–∞–∫–≤–∞ frontend-—ä—Ç

#### 1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ Overview
```javascript
// –û—Ç strategy
const welcomeMessage = dietPlan.strategy.welcomeMessage;
const justification = dietPlan.strategy.planJustification;
const modifier = dietPlan.strategy.dietaryModifier;
```

#### 2. –ö–∞–ª–æ—Ä–∏–∏ –∏ –ú–∞–∫—Ä–æ—Å–∏
```javascript
// –û—Ç summary
const calories = dietPlan.summary.dailyCalories;
const protein = dietPlan.summary.macros.protein;
const carbs = dietPlan.summary.macros.carbs;
const fats = dietPlan.summary.macros.fats;
```

#### 3. –°–µ–¥–º–∏—á–µ–Ω –ü–ª–∞–Ω
```javascript
// –û—Ç weekPlan
const day1 = dietPlan.weekPlan.day1;
const meals = day1.meals; // Array of meals

// –ó–∞ –≤—Å—è–∫–æ —è–¥–µ–Ω–µ
meal.type        // "–ó–∞–∫—É—Å–∫–∞"
meal.time        // "07:30"
meal.name        // "–û–º–ª–µ—Ç —Å—ä—Å –∑–µ–ª–µ–Ω—á—É—Ü–∏"
meal.description // "3 —è–π—Ü–∞ —Å—ä—Å..."
meal.calories    // 450
meal.macros      // {protein: 28, carbs: 35, fats: 20}
meal.ingredients // ["3 —è–π—Ü–∞", "100g –¥–æ–º–∞—Ç–∏", ...]
```

#### 4. –ü—Ä–µ–ø–æ—Ä—ä–∫–∏ –∏ –ó–∞–±—Ä–∞–Ω–∏
```javascript
// –û—Ç root level
const recommendations = dietPlan.recommendations; // Array
const forbidden = dietPlan.forbidden;             // Array
const psychology = dietPlan.psychology;           // Array
const supplements = dietPlan.supplements;         // Array
```

#### 5. –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –¥–Ω–∏
```javascript
// Frontend –∏—Ç–µ—Ä–∏—Ä–∞ –ø—Ä–µ–∑ day1-day7
for (let i = 1; i <= 7; i++) {
  const dayKey = `day${i}`;
  const dayData = dietPlan.weekPlan[dayKey];
  // –†–µ–Ω–¥–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ–Ω—è
}
```

---

## –ß–∞—Ç –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç (+1 –°—Ç—ä–ø–∫–∞)

### –î–≤–∞ –†–µ–∂–∏–º–∞ –Ω–∞ –ß–∞—Ç

#### 1. Consultation Mode (–ö–æ–Ω—Å—É–ª—Ç–∞—Ü–∏—è)
**–¶–µ–ª:** –û—Ç–≥–æ–≤–∞—Ä—è–Ω–µ –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –∑–∞ –ø–ª–∞–Ω–∞, —Å—ä–≤–µ—Ç–∏, –º–æ—Ç–∏–≤–∞—Ü–∏—è

#### 2. Modification Mode (–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è)
**–¶–µ–ª:** –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –ø–ª–∞–Ω–∞ (–ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ —Ö—Ä–∞–Ω–∏, –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ –±—Ä–æ—è —è–¥–µ–Ω–∏—è)

### –ß–∞—Ç –ó–∞—è–≤–∫–∞ (Input –∫—ä–º AI)

**Endpoint:** `POST /api/chat`

**JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```json
{
  "message": "–ú–æ–≥–∞ –ª–∏ –¥–∞ –ø—Ä–µ–º–∞—Ö–Ω–∞ –æ–≤–µ—Å–µ–Ω–∏—Ç–µ —è–¥–∫–∏?",
  "userId": "user_abc123xyz789",
  "conversationId": "conv_xyz",
  "mode": "modification",
  
  "userData": {
    /* –ü—ä–ª–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏ –æ—Ç –≤—ä–ø—Ä–æ—Å–Ω–∏–∫–∞ */
    "name": "–ò–≤–∞–Ω",
    "age": 30,
    /* ... */
  },
  
  "userPlan": {
    /* –ö–û–ú–ü–ê–ö–¢–ù–ê –≤–µ—Ä—Å–∏—è –Ω–∞ –ø–ª–∞–Ω–∞ */
    "summary": {
      "dailyCalories": 2100,
      "macros": { "protein": 157, "carbs": 210, "fats": 70 }
    },
    "weekPlan": {
      /* –ö–æ–º–ø–∞–∫—Ç–Ω–∞ –≤–µ—Ä—Å–∏—è - —Å–∞–º–æ meal names, –Ω–µ –ø—ä–ª–Ω–∏ –¥–∞–Ω–Ω–∏ */
      "day1": {
        "meals": [
          { "type": "–ó–∞–∫—É—Å–∫–∞", "name": "–û–º–ª–µ—Ç —Å—ä—Å –∑–µ–ª–µ–Ω—á—É—Ü–∏" },
          { "type": "–û–±—è–¥", "name": "–ü–∏–ª–µ—à–∫–æ —Å –∫–∏–Ω–æ–∞" }
        ]
      }
      /* ... */
    }
  },
  
  "conversationHistory": [
    { "role": "user", "content": "–ö–æ–ª–∫–æ –≤–æ–¥–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–∏—è?" },
    { "role": "assistant", "content": "–ü—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º 2.5-3 –ª–∏—Ç—Ä–∞ –¥–Ω–µ–≤–Ω–æ..." },
    { "role": "user", "content": "–ú–æ–≥–∞ –ª–∏ –¥–∞ –ø—Ä–µ–º–∞—Ö–Ω–∞ –æ–≤–µ—Å–µ–Ω–∏—Ç–µ —è–¥–∫–∏?" }
  ]
}
```

### –ß–∞—Ç –û—Ç–≥–æ–≤–æ—Ä (Output –æ—Ç AI)

#### Consultation Mode
```json
{
  "response": "–î–∞, –º–æ–∂–µ—à –¥–∞ –ø—Ä–µ–º–∞—Ö–Ω–µ—à –æ–≤–µ—Å–µ–Ω–∏—Ç–µ —è–¥–∫–∏. –û–±–∞—á–µ —Ç–æ–≤–∞ —â–µ –Ω–∞–º–∞–ª–∏ —Ñ–∏–±—Ä–∏—Ç–µ –≤ –∑–∞–∫—É—Å–∫–∞—Ç–∞. –ò—Å–∫–∞—à –ª–∏ –¥–∞ –≥–∏ –∑–∞–º–µ–Ω—è —Å –Ω–µ—â–æ –¥—Ä—É–≥–æ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–∞ –≥–∏ –ø—Ä–µ–º–∞—Ö–Ω–∞?",
  "conversationHistory": [
    /* –û–±–Ω–æ–≤–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è —Å –Ω–æ–≤–∏—è –æ–±–º–µ–Ω */
  ]
}
```

#### Modification Mode - –° REGENERATE_PLAN

–ê–∫–æ AI —Ä–µ—à–∏ –¥–∞ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞ –ø–ª–∞–Ω–∞:

```json
{
  "response": "‚úì –†–∞–∑–±—Ä–∞–Ω–æ! –ü—Ä–µ–º–∞—Ö–≤–∞–º –æ–≤–µ—Å–µ–Ω–∏—Ç–µ —è–¥–∫–∏ –æ—Ç –≤—Å–∏—á–∫–∏ –¥–Ω–∏ –Ω–∞ –ø–ª–∞–Ω–∞.\n\n[REGENERATE_PLAN:{\"modifications\":[\"exclude_food:–æ–≤–µ—Å–µ–Ω–∏ —è–¥–∫–∏\"]}]",
  "planWasUpdated": true,
  "updatedPlan": {
    /* –ù–æ–≤ –ø—ä–ª–µ–Ω –ø–ª–∞–Ω –±–µ–∑ –æ–≤–µ—Å–µ–Ω–∏ —è–¥–∫–∏ */
  },
  "updatedUserData": {
    /* –û–±–Ω–æ–≤–µ–Ω–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏ */
    "dietDislike": "—Å–ø–∞–Ω–∞–∫, –∫–∞—Ä—Ñ–∏–æ–ª, –æ–≤–µ—Å–µ–Ω–∏ —è–¥–∫–∏",
    "planModifications": []
  },
  "conversationHistory": [
    /* –û–±–Ω–æ–≤–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è */
  ]
}
```

### –ü–æ–¥–¥—ä—Ä–∂–∞–Ω–∏ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

```javascript
// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á—Ä–µ–∑ REGENERATE_PLAN
const MODIFICATIONS = {
  // –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏ –ø—Ä–æ–º–µ–Ω–∏
  "no_intermediate_meals": "–ë–µ–∑ –º–µ–∂–¥–∏–Ω–Ω–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è",
  "3_meals_per_day": "3 —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–æ",
  "4_meals_per_day": "4 —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–Ω–µ–≤–Ω–æ",
  
  // –î–∏–µ—Ç–∏—á–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  "vegetarian": "–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–∏ –ø–ª–∞–Ω",
  "no_dairy": "–ë–µ–∑ –º–ª–µ—á–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏",
  "low_carb": "–ù–∏—Å–∫–æ–≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–Ω–∞ –¥–∏–µ—Ç–∞",
  "increase_protein": "–ü–æ–≤–µ—á–µ –ø—Ä–æ—Ç–µ–∏–Ω–∏",
  
  // –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ —Ö—Ä–∞–Ω–∞
  "exclude_food:–∏–º–µ_–Ω–∞_—Ö—Ä–∞–Ω–∞": "–ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ —Ö—Ä–∞–Ω–∞"
};
```

### Frontend –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ß–∞—Ç

```javascript
// –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ
const chatRequest = {
  message: userMessage,
  userId: localStorage.getItem('userId'),
  conversationId: currentConversationId,
  mode: chatMode, // 'consultation' or 'modification'
  userData: JSON.parse(localStorage.getItem('userData')),
  userPlan: {
    summary: dietPlan.summary,
    weekPlan: compactWeekPlan(dietPlan.weekPlan) // –ö–æ–º–ø–∞–∫—Ç–Ω–∞ –≤–µ—Ä—Å–∏—è
  },
  conversationHistory: chatHistory
};

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä
if (response.planWasUpdated) {
  // –û–±–Ω–æ–≤–∏ localStorage —Å –Ω–æ–≤–∏—è –ø–ª–∞–Ω
  localStorage.setItem('dietPlan', JSON.stringify(response.updatedPlan));
  localStorage.setItem('userData', JSON.stringify(response.updatedUserData));
  
  // –ü—Ä–µ–∑–∞—Ä–µ–¥–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –∑–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–æ–≤–∏—è –ø–ª–∞–Ω
  location.reload();
} else {
  // –°–∞–º–æ –¥–æ–±–∞–≤–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ –≤ —á–∞—Ç–∞
  displayMessage(response.response);
}
```

---

## –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ö–æ—Ä–µ–∫—Ü–∏–∏

**üìñ –í–∏–∂ [–°—Ç—ä–ø–∫–∞ 5 (–í–ê–õ–ò–î–ê–¶–ò–Ø)](#—Å—Ç—ä–ø–∫–∞-5-–≤–∞–ª–∏–¥–∞—Ü–∏—è-validation---–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞-–ø—Ä–æ–≤–µ—Ä–∫–∞) –∏ [–°—Ç—ä–ø–∫–∞ 6 (–ö–û–†–ï–ö–¶–ò–Ø)](#—Å—Ç—ä–ø–∫–∞-6-–∫–æ—Ä–µ–∫—Ü–∏—è-correction---–∏–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ-—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ) –∑–∞ –ø—ä–ª–Ω–∏ –¥–µ—Ç–∞–π–ª–∏.**

### –ö—Ä–∞—Ç–∫–æ –†–µ–∑—é–º–µ

–í–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞ –∏–∑–≤—ä—Ä—à–≤–∞ 12+ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏** - –ù–∞–ª–∏—á–∏–µ –Ω–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
2. **–ê–Ω–∞–ª–∏–∑ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç** - keyProblems, BMR, calories
3. **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç** - dietaryModifier, justification
4. **–°–µ–¥–º–∏—á–µ–Ω –ø–ª–∞–Ω** - 7 –¥–Ω–∏ —Å meals
5. **–ü—Ä–µ–ø–æ—Ä—ä–∫–∏** - Forbidden foods, recommendations
6. **–ó–∞–±—Ä–∞–Ω–µ–Ω–∏ —Ö—Ä–∞–Ω–∏ –≤ –ø–ª–∞–Ω** - ADLE v8 blacklist –ø—Ä–æ–≤–µ—Ä–∫–∞
7. **–¶–µ–ª-–ø–ª–∞–Ω —Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ** - Goal alignment
8. **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ —É—Å–ª–æ–≤–∏—è** - Medical conditions alignment
9. **–î–∏–µ—Ç–∏—á–Ω–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω–∏—è** - Vegetarian/vegan compliance
10. **–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –Ω–∞ —Ö—Ä–∞–Ω–∏** - –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–≤—Ç–∞—Ä—è—â–∏ —Å–µ —è—Å—Ç–∏—è
11. **–ê–Ω–µ–º–∏—è + –≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∂–µ–ª—è–∑–æ
12. **–õ–µ–∫–∞—Ä—Å—Ç–≤–∞-–¥–æ–±–∞–≤–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è**
13. **ADLE v8 –ø—Ä–∞–≤–∏–ª–∞** - Strict meal constructor validation

### –ö–æ—Ä–µ–∫—Ü–∏–æ–Ω–µ–Ω –ú–µ—Ö–∞–Ω–∏–∑—ä–º

–ê–∫–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞ –Ω–∞–º–µ—Ä–∏ –≥—Ä–µ—à–∫–∏, —Å–∏—Å—Ç–µ–º–∞—Ç–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞** —Å–∞–º–æ –≥—Ä–µ—à–Ω–∏—Ç–µ —á–∞—Å—Ç–∏:

```javascript
// Backend
if (!validation.isValid) {
  // –û–ø—Ä–µ–¥–µ–ª–∏ –Ω–∞–π-—Ä–∞–Ω–Ω–∞—Ç–∞ —Å—Ç—ä–ø–∫–∞ —Å –≥—Ä–µ—à–∫–∞
  const errorStep = validation.earliestErrorStep; // step1_analysis, step2_strategy, step3_mealplan, step4_final
  
  // –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–π —Å–∞–º–æ —Ç–∞–∑–∏ —Å—Ç—ä–ø–∫–∞ + —Å–ª–µ–¥–≤–∞—â–∏—Ç–µ
  // –ü—Ä–∏–º–µ—Ä: –ê–∫–æ –≥—Ä–µ—à–∫–∞ –≤ Strategy (step2_strategy)
  //   ‚Üí –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–π —Å—Ç—ä–ø–∫–∏ 2, 3, 4
  //   ‚Üí –ó–∞–ø–∞–∑–∏ —Å—Ç—ä–ø–∫–∞ 1 (Analysis)
  
  await regenerateFromStep(errorStep, errorPreventionComment);
}
```

**Max –∫–æ—Ä–µ–∫—Ü–∏–∏:** 4 –æ–ø–∏—Ç–∞ —Å error prevention –ø—Ä–æ–º–ø—Ç  
**–ê–∫–æ –Ω–µ —É—Å–ø–µ–µ:** Fallback –∫—ä–º simplified –ø–ª–∞–Ω  
**Token limit:** 8000 tokens –∑–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ –∫–æ—Ä–µ–∫—Ü–∏–∏

---

## –†–µ–∑—é–º–µ - –î–∞–Ω–Ω–∏ –ü–æ—Ç–æ—Ü–∏

### 1. –ü–ª–∞–Ω –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ (7 AI –∑–∞—è–≤–∫–∏ + –í–∞–ª–∏–¥–∞—Ü–∏—è + –ö–æ—Ä–µ–∫—Ü–∏—è)

```
–ö–ª–∏–µ–Ω—Ç ‚Üí POST userData
  ‚Üì
Backend –∏–∑—á–∏—Å–ª—è–≤–∞ BMR, TDEE, BMI, calories
  ‚Üì
–°—Ç—ä–ø–∫–∞ 1: Analysis (4k tokens) ‚Üí analysis JSON
  ‚Üì
–°—Ç—ä–ø–∫–∞ 2: Strategy (4k tokens) ‚Üí strategy JSON
  ‚Üì
–°—Ç—ä–ø–∫–∞ 3.1: Days 1-2 (8k tokens) ‚Üí day1, day2 JSON
–°—Ç—ä–ø–∫–∞ 3.2: Days 3-4 (8k tokens) ‚Üí day3, day4 JSON
–°—Ç—ä–ø–∫–∞ 3.3: Days 5-6 (8k tokens) ‚Üí day5, day6 JSON
–°—Ç—ä–ø–∫–∞ 3.4: Day 7 (8k tokens) ‚Üí day7 JSON
  ‚Üì
–°—Ç—ä–ø–∫–∞ 4: Summary (2k tokens) ‚Üí summary, recommendations JSON
  ‚Üì
–ö–æ–º–±–∏–Ω–∏—Ä–∞–Ω–µ ‚Üí –ü—ä–ª–µ–Ω –ø–ª–∞–Ω
  ‚Üì
–°—Ç—ä–ø–∫–∞ 5: –í–ê–õ–ò–î–ê–¶–ò–Ø (12+ checks)
  ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ if (!valid) {                       ‚îÇ
‚îÇ   –°—Ç—ä–ø–∫–∞ 6: –ö–û–†–ï–ö–¶–ò–Ø                ‚îÇ
‚îÇ   ‚Üì                                 ‚îÇ
‚îÇ   –û–ø—Ä–µ–¥–µ–ª–∏ earliestErrorStep        ‚îÇ
‚îÇ   ‚Üì                                 ‚îÇ
‚îÇ   –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞ –æ—Ç —Ç–∞–∑–∏ —Å—Ç—ä–ø–∫–∞         ‚îÇ
‚îÇ   (—Å error prevention –ø—Ä–æ–º–ø—Ç)       ‚îÇ
‚îÇ   ‚Üì                                 ‚îÇ
‚îÇ   –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–Ω–æ–≤–æ                  ‚îÇ
‚îÇ   ‚Üì                                 ‚îÇ
‚îÇ   (–ø–æ–≤—Ç–∞—Ä—è –¥–æ 4 –ø—ä—Ç–∏)               ‚îÇ
‚îÇ }                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ‚Üì
Backend ‚Üí JSON response (—Å correctionAttempts)
  ‚Üì
–ö–ª–∏–µ–Ω—Ç ‚Üí localStorage (dietPlan, userData, userId)
  ‚Üì
plan.html ‚Üí –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
```

### 2. –ß–∞—Ç –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è (1 AI –∑–∞—è–≤–∫–∞ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ)

```
–ö–ª–∏–µ–Ω—Ç ‚Üí POST message + userData + userPlan + history + mode
  ‚Üì
Backend ‚Üí –ü—Ä–æ–º–ø—Ç —Å –ø—ä–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç
  ‚Üì
AI ‚Üí –û—Ç–≥–æ–≤–æ—Ä (2k tokens)
  ‚Üì
Backend ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ [REGENERATE_PLAN:]
  ‚Üì (–∞–∫–æ –∏–º–∞)
–†–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø–ª–∞–Ω —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ (7 AI –∑–∞—è–≤–∫–∏)
  ‚Üì
Backend ‚Üí response + updatedPlan + updatedUserData
  ‚Üì
–ö–ª–∏–µ–Ω—Ç ‚Üí –û–±–Ω–æ–≤–∏ localStorage + –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
```

### 3. –î–∞–Ω–Ω–∏, –ö–æ–∏—Ç–æ –ù–ï –°–ï –°–™–•–†–ê–ù–Ø–í–ê–¢ –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞

```
‚ùå userData - –°–∞–º–æ –≤ localStorage
‚ùå dietPlan - –°–∞–º–æ –≤ localStorage  
‚ùå chatHistory - –°–∞–º–æ –≤ localStorage
‚ùå userId - –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω –æ—Ç backend, –Ω–æ –Ω–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞

‚úÖ Admin config - KV storage (prompts, AI settings)
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏

### Token –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```
–ö–û–ú–ü–ê–ö–¢–ï–ù —Ñ–æ—Ä–º–∞—Ç –∑–∞ Strategy (–≤ prompts):
- –ü—ä–ª–µ–Ω JSON: 695 tokens
- –ö–æ–º–ø–∞–∫—Ç–µ–Ω: 167 tokens
- –°–ø–µ—Å—Ç—è–≤–∞–Ω–µ: 76%

–ö–û–ú–ü–ê–ö–¢–ï–ù —Ñ–æ—Ä–º–∞—Ç –∑–∞ Analysis:
- –ü—ä–ª–µ–Ω JSON: 524 tokens
- –ö–æ–º–ø–∞–∫—Ç–µ–Ω: 327 tokens
- –°–ø–µ—Å—Ç—è–≤–∞–Ω–µ: 37.6%

–û–ë–©–û —Å–ø–µ—Å—Ç—è–≤–∞–Ω–µ: 59.1% (4799 ‚Üí 1962 tokens)
```

### –ö–µ—à–∏—Ä–∞–Ω–µ

```javascript
// Food lists - 1x fetch –≤–º–µ—Å—Ç–æ 4x
const cachedFoodLists = await getDynamicFoodListsSections(env);
// –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –≤ 4-—Ç–µ –ø–æ–¥—Å—Ç—ä–ø–∫–∏ –Ω–∞ meal plan

// Admin prompts - 5min cache
let chatPromptsCache = null;
let chatPromptsCacheTime = 0;
```

### –ì—Ä–µ—à–∫–∏ –∏ Retry

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω retry –ø—Ä–∏ transient –≥—Ä–µ—à–∫–∏
const RETRYABLE_ERRORS = [502, 503, 504, 429, 'ECONNRESET', 'ETIMEDOUT'];
const MAX_RETRIES = 3;
const INITIAL_DELAY = 1000; // ms

// Exponential backoff
delay = initialDelay * Math.pow(2, attempt);
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ **Multi-Step Architecture —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ—Ä–µ–∫—Ü–∏—è (4+1+1 —Å—Ç—ä–ø–∫–∏)** –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –¥—ä–ª–±–æ–∫–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏–∑–∏—Ä–∞–Ω, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–Ω –ø–ª–∞–Ω:

‚úÖ **–°—Ç—ä–ø–∫–∞ 1 (Analysis):** –•–æ–ª–∏—Å—Ç–∏—á–Ω–∞ –∑–¥—Ä–∞–≤–Ω–∞ –æ—Ü–µ–Ω–∫–∞  
‚úÖ **–°—Ç—ä–ø–∫–∞ 2 (Strategy):** –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω –¥–∏–µ—Ç–∏—á–µ–Ω –ø–æ–¥—Ö–æ–¥  
‚úÖ **–°—Ç—ä–ø–∫–∞ 3 (Meal Plan):** –î–µ—Ç–∞–π–ª–Ω–∏ 7-–¥–Ω–µ–≤–Ω–∏ —è–¥–µ–Ω–∏—è (4 –ø–æ–¥—Å—Ç—ä–ø–∫–∏)  
‚úÖ **–°—Ç—ä–ø–∫–∞ 4 (Summary):** –ü—Ä–µ–ø–æ—Ä—ä–∫–∏ –∏ –¥–æ–±–∞–≤–∫–∏  
‚úÖ **–°—Ç—ä–ø–∫–∞ 5 (Validation):** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å 12+ –ø—Ä–æ–≤–µ—Ä–∫–∏  
‚úÖ **–°—Ç—ä–ø–∫–∞ 6 (Correction):** –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –ø—Ä–∏ –≥—Ä–µ—à–∫–∏ (–¥–æ 4 –æ–ø–∏—Ç–∞)  
‚úÖ **+1 (Chat):** –ö–æ–Ω—Å—É–ª—Ç–∞—Ü–∏—è –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –ø–ª–∞–Ω–∞  

**Privacy-First:** –í—Å–∏—á–∫–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –¥–∞–Ω–Ω–∏ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –≤ localStorage, –ù–ò–ö–û–ì–ê –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞.

**AI-Powered:** 7 AI –∑–∞—è–≤–∫–∏ –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ + –¥–æ 4 –∫–æ—Ä–µ–∫—Ü–∏–∏ + –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏ –∑–∞ —á–∞—Ç –∫–æ–Ω—Å—É–ª—Ç–∞—Ü–∏–∏.

**Quality-Assured:** 12+ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ + error prevention –ø—Ä–æ–º–ø—Ç–∏ + fallback –º–µ—Ö–∞–Ω–∏–∑—ä–º.

**ADLE v8 Compliant:** –°—Ç—Ä–∏–∫—Ç–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞ —Ö—Ä–∞–Ω–∏—Ç–µ–ª–Ω–æ —Å—ä—Å—Ç–∞–≤—è–Ω–µ –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ meallogic.txt.
